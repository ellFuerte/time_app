{"ast":null,"code":"import _defineProperty from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useEffect,useRef,useState}from'react';import{Create,Delete,Message}from'@material-ui/icons';import Modal from'../Templates/Modal/Modal';import'./ProfileInfo.css';import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileInfo(){var _useState=useState({}),_useState2=_slicedToArray(_useState,2),check=_useState2[0],setCheck=_useState2[1];var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),checkedItems=_useState4[0],setCheckedItems=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),votearray=_useState6[0],setVotearray=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),isAdmin=_useState8[0],setIsadmin=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),userVote=_useState10[0],setUserVote=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),depsName=_useState12[0],setDepsName=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),user=_useState14[0],setUser=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isFetching=_useState16[0],setIsFetching=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalActive=_useState18[0],setModalActive=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),modalActivePass=_useState20[0],setModalActivePass=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),modalActiveVote=_useState22[0],setModalActiveVote=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),modalVote=_useState24[0],setModalVote=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),vote=_useState26[0],setVote=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),modalActiveResetPass=_useState28[0],setModalActiveResetPass=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),modalActiveReset=_useState30[0],setModalActiveReset=_useState30[1];var _useState31=useState(false),_useState32=_slicedToArray(_useState31,2),modalActiveDelete=_useState32[0],setModalActiveDelete=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),deps=_useState34[0],setDeps=_useState34[1];var _useState35=useState(''),_useState36=_slicedToArray(_useState35,2),error=_useState36[0],setError=_useState36[1];var _useState37=useState(''),_useState38=_slicedToArray(_useState37,2),er=_useState38[0],setErr=_useState38[1];var username=useParams();var localUser=!!username?{_id:username.username,email:\"\"}:JSON.parse(localStorage.getItem('user'));var localUse=JSON.parse(localStorage.getItem('user'));var modalName=useRef();var modalDep=useRef();var modalEmail=useRef();var modalOldPass=useRef();var modalNewPass=useRef();var modalNewPassAgain=useRef();var usersStatuses={0:'',1:'start',2:'end',3:'sick_leave',4:'deleted',5:'vacation',6:'time_off',7:'other'};function findStatus(k){for(var i in usersStatuses){if(i==k){return usersStatuses[i];}}}// данные о пользователе\n// Список всех департаментов и получение департаментов по юзеру\nuseEffect(function(){var getDeps=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/departments/');case 2:res=_context.sent;setDeps(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getDeps(){return _ref.apply(this,arguments);};}();var getNameDeps=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var deps,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:deps={user:username.username};_context2.next=3;return axios.post('/api/departments/',deps);case 3:res=_context2.sent;setDepsName(res.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getNameDeps(){return _ref2.apply(this,arguments);};}();var fetchUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res,user,sort,mass;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:localUser._id=!!localUser._id?localUser._id:localUser.id;localUser._id=!!username?username.username:localUser._id;_context3.next=4;return axios.get('/api/user/'+username.username);case 4:res=_context3.sent;setIsadmin(res.data.isadmin);setUser(res.data);setIsFetching(false);_context3.next=10;return axios.get('/api/user/');case 10:user=_context3.sent;sort=user.data.sort(function(a,b){return a.user_name.localeCompare(b.user_name);});mass=sort.filter(function(element){return element.id!==username.username;});setUserVote(mass);case 14:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchUser(){return _ref3.apply(this,arguments);};}();// Номинации\nvar fetchVote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get('/api/vote/');case 2:res=_context4.sent;setVote(res.data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchVote(){return _ref4.apply(this,arguments);};}();fetchVote();fetchUser();getDeps();getNameDeps();},[]);// изменение данных пользователя\nvar handleClick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){var newInfo,newInfo2;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();newInfo={departmentId:modalDep.current.value||user.department_id,email:modalEmail.current.value.toUpperCase()||user.email,username:modalName.current.value||user.user_name,_id:user.id,isAdmin:user.isadmin,see_child:user.see_child,status:user.status,main_department:user.main_department};if(!(localUse._id!==username.username)){_context5.next=9;break;}newInfo2={departmentId:modalDep.current.value||user.department_id,email:modalEmail.current.value.toUpperCase()||user.email,username:modalName.current.value||user.user_name,_id:user.id};_context5.next=6;return axios.put('/api/user/',newInfo2);case 6:window.location.reload();_context5.next=14;break;case 9:_context5.next=11;return axios.put('/api/user/',newInfo);case 11:localStorage.setItem('user',JSON.stringify(_objectSpread({},newInfo)));setModalActive(false);window.location.reload();case 14:case\"end\":return _context5.stop();}}},_callee5);}));return function handleClick(_x){return _ref5.apply(this,arguments);};}();// изменить пароль\nvar handleClickPassword=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){var passwords;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:e.preventDefault();if(!(modalNewPass.current.value!==modalNewPassAgain.current.value)){_context6.next=4;break;}setErr('Новые пароли не совпадают');return _context6.abrupt(\"return\");case 4:passwords={userId:localUse._id,password:localUse.password,oldPassword:modalOldPass.current.value,newPassword:modalNewPass.current.value};_context6.prev=5;_context6.next=8;return axios.put('/api/newPassword/',passwords);case 8:setModalActivePass(false);/*      localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](5);setErr('Старые пароли не совпадают');case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[5,11]]);}));return function handleClickPassword(_x2){return _ref6.apply(this,arguments);};}();// сбросить пароль\nvar handleResetPass=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){var resetPassword;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e.preventDefault();resetPassword={userId:username.username,newPassword:'qwerty123'};_context7.prev=2;_context7.next=5;return axios.put('/api/resetPassword/',resetPassword);case 5:setModalActiveResetPass(false);_context7.next=10;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](2);case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[2,8]]);}));return function handleResetPass(_x3){return _ref7.apply(this,arguments);};}();var status=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _status;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(user.status===1)){_context8.next=6;break;}_status={status:2,typework_id:1,userId:user.id,healthEnd:'-',commentEnd:'-',workEnd:new Date(Date.now())};_context8.next=4;return axios.put(\"/api/post/\",_status);case 4:_context8.next=7;break;case 6:alert(\"Пользователь не в работе\");case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function status(){return _ref8.apply(this,arguments);};}();// удалить пользователя\nvar handleDelete=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e){var newPost;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:e.preventDefault();setIsFetching(true);newPost={userId:username.username,healthEnd:1,status:4/*                  workEnd: new Date(Date.now()),\n                  workTime: new Date(Date.now()) - new Date(posts[0].workStart)\n\n            localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/};_context9.prev=3;_context9.next=6;return axios.put('/api/deluser/',newPost);case 6:/*      if(user.status === 1){\n                    await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n                  }\n                 localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/setModalActiveDelete(false);window.location.href=\"/profile/\".concat(user.id);_context9.next=13;break;case 10:_context9.prev=10;_context9.t0=_context9[\"catch\"](3);console.log(_context9.t0);case 13:case\"end\":return _context9.stop();}}},_callee9,null,[[3,10]]);}));return function handleDelete(_x4){return _ref9.apply(this,arguments);};}();localUser=!!user&&!Array.isArray(user)?user:localUser;localUser.username=!!localUser.user_name?localUser.user_name:localUser.username;var name=localUser.email.toLowerCase();var button=function button(){votearray.forEach(/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(vote){var arr,voteUser;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:arr=vote.split(\"_\");voteUser={user_id:localUse._id,vote_for_user:arr[1],nominations_id:arr[0]};_context10.next=4;return axios.post('/api/vote/',voteUser);case 4:case\"end\":return _context10.stop();}}},_callee10);}));return function(_x5){return _ref10.apply(this,arguments);};}());setModalActiveVote(false);};var clickVote=function clickVote(e){e.preventDefault();var data=e.target.value.toString();var arr=data.split(\"_\");var votearr=votearray;votearr.push(data);var newArray=votearr.filter(function(element){return element!==\"\";});console.log('newArray=',newArray);setVotearray(newArray);};var secureButton=/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(){var res,addNomination;return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:_context11.next=2;return axios.get('/api/user/'+username.username);case 2:res=_context11.sent;addNomination={userId:username.username,id_nomination:check};_context11.next=6;return axios.post('/api/vote/',addNomination);case 6:setModalVote(false);window.location.reload();case 8:case\"end\":return _context11.stop();}}},_callee11);}));return function secureButton(){return _ref11.apply(this,arguments);};}();var inputClick=function inputClick(event){var _event$target=event.target,id=_event$target.id,checked=_event$target.checked;if(checked){setCheckedItems(checked);}else{setCheckedItems(null);}console.log('id=',event.target.value);setCheck(event.target.value);setCheckedItems(function(prevState){return _objectSpread(_objectSpread({},prevState),{},_defineProperty({},id,checked));});};var nextModal=function nextModal(){setModalVote(true);setModalActiveVote(false);};var images={'1':{src:'../images/1.png',title:'Тучка'},'2':{src:'../images/2.png',title:'Аркадий Паровозов'},'3':{src:'../images/3.png',title:'И так сойдет'},'4':{src:'../images/4.png',title:'Портной'},'5':{src:'../images/5.png',title:'Мама обезьянка'},'6':{src:'../images/6.png',title:'Кот Матроскин'},'7':{src:'../images/7.png',title:'Крот'},'8':{src:'../images/8.png',title:'Птица говорун(голосуем только среди дежурных)'},'9':{src:'../images/9.png',title:'Хома(Голосуем среди коллег из внедрения)'},'10':{src:'../images/10.png',title:'Симка и нолик'}};return/*#__PURE__*/_jsxs(\"div\",{className:\"profileInfo\",children:[isFetching?/*#__PURE__*/_jsx(\"div\",{className:\"isFatching\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}):/*#__PURE__*/_jsxs(\"div\",{className:'employeePI '+findStatus(user.status),children:[/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"name\",children:[user.user_name,localUser?/*#__PURE__*/_jsx(Create,{style:{marginLeft:'5px',fontSize:'large',cursor:'pointer'},onClick:function onClick(){return setModalActive(true);}}):'',localUse.isAdmin?/*#__PURE__*/_jsx(Delete,{style:{cursor:'pointer',fontSize:'large'},onClick:function onClick(){return setModalActiveDelete(true);}}):/*#__PURE__*/_jsx(_Fragment,{}),/*#__PURE__*/_jsx(Message,{style:{cursor:'pointer',fontSize:'large'}}),Object.keys(images).map(function(key,id){return(user.nomination_status===key||user.nomination_status===parseInt(key))&&/*#__PURE__*/_jsx(\"img\",{src:images[key].src,title:images[key].title,alt:\"Image for \".concat(key),className:\"imagesProfile\"},id);})]})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px'},className:\"email\",children:name.charAt(0).toUpperCase()+name.slice(1)}),/*#__PURE__*/_jsx(\"div\",{children:depsName}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActivePass(true);},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}),localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveResetPass(true);},children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}):'',localUse.isAdmin!==isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}):'',localUse.isAdmin!==isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveReset(true);},children:\"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"}):'',localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}):'',/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveVote(true);},children:\"\\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}),localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",type:\"submit\",disabled:isFetching,onClick:nextModal,children:\"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"}):'']}),/*#__PURE__*/_jsxs(Modal,{active:modalActive,setActive:setModalActive,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",className:\"ModalInput\",ref:modalName}),/*#__PURE__*/_jsxs(\"select\",{ref:modalDep,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\"}),deps.map(function(dep,id){return/*#__PURE__*/_jsx(\"option\",{value:dep.id,children:dep.department_name},id);})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",type:\"emailLogin\",className:\"ModalInput\",ref:modalEmail,minLength:\"6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActivePass,setActive:setModalActivePass,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),er&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:er}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleClickPassword,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Old Password\",type:\"password\",className:\"ModalInput\",ref:modalOldPass}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New Password\",type:\"password\",className:\"ModalInput\",ref:modalNewPass,minLength:\"6\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New Password Again\",type:\"password\",className:\"ModalInput\",ref:modalNewPassAgain,minLength:\"6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveResetPass,setActive:setModalActiveResetPass,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleResetPass,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442: qwerty123\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveReset,setActive:setModalActiveReset,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:status,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u044B \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0438\\u0442\\u044C \\u043E\\u0442\\u043C\\u0435\\u0442\\u043A\\u0443 \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438 \\u043F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044F?\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveDelete,setActive:setModalActiveDelete,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleDelete,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveVote,setActive:setModalActiveVote,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u041D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u0438\"}),er&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:er}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"div\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \",vote.map(function(vote,id){return/*#__PURE__*/_jsxs(\"label\",{htmlFor:vote.id,children:[/*#__PURE__*/_jsx(\"h3\",{className:\"inputVote\",children:vote.nominations_name}),vote.description]},id);})]}),/*#__PURE__*/_jsx(\"div\",{className:\"di\",children:vote.map(function(vote,id){return/*#__PURE__*/_jsxs(\"select\",{onChange:clickVote,value:userVote.id,className:\"select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\"}),userVote.map(function(userVote,id){return/*#__PURE__*/_jsx(\"option\",{value:vote.id+'_'+userVote.id,children:userVote.user_name},id);})]},id);})})]}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:isFetching,onClick:button,children:\" \\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(Modal,{active:modalVote,setActive:setModalVote,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{className:\"voteContainer\",children:vote.map(function(vote,id){return/*#__PURE__*/_jsx(\"div\",{className:\"voteItem\",children:/*#__PURE__*/_jsxs(\"label\",{htmlFor:vote.id,className:\"inputVote\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",id:vote.id,value:vote.id,onChange:inputClick,checked:checkedItems[vote.id]||false}),vote.nominations_name,' ',/*#__PURE__*/_jsx(\"img\",{src:\"../images/\".concat(vote.id,\".png\"),alt:\"Image for \".concat(vote.nominations_name),className:\"images\"})]},id)},id);})})}),/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:isFetching,onClick:secureButton,children:\"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C\"})]})]});}","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/ProfileInfo.jsx"],"names":["axios","useEffect","useRef","useState","Create","Delete","Message","Modal","useParams","ProfileInfo","check","setCheck","checkedItems","setCheckedItems","votearray","setVotearray","isAdmin","setIsadmin","userVote","setUserVote","depsName","setDepsName","user","setUser","isFetching","setIsFetching","modalActive","setModalActive","modalActivePass","setModalActivePass","modalActiveVote","setModalActiveVote","modalVote","setModalVote","vote","setVote","modalActiveResetPass","setModalActiveResetPass","modalActiveReset","setModalActiveReset","modalActiveDelete","setModalActiveDelete","deps","setDeps","error","setError","er","setErr","username","localUser","_id","email","JSON","parse","localStorage","getItem","localUse","modalName","modalDep","modalEmail","modalOldPass","modalNewPass","modalNewPassAgain","usersStatuses","findStatus","k","i","getDeps","get","res","data","getNameDeps","post","fetchUser","id","isadmin","sort","a","b","user_name","localeCompare","mass","filter","element","fetchVote","handleClick","e","preventDefault","newInfo","departmentId","current","value","department_id","toUpperCase","see_child","status","main_department","newInfo2","put","window","location","reload","setItem","stringify","handleClickPassword","passwords","userId","password","oldPassword","newPassword","handleResetPass","resetPassword","typework_id","healthEnd","commentEnd","workEnd","Date","now","alert","handleDelete","newPost","href","console","log","Array","isArray","name","toLowerCase","button","forEach","arr","split","voteUser","user_id","vote_for_user","nominations_id","clickVote","target","toString","votearr","push","newArray","secureButton","addNomination","id_nomination","inputClick","event","checked","prevState","nextModal","images","src","title","marginLeft","fontSize","cursor","Object","keys","map","key","nomination_status","parseInt","charAt","slice","width","dep","department_name","nominations_name","description"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport {useEffect, useRef, useState} from 'react'\nimport {Create, Delete, Message} from '@material-ui/icons'\nimport Modal from '../Templates/Modal/Modal'\nimport './ProfileInfo.css'\nimport {useParams} from \"react-router-dom\";\n\nexport default function ProfileInfo() {\n    const [check, setCheck] = useState({});\n    const [checkedItems, setCheckedItems] = useState({});\n    const [votearray, setVotearray] = useState([])\n    const [isAdmin, setIsadmin] = useState([])\n    const [userVote, setUserVote] = useState([])\n    const [depsName, setDepsName] = useState([])\n    const [user, setUser] = useState([])\n    const [isFetching, setIsFetching] = useState(false)\n    const [modalActive, setModalActive] = useState(false)\n    const [modalActivePass, setModalActivePass] = useState(false)\n    const [modalActiveVote, setModalActiveVote] = useState(false)\n    const [modalVote, setModalVote] = useState(false)\n    const [vote, setVote] = useState([])\n    const [modalActiveResetPass, setModalActiveResetPass] = useState(false)\n    const [modalActiveReset, setModalActiveReset] = useState(false)\n    const [modalActiveDelete, setModalActiveDelete] = useState(false)\n    const [deps, setDeps] = useState([])\n    const [error, setError] = useState('')\n    const [er, setErr] = useState('')\n    const username = useParams()\n    let localUser = !!username ? {_id: username.username, email: \"\"} : JSON.parse(localStorage.getItem('user'))\n    const localUse = JSON.parse(localStorage.getItem('user'))\n    const modalName = useRef()\n    const modalDep = useRef()\n    const modalEmail = useRef()\n    const modalOldPass = useRef()\n    const modalNewPass = useRef()\n    const modalNewPassAgain = useRef()\n\n    const usersStatuses = {\n        0: '',\n        1: 'start',\n        2: 'end',\n        3: 'sick_leave',\n        4: 'deleted',\n        5: 'vacation',\n        6: 'time_off',\n        7: 'other'\n    }\n\n    function findStatus(k) {\n        for (let i in usersStatuses) {\n            if (i == k) {\n                return usersStatuses[i]\n            }\n        }\n    }\n\n    // данные о пользователе\n\n\n    // Список всех департаментов и получение департаментов по юзеру\n    useEffect(() => {\n        const getDeps = async () => {\n\n            const res = await axios.get('/api/departments/')\n            setDeps(res.data)\n        }\n\n        const getNameDeps = async () => {\n            const deps = {\n                user: username.username\n            }\n            const res = await axios.post('/api/departments/', deps)\n            setDepsName(res.data)\n        }\n\n        const fetchUser = async () => {\n            localUser._id = !!localUser._id ? localUser._id : localUser.id\n            localUser._id = !!username ? username.username : localUser._id\n            const res = await axios.get('/api/user/' + username.username)\n            setIsadmin(res.data.isadmin)\n            setUser(res.data)\n            setIsFetching(false)\n\n            const user = await axios.get('/api/user/')\n            const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\n            const mass = sort.filter(element => element.id !== username.username)\n            setUserVote(mass)\n        }\n\n        // Номинации\n        const fetchVote = async () => {\n            const res = await axios.get('/api/vote/')\n            setVote(res.data)\n        }\n        fetchVote()\n        fetchUser()\n        getDeps()\n        getNameDeps()\n    }, [])\n\n\n\n    // изменение данных пользователя\n    const handleClick = async (e) => {\n        e.preventDefault()\n\n\n        const newInfo = {\n            departmentId: modalDep.current.value || user.department_id,\n            email: modalEmail.current.value.toUpperCase() || user.email,\n            username: modalName.current.value || user.user_name,\n            _id: user.id,\n            isAdmin: user.isadmin,\n            see_child: user.see_child,\n            status: user.status,\n            main_department: user.main_department\n        }\n        if (localUse._id !== username.username) {\n            const newInfo2 = {\n                departmentId: modalDep.current.value || user.department_id,\n                email: modalEmail.current.value.toUpperCase() || user.email,\n                username: modalName.current.value || user.user_name,\n                _id: user.id,\n            }\n            await axios.put('/api/user/', newInfo2)\n            window.location.reload()\n        } else {\n            await axios.put('/api/user/', newInfo)\n            localStorage.setItem('user', JSON.stringify({...newInfo}))\n            setModalActive(false)\n            window.location.reload()\n        }\n    }\n\n    // изменить пароль\n    const handleClickPassword = async (e) => {\n        e.preventDefault()\n        if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n            setErr('Новые пароли не совпадают')\n            return\n        }\n        const passwords = {\n            userId: localUse._id,\n            password: localUse.password,\n            oldPassword: modalOldPass.current.value,\n            newPassword: modalNewPass.current.value\n        }\n        try {\n            await axios.put('/api/newPassword/', passwords)\n            setModalActivePass(false)\n            /*      localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/\n        } catch (er) {\n            setErr('Старые пароли не совпадают')\n        }\n    }\n\n    // сбросить пароль\n    const handleResetPass = async (e) => {\n        e.preventDefault()\n\n        const resetPassword = {\n            userId: username.username,\n            newPassword: 'qwerty123'\n        }\n\n        try {\n            await axios.put('/api/resetPassword/', resetPassword)\n            setModalActiveResetPass(false)\n        } catch (error) {\n        }\n    }\n\n    const status = async () => {\n        if (user.status === 1) {\n            const status = {\n                status: 2,\n                typework_id: 1,\n                userId: user.id,\n                healthEnd: '-',\n                commentEnd: '-',\n                workEnd: new Date(Date.now())\n            }\n            await axios.put(\"/api/post/\", status)\n        } else {\n            alert(\"Пользователь не в работе\")\n        }\n    }\n\n\n    // удалить пользователя\n    const handleDelete = async (e) => {\n        e.preventDefault()\n        setIsFetching(true)\n\n        const newPost = {\n            userId: username.username,\n            healthEnd: 1,\n            status: 4\n\n/*                  workEnd: new Date(Date.now()),\n                  workTime: new Date(Date.now()) - new Date(posts[0].workStart)\n\n            localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/\n\n        }\n        try {\n            await axios.put('/api/deluser/', newPost)\n\n            /*      if(user.status === 1){\n                    await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n                  }\n                 localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/\n\n            setModalActiveDelete(false)\n            window.location.href = `/profile/${user.id}`\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    localUser = (!!user && !Array.isArray(user)) ? user : localUser\n    localUser.username = !!localUser.user_name ? localUser.user_name : localUser.username\n    const name = localUser.email.toLowerCase()\n\n\n    const button = () => {\n        votearray.forEach(async (vote) => {\n                const arr = vote.split(\"_\")\n\n                const voteUser = {\n                    user_id: localUse._id,\n                    vote_for_user: arr[1],\n                    nominations_id: arr[0]\n                }\n                await axios.post('/api/vote/', voteUser)\n            }\n        )\n        setModalActiveVote(false)\n    }\n\n    const clickVote = (e) => {\n        e.preventDefault()\n        const data = e.target.value.toString()\n        const arr = data.split(\"_\")\n        let votearr = votearray\n        votearr.push(data)\n        const newArray = votearr.filter(element => element !== \"\")\n        console.log('newArray=', newArray)\n        setVotearray(newArray)\n    }\n\n    const secureButton = async () => {\n        const res = await axios.get('/api/user/' + username.username)\n\n        const addNomination = {\n            userId: username.username,\n            id_nomination: check\n        }\n        await axios.post('/api/vote/', addNomination)\n        setModalVote(false)\n        window.location.reload()\n    }\n\n    const inputClick = (event) => {\n        const {id, checked} = event.target;\n        if (checked) {\n            setCheckedItems(checked);\n        } else {\n            setCheckedItems(null);\n        }\n\n        console.log('id=', event.target.value)\n        setCheck(event.target.value)\n        setCheckedItems(prevState => ({\n            ...prevState,\n            [id]: checked\n        }));\n    }\n\n\n  const nextModal = () => {\n    setModalVote(true)\n    setModalActiveVote(false)\n    }\n\n    const images = {\n        '1': { src: '../images/1.png', title: 'Тучка' },\n        '2': { src: '../images/2.png', title: 'Аркадий Паровозов' },\n        '3': { src: '../images/3.png', title: 'И так сойдет' },\n        '4': { src: '../images/4.png', title: 'Портной' },\n        '5': { src: '../images/5.png', title: 'Мама обезьянка' },\n        '6': { src: '../images/6.png', title: 'Кот Матроскин' },\n        '7': { src: '../images/7.png', title: 'Крот' },\n        '8': { src: '../images/8.png', title: 'Птица говорун(голосуем только среди дежурных)' },\n        '9': { src: '../images/9.png', title: 'Хома(Голосуем среди коллег из внедрения)' },\n        '10': { src: '../images/10.png', title: 'Симка и нолик' }\n    };\n\n  return (\n\n        <div className='profileInfo'>\n            {isFetching\n                ? <div className='isFatching'>Загрузка...</div>\n                : <div className={'employeePI ' + (findStatus(user.status))}>\n                    <div className='top'>\n            <span className='name'>\n              {user.user_name}\n\n                {\n                    localUser ? <Create style={{marginLeft:'5px',fontSize: 'large', cursor: 'pointer'}}\n                                     onClick={() => setModalActive(true)}/> : ''\n                }\n\n                {\n                    localUse.isAdmin ? <Delete style={{cursor: 'pointer', fontSize: 'large'}}\n                                            onClick={() => setModalActiveDelete(true)}/> : <></>\n                }\n\n                {\n                    <Message style={{cursor: 'pointer', fontSize: 'large'}} />\n                }\n\n                {Object.keys(images).map((key, id) => (\n                    (user.nomination_status === key || user.nomination_status === parseInt(key)) &&\n                    <img\n                        key={id}\n                        src={images[key].src}\n                        title={images[key].title}\n                        alt={`Image for ${key}`}\n                        className='imagesProfile'\n                    />\n                ))}\n            </span>\n                    </div>\n                    <div style={{fontSize: '18px'}}\n                         className='email'>{name.charAt(0).toUpperCase() + name.slice(1)}</div>\n                    <div>{depsName}</div>\n                    <hr className=\"hr\"/>\n                    {<div className='changePass' onClick={() => setModalActivePass(true)}>Изменить пароль</div>}\n\n                    <div className='changePass' style={{width: \"20px\"}}></div>\n\n                    {localUse.isAdmin ?\n                        <div className='changePass' onClick={() => setModalActiveResetPass(true)}>Сбросить\n                            пароль</div> : ''}\n\n                    {localUse.isAdmin!==isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> : ''}\n\n                    {localUse.isAdmin!==isAdmin ?\n                        <div className='changePass' onClick={() => setModalActiveReset(true)}>Закончить</div> : ''}\n\n                    {localUse.isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> : ''}\n\n                         <div className='changePass' onClick={() => setModalActiveVote(true)}>Проголосовать</div>\n                    <div className='changePass' style={{width: \"20px\"}}></div>\n\n                    {localUse.isAdmin ? <div className=\"changePass\" type=\"submit\" disabled={isFetching}\n                                                onClick={nextModal}>Закрепить номинацию</div> : ''}\n                </div>\n            }\n            <Modal active={modalActive} setActive={setModalActive}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                {error && <div className='modalError'>{error}</div>}\n                <form className=\"modalLoginBox\" onSubmit={handleClick}>\n                    <input\n                        placeholder=\"Name\"\n                        className=\"ModalInput\"\n                        ref={modalName}\n                    />\n                    <select ref={modalDep}>\n                        <option value=''>Выберите подразделение</option>\n                        {deps.map((dep, id) =>\n                            <option key={id} value={dep.id}>{dep.department_name}</option>)}\n                    </select>\n                    <input\n                        placeholder=\"Email\"\n                        type='emailLogin'\n                        className=\"ModalInput\"\n                        ref={modalEmail}\n                        minLength='6'\n                    />\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Изменить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActivePass} setActive={setModalActivePass}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                {er && <div className='modalError'>{er}</div>}\n                <form className=\"modalLoginBox\" onSubmit={handleClickPassword}>\n                    <input\n                        placeholder=\"Old Password\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalOldPass}\n                    />\n                    <input\n                        placeholder=\"New Password\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalNewPass}\n                        minLength='6'\n                    />\n                    <input\n                        placeholder=\"New Password Again\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalNewPassAgain}\n                        minLength='6'\n                    />\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Изменить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveResetPass} setActive={setModalActiveResetPass}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={handleResetPass}>\n                    <h2>Новый пароль будет: qwerty123</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Сбросить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveReset} setActive={setModalActiveReset}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={status}>\n                    <h2>Вы хотите завершить отметку времени пользователя?</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Закончить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveDelete} setActive={setModalActiveDelete}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={handleDelete}>\n                    <h2>Пользователь будет удален</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Удалить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveVote} setActive={setModalActiveVote}>\n\n                <h1>Номинации</h1>\n                {er && <div className='modalError'>{er}</div>}\n                <hr/>\n                <div className='div'>\n                    <div> {vote.map((vote, id) => <label key={id} htmlFor={vote.id}><h3\n                        className='inputVote'>{vote.nominations_name}</h3>\n                        {vote.description}\n                    </label>)}\n                    </div>\n                    <div className='di'>\n                        {vote.map((vote, id) =>\n                            <select onChange={clickVote} key={id} value={userVote.id} className='select'>\n                                <option value=''>Выберите участника</option>\n\n                                {userVote.map((userVote, id) => <option key={id}\n                                                                        value={vote.id + '_' + userVote.id}>{userVote.user_name}</option>)}\n                            </select>\n                        )}</div>\n                </div>\n\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={button}> Проголосовать</button>\n            </Modal>\n            <Modal active={modalVote} setActive={setModalVote}>\n                <h1>Закрепить номинацию</h1>\n                <hr/>\n                <div>\n                    <div className='voteContainer'>\n                        {vote.map((vote, id) => (\n                            <div key={id} className=\"voteItem\">\n                                <label key={id} htmlFor={vote.id} className=\"inputVote\">\n                                    <input\n                                        type='checkbox'\n                                        id={vote.id}\n                                        value={vote.id}\n                                        onChange={inputClick}\n                                        checked={checkedItems[vote.id] || false}\n                                    />\n                                    {vote.nominations_name}{' '}\n                                    <img src={`../images/${vote.id}.png`} alt={`Image for ${vote.nominations_name}`}\n                                         className='images'/>\n                                </label>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={secureButton}>Закрепить</button>\n            </Modal>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}