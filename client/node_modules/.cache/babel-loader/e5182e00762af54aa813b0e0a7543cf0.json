{"ast":null,"code":"var _jsxFileName = \"D:\\\\time_app\\\\client\\\\src\\\\components\\\\ProfileInfo\\\\ProfileInfo.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport { useEffect, useRef, useState } from 'react';\nimport { Create, Delete } from '@material-ui/icons';\nimport Modal from '../Templates/Modal/Modal';\nimport './ProfileInfo.css';\nimport { useParams } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProfileInfo() {\n  _s();\n\n  const [check, setCheck] = useState({});\n  const [checkedItems, setCheckedItems] = useState({});\n  const [votearray, setVotearray] = useState([]);\n  const [userVote, setUserVote] = useState([]);\n  const [depsName, setDepsName] = useState([]);\n  const [user, setUser] = useState([]);\n  const [isFetching, setIsFetching] = useState(false);\n  const [modalActive, setModalActive] = useState(false);\n  const [modalActivePass, setModalActivePass] = useState(false);\n  const [modalActiveVote, setModalActiveVote] = useState(false);\n  const [modalVote, setModalVote] = useState(false);\n  const [vote, setVote] = useState([]);\n  const [modalActiveResetPass, setModalActiveResetPass] = useState(false);\n  const [modalActiveReset, setModalActiveReset] = useState(false);\n  const [modalActiveDelete, setModalActiveDelete] = useState(false);\n  const [deps, setDeps] = useState([]);\n  const [error, setError] = useState('');\n  const [er, setErr] = useState('');\n  const username = useParams();\n  let localUser = !!username ? {\n    _id: username.username,\n    email: \"\"\n  } : JSON.parse(localStorage.getItem('user'));\n  const localUse = JSON.parse(localStorage.getItem('user'));\n  const modalName = useRef();\n  const modalDep = useRef();\n  const modalEmail = useRef();\n  const modalOldPass = useRef();\n  const modalNewPass = useRef();\n  const modalNewPassAgain = useRef();\n  const usersStatuses = {\n    0: '',\n    1: 'start',\n    2: 'end',\n    3: 'sick_leave',\n    4: 'deleted',\n    5: 'vacation',\n    6: 'time_off',\n    7: 'other'\n  };\n\n  function findStatus(k) {\n    for (let i in usersStatuses) {\n      if (i == k) {\n        return usersStatuses[i];\n      }\n    }\n  } // данные о пользователе\n  // Список всех департаментов и получение департаментов по юзеру\n\n\n  useEffect(() => {\n    const getDeps = async () => {\n      const res = await axios.get('/api/departments/');\n      console.log(res.data);\n      setDeps(res.data);\n    };\n\n    const getNameDeps = async () => {\n      const deps = {\n        user: username.username\n      };\n      const res = await axios.post('/api/departments/', deps);\n      setDepsName(res.data);\n    };\n\n    const fetchUser = async () => {\n      localUser._id = !!localUser._id ? localUser._id : localUser.id;\n      localUser._id = !!username ? username.username : localUser._id;\n      const res = await axios.get('/api/user/' + username.username);\n      setUser(res.data);\n      setIsFetching(false);\n      const user = await axios.get('/api/user/');\n      const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name));\n      const mass = sort.filter(element => element.id !== username.username);\n      setUserVote(mass);\n    }; // Номинации\n\n\n    const fetchVote = async () => {\n      const res = await axios.get('/api/vote/');\n      setVote(res.data);\n    };\n\n    fetchVote();\n    fetchUser();\n    getDeps();\n    getNameDeps();\n  }, []); // изменение данных пользователя\n\n  const handleClick = async e => {\n    e.preventDefault();\n    const newInfo = {\n      departmentId: modalDep.current.value || user.department_id,\n      email: modalEmail.current.value.toUpperCase() || user.email,\n      username: modalName.current.value || user.user_name,\n      _id: user.id,\n      isAdmin: user.isadmin,\n      see_child: user.see_child,\n      status: user.status,\n      main_department: user.main_department\n    };\n\n    if (localUse._id !== username.username) {\n      const newInfo2 = {\n        departmentId: modalDep.current.value || user.department_id,\n        email: modalEmail.current.value.toUpperCase() || user.email,\n        username: modalName.current.value || user.user_name,\n        _id: user.id\n      };\n      await axios.put('/api/user/', newInfo2);\n      window.location.reload();\n    } else {\n      await axios.put('/api/user/', newInfo);\n      localStorage.setItem('user', JSON.stringify({ ...newInfo\n      }));\n      setModalActive(false);\n      window.location.reload();\n    }\n  }; // изменить пароль\n\n\n  const handleClickPassword = async e => {\n    e.preventDefault();\n\n    if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n      setErr('Новые пароли не совпадают');\n      return;\n    }\n\n    const passwords = {\n      userId: localUse._id,\n      password: localUse.password,\n      oldPassword: modalOldPass.current.value,\n      newPassword: modalNewPass.current.value\n    };\n\n    try {\n      await axios.put('/api/newPassword/', passwords);\n      setModalActivePass(false);\n      /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/\n    } catch (er) {\n      setErr('Старые пароли не совпадают');\n    }\n  }; // сбросить пароль\n\n\n  const handleResetPass = async e => {\n    e.preventDefault();\n    const resetPassword = {\n      userId: username.username,\n      newPassword: 'qwerty123'\n    };\n\n    try {\n      await axios.put('/api/resetPassword/', resetPassword);\n      setModalActiveResetPass(false);\n    } catch (error) {}\n  };\n\n  const status = async () => {\n    if (user.status === 1) {\n      const status = {\n        status: 2,\n        typework_id: 1,\n        userId: user.id,\n        healthEnd: '-',\n        commentEnd: '-',\n        workEnd: new Date(Date.now())\n      };\n      await axios.put(\"/api/post/\", status);\n    } else {\n      alert(\"Пользователь не в работе\");\n    }\n  }; // удалить пользователя\n\n\n  const handleDelete = async e => {\n    e.preventDefault();\n    setIsFetching(true);\n    const newPost = {\n      userId: username.username,\n      healthEnd: 1,\n      status: 4\n      /*      workEnd: new Date(Date.now()),\n            workTime: new Date(Date.now()) - new Date(posts[0].workStart)*/\n\n    };\n    /* localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/\n\n    try {\n      await axios.put('/api/deluser/', newPost);\n      /*      if(user.status === 1){\n              await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n            }*/\n\n      /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/\n\n      setModalActiveDelete(false);\n      window.location.href = `/profile/${user.id}`;\n    } catch (error) {\n      console.log(error);\n    }\n  };\n\n  localUser = !!user && !Array.isArray(user) ? user : localUser;\n  localUser.username = !!localUser.user_name ? localUser.user_name : localUser.username;\n  const name = localUser.email.toLowerCase();\n\n  const button = () => {\n    votearray.forEach(async vote => {\n      const arr = vote.split(\"_\");\n      const voteUser = {\n        user_id: localUse._id,\n        vote_for_user: arr[1],\n        nominations_id: arr[0]\n      };\n      await axios.post('/api/vote/', voteUser);\n    });\n    setModalActiveVote(false);\n  };\n\n  const clickVote = e => {\n    e.preventDefault();\n    const data = e.target.value.toString();\n    const arr = data.split(\"_\");\n    let votearr = votearray;\n    votearr.push(data);\n    const newArray = votearr.filter(element => element !== \"\");\n    console.log('newArray=', newArray);\n    setVotearray(newArray);\n  };\n\n  const secureButton = async () => {\n    const res = await axios.get('/api/user/' + username.username);\n    console.log('res=', res.data.id);\n    const addNomination = {\n      userId: username.username,\n      id_nomination: check\n    };\n    await axios.post('/api/vote/', addNomination);\n    setModalVote(false);\n  };\n\n  const inputClick = event => {\n    const {\n      id,\n      checked\n    } = event.target;\n\n    if (checked) {\n      setCheckedItems(checked);\n    } else {\n      setCheckedItems(null);\n    }\n\n    console.log('id=', event.target.value);\n    setCheck(event.target.value);\n    setCheckedItems(prevState => ({ ...prevState,\n      [id]: checked\n    }));\n  };\n\n  console.log('local=', localUse._id);\n  console.log('local=', username.username);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profileInfo\",\n    children: [isFetching ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"isFatching\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'employeePI ' + findStatus(user.status),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"top\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"name\",\n          children: [user.user_name, localUser ? /*#__PURE__*/_jsxDEV(Create, {\n            style: {\n              fontSize: 'medium',\n              cursor: 'pointer',\n              marginLeft: '10px'\n            },\n            onClick: () => setModalActive(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 288,\n            columnNumber: 30\n          }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(Delete, {\n            style: {\n              cursor: 'pointer',\n              fontSize: 'medium'\n            },\n            onClick: () => setModalActiveDelete(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 37\n          }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          fontSize: '18px'\n        },\n        className: \"email\",\n        children: name.charAt(0).toUpperCase() + name.slice(1)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: depsName\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 296,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n        className: \"hr\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActivePass(true),\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 298,\n        columnNumber: 22\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        style: {\n          width: \"20px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 21\n      }, this), localUse.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActiveResetPass(true),\n        children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 25\n      }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        style: {\n          width: \"20px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 41\n      }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActiveReset(true),\n        children: \"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 25\n      }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        style: {\n          width: \"20px\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 41\n      }, this) : '', localUse._id !== username.username ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalVote(true),\n        children: \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 314,\n        columnNumber: 25\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActiveVote(true),\n        children: \"\\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 315,\n        columnNumber: 27\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 19\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActive,\n      setActive: setModalActive,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 321,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 17\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 323,\n        columnNumber: 27\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleClick,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Name\",\n          className: \"ModalInput\",\n          ref: modalName\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          ref: modalDep,\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 25\n          }, this), deps.map((dep, id) => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: dep.id,\n            children: dep.department_name\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 29\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Email\",\n          type: \"emailLogin\",\n          className: \"ModalInput\",\n          ref: modalEmail,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 342,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 324,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActivePass,\n      setActive: setModalActivePass,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 17\n      }, this), er && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: er\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleClickPassword,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Old Password\",\n          type: \"password\",\n          className: \"ModalInput\",\n          ref: modalOldPass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"New Password\",\n          type: \"password\",\n          className: \"ModalInput\",\n          ref: modalNewPass,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 358,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"New Password Again\",\n          type: \"password\",\n          className: \"ModalInput\",\n          ref: modalNewPassAgain,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 347,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActiveResetPass,\n      setActive: setModalActiveResetPass,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 378,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleResetPass,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442: qwerty123\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 382,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActiveReset,\n      setActive: setModalActiveReset,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 388,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 389,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: status,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C \\u0432\\u0440\\u0435\\u043C\\u044F\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActiveDelete,\n      setActive: setModalActiveDelete,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 399,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleDelete,\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActiveVote,\n      setActive: setModalActiveVote,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 17\n      }, this), er && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: er\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 411,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [\" \", vote.map((vote, id) => /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: vote.id,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"inputVote\",\n              children: vote.nominations_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 413,\n              columnNumber: 85\n            }, this), vote.description]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 413,\n            columnNumber: 51\n          }, this))]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"di\",\n          children: vote.map((vote, id) => /*#__PURE__*/_jsxDEV(\"select\", {\n            onChange: clickVote,\n            value: userVote.id,\n            className: \"select\",\n            children: [/*#__PURE__*/_jsxDEV(\"option\", {\n              value: \"\",\n              children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 33\n            }, this), userVote.map((userVote, id) => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: vote.id + '_' + userVote.id,\n              children: userVote.user_name\n            }, id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 423,\n              columnNumber: 65\n            }, this))]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 17\n      }, this), localUse.isAdmin ? /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        disabled: isFetching,\n        onClick: () => setModalVote(true),\n        children: \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 428,\n        columnNumber: 37\n      }, this) : '', /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        disabled: isFetching,\n        onClick: button,\n        children: \" \\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 430,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalVote,\n      setActive: setModalVote,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 433,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 434,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"voteContainer\",\n          children: vote.map((vote, id) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"voteItem\",\n            children: /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: vote.id,\n              className: \"inputVote\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"checkbox\",\n                id: vote.id,\n                value: vote.id,\n                onChange: inputClick,\n                checked: checkedItems[vote.id] || false\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 440,\n                columnNumber: 37\n              }, this), vote.nominations_name, ' ', /*#__PURE__*/_jsxDEV(\"img\", {\n                src: `../${vote.id}.png`,\n                alt: `Image for ${vote.nominations_name}`,\n                className: \"images\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 448,\n                columnNumber: 37\n              }, this)]\n            }, id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 439,\n              columnNumber: 33\n            }, this)\n          }, id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 438,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 436,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        disabled: isFetching,\n        onClick: secureButton,\n        children: \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 455,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 432,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 281,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ProfileInfo, \"ZL2PR0VfzEiagwvbsuUQPUXImEc=\", false, function () {\n  return [useParams];\n});\n\n_c = ProfileInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileInfo\");","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/ProfileInfo.jsx"],"names":["axios","useEffect","useRef","useState","Create","Delete","Modal","useParams","ProfileInfo","check","setCheck","checkedItems","setCheckedItems","votearray","setVotearray","userVote","setUserVote","depsName","setDepsName","user","setUser","isFetching","setIsFetching","modalActive","setModalActive","modalActivePass","setModalActivePass","modalActiveVote","setModalActiveVote","modalVote","setModalVote","vote","setVote","modalActiveResetPass","setModalActiveResetPass","modalActiveReset","setModalActiveReset","modalActiveDelete","setModalActiveDelete","deps","setDeps","error","setError","er","setErr","username","localUser","_id","email","JSON","parse","localStorage","getItem","localUse","modalName","modalDep","modalEmail","modalOldPass","modalNewPass","modalNewPassAgain","usersStatuses","findStatus","k","i","getDeps","res","get","console","log","data","getNameDeps","post","fetchUser","id","sort","a","b","user_name","localeCompare","mass","filter","element","fetchVote","handleClick","e","preventDefault","newInfo","departmentId","current","value","department_id","toUpperCase","isAdmin","isadmin","see_child","status","main_department","newInfo2","put","window","location","reload","setItem","stringify","handleClickPassword","passwords","userId","password","oldPassword","newPassword","handleResetPass","resetPassword","typework_id","healthEnd","commentEnd","workEnd","Date","now","alert","handleDelete","newPost","href","Array","isArray","name","toLowerCase","button","forEach","arr","split","voteUser","user_id","vote_for_user","nominations_id","clickVote","target","toString","votearr","push","newArray","secureButton","addNomination","id_nomination","inputClick","event","checked","prevState","fontSize","cursor","marginLeft","charAt","slice","width","map","dep","department_name","nominations_name","description"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport {useEffect, useRef, useState} from 'react'\nimport {Create, Delete} from '@material-ui/icons'\nimport Modal from '../Templates/Modal/Modal'\nimport './ProfileInfo.css'\nimport {useParams} from \"react-router-dom\";\n\n\nexport default function ProfileInfo() {\n    const [check, setCheck] = useState({});\n    const [checkedItems, setCheckedItems] = useState({});\n    const [votearray, setVotearray] = useState([])\n    const [userVote, setUserVote] = useState([])\n    const [depsName, setDepsName] = useState([])\n    const [user, setUser] = useState([])\n    const [isFetching, setIsFetching] = useState(false)\n    const [modalActive, setModalActive] = useState(false)\n    const [modalActivePass, setModalActivePass] = useState(false)\n    const [modalActiveVote, setModalActiveVote] = useState(false)\n    const [modalVote, setModalVote] = useState(false)\n    const [vote, setVote] = useState([])\n    const [modalActiveResetPass, setModalActiveResetPass] = useState(false)\n    const [modalActiveReset, setModalActiveReset] = useState(false)\n    const [modalActiveDelete, setModalActiveDelete] = useState(false)\n    const [deps, setDeps] = useState([])\n    const [error, setError] = useState('')\n    const [er, setErr] = useState('')\n    const username = useParams()\n    let localUser = !!username ? {_id: username.username, email: \"\"} : JSON.parse(localStorage.getItem('user'))\n    const localUse = JSON.parse(localStorage.getItem('user'))\n    const modalName = useRef()\n    const modalDep = useRef()\n    const modalEmail = useRef()\n    const modalOldPass = useRef()\n    const modalNewPass = useRef()\n    const modalNewPassAgain = useRef()\n\n    const usersStatuses = {\n        0: '',\n        1: 'start',\n        2: 'end',\n        3: 'sick_leave',\n        4: 'deleted',\n        5: 'vacation',\n        6: 'time_off',\n        7: 'other'\n    }\n\n    function findStatus(k) {\n        for (let i in usersStatuses) {\n            if (i == k) {\n                return usersStatuses[i]\n            }\n        }\n    }\n\n    // данные о пользователе\n\n\n    // Список всех департаментов и получение департаментов по юзеру\n    useEffect(() => {\n        const getDeps = async () => {\n\n            const res = await axios.get('/api/departments/')\n            console.log(res.data)\n            setDeps(res.data)\n        }\n\n        const getNameDeps = async () => {\n            const deps = {\n                user: username.username\n            }\n            const res = await axios.post('/api/departments/', deps)\n            setDepsName(res.data)\n        }\n\n        const fetchUser = async () => {\n            localUser._id = !!localUser._id ? localUser._id : localUser.id\n            localUser._id = !!username ? username.username : localUser._id\n            const res = await axios.get('/api/user/' + username.username)\n            setUser(res.data)\n            setIsFetching(false)\n\n            const user = await axios.get('/api/user/')\n            const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\n            const mass = sort.filter(element => element.id !== username.username)\n            setUserVote(mass)\n        }\n\n        // Номинации\n        const fetchVote = async () => {\n            const res = await axios.get('/api/vote/')\n            setVote(res.data)\n        }\n        fetchVote()\n        fetchUser()\n        getDeps()\n        getNameDeps()\n    }, [])\n\n\n\n    // изменение данных пользователя\n    const handleClick = async (e) => {\n        e.preventDefault()\n\n\n        const newInfo = {\n            departmentId: modalDep.current.value || user.department_id,\n            email: modalEmail.current.value.toUpperCase() || user.email,\n            username: modalName.current.value || user.user_name,\n            _id: user.id,\n            isAdmin: user.isadmin,\n            see_child: user.see_child,\n            status: user.status,\n            main_department: user.main_department\n        }\n        if (localUse._id !== username.username) {\n            const newInfo2 = {\n                departmentId: modalDep.current.value || user.department_id,\n                email: modalEmail.current.value.toUpperCase() || user.email,\n                username: modalName.current.value || user.user_name,\n                _id: user.id,\n            }\n            await axios.put('/api/user/', newInfo2)\n            window.location.reload()\n        } else {\n            await axios.put('/api/user/', newInfo)\n            localStorage.setItem('user', JSON.stringify({...newInfo}))\n            setModalActive(false)\n            window.location.reload()\n        }\n    }\n\n    // изменить пароль\n    const handleClickPassword = async (e) => {\n        e.preventDefault()\n        if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n            setErr('Новые пароли не совпадают')\n            return\n        }\n        const passwords = {\n            userId: localUse._id,\n            password: localUse.password,\n            oldPassword: modalOldPass.current.value,\n            newPassword: modalNewPass.current.value\n        }\n        try {\n            await axios.put('/api/newPassword/', passwords)\n            setModalActivePass(false)\n            /*      localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/\n        } catch (er) {\n            setErr('Старые пароли не совпадают')\n        }\n    }\n\n    // сбросить пароль\n    const handleResetPass = async (e) => {\n        e.preventDefault()\n\n        const resetPassword = {\n            userId: username.username,\n            newPassword: 'qwerty123'\n        }\n\n        try {\n            await axios.put('/api/resetPassword/', resetPassword)\n            setModalActiveResetPass(false)\n        } catch (error) {\n        }\n    }\n\n    const status = async () => {\n        if (user.status === 1) {\n            const status = {\n                status: 2,\n                typework_id: 1,\n                userId: user.id,\n                healthEnd: '-',\n                commentEnd: '-',\n                workEnd: new Date(Date.now())\n            }\n            await axios.put(\"/api/post/\", status)\n        } else {\n            alert(\"Пользователь не в работе\")\n        }\n    }\n\n\n    // удалить пользователя\n    const handleDelete = async (e) => {\n        e.preventDefault()\n        setIsFetching(true)\n\n        const newPost = {\n            userId: username.username,\n            healthEnd: 1,\n            status: 4\n            /*      workEnd: new Date(Date.now()),\n                  workTime: new Date(Date.now()) - new Date(posts[0].workStart)*/\n        }\n        /* localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/\n        try {\n            await axios.put('/api/deluser/', newPost)\n            /*      if(user.status === 1){\n                    await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n                  }*/\n            /*      localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/\n            setModalActiveDelete(false)\n            window.location.href = `/profile/${user.id}`\n        } catch (error) {\n            console.log(error);\n        }\n    }\n    localUser = (!!user && !Array.isArray(user)) ? user : localUser\n    localUser.username = !!localUser.user_name ? localUser.user_name : localUser.username\n    const name = localUser.email.toLowerCase()\n\n\n    const button = () => {\n        votearray.forEach(async (vote) => {\n                const arr = vote.split(\"_\")\n\n                const voteUser = {\n                    user_id: localUse._id,\n                    vote_for_user: arr[1],\n                    nominations_id: arr[0]\n                }\n                await axios.post('/api/vote/', voteUser)\n            }\n        )\n        setModalActiveVote(false)\n    }\n\n    const clickVote = (e) => {\n        e.preventDefault()\n        const data = e.target.value.toString()\n        const arr = data.split(\"_\")\n        let votearr = votearray\n        votearr.push(data)\n        const newArray = votearr.filter(element => element !== \"\")\n        console.log('newArray=', newArray)\n        setVotearray(newArray)\n    }\n\n    const secureButton = async () => {\n        const res = await axios.get('/api/user/' + username.username)\n        console.log('res=', res.data.id)\n        const addNomination = {\n            userId: username.username,\n            id_nomination: check\n        }\n        await axios.post('/api/vote/', addNomination)\n        setModalVote(false)\n    }\n\n    const inputClick = (event) => {\n        const {id, checked} = event.target;\n        if (checked) {\n            setCheckedItems(checked);\n        } else {\n            setCheckedItems(null);\n        }\n\n        console.log('id=', event.target.value)\n        setCheck(event.target.value)\n        setCheckedItems(prevState => ({\n            ...prevState,\n            [id]: checked\n        }));\n    }\n\n    console.log('local=', localUse._id)\n    console.log('local=', username.username)\n    return (\n\n        <div className='profileInfo'>\n            {isFetching\n                ? <div className='isFatching'>Загрузка...</div>\n                : <div className={'employeePI ' + (findStatus(user.status))}>\n                    <div className='top'>\n            <span className='name'>\n              {user.user_name}\n                {localUser ? <Create style={{fontSize: 'medium', cursor: 'pointer', marginLeft: '10px'}}\n                                     onClick={() => setModalActive(true)}/> : ''}\n                {localUse.isAdmin ? <Delete style={{cursor: 'pointer', fontSize: 'medium'}}\n                                            onClick={() => setModalActiveDelete(true)}/> : <></>}\n            </span>\n                    </div>\n                    <div style={{fontSize: '18px'}}\n                         className='email'>{name.charAt(0).toUpperCase() + name.slice(1)}</div>\n                    <div>{depsName}</div>\n                    <hr className=\"hr\"/>\n                    {<div className='changePass' onClick={() => setModalActivePass(true)}>Изменить пароль</div>}\n\n                    <div className='changePass' style={{width: \"20px\"}}></div>\n\n                    {localUse.isAdmin ?\n                        <div className='changePass' onClick={() => setModalActiveResetPass(true)}>Сбросить\n                            пароль</div> : ''}\n\n                    {localUse.isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> : ''}\n\n                    {localUse.isAdmin ?\n                        <div className='changePass' onClick={() => setModalActiveReset(true)}>Закончить</div> : ''}\n\n                    {localUse.isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> : ''}\n\n                    {localUse._id !== username.username ?\n                        <div className='changePass' onClick={() => setModalVote(true)}>Закрепить номинацию</div>\n                        : <div className='changePass' onClick={() => setModalActiveVote(true)}>Проголосовать</div>\n                    }\n\n                </div>\n            }\n            <Modal active={modalActive} setActive={setModalActive}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                {error && <div className='modalError'>{error}</div>}\n                <form className=\"modalLoginBox\" onSubmit={handleClick}>\n                    <input\n                        placeholder=\"Name\"\n                        className=\"ModalInput\"\n                        ref={modalName}\n                    />\n                    <select ref={modalDep}>\n                        <option value=''>Выберите подразделение</option>\n                        {deps.map((dep, id) =>\n                            <option key={id} value={dep.id}>{dep.department_name}</option>)}\n                    </select>\n                    <input\n                        placeholder=\"Email\"\n                        type='emailLogin'\n                        className=\"ModalInput\"\n                        ref={modalEmail}\n                        minLength='6'\n                    />\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Изменить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActivePass} setActive={setModalActivePass}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                {er && <div className='modalError'>{er}</div>}\n                <form className=\"modalLoginBox\" onSubmit={handleClickPassword}>\n                    <input\n                        placeholder=\"Old Password\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalOldPass}\n                    />\n                    <input\n                        placeholder=\"New Password\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalNewPass}\n                        minLength='6'\n                    />\n                    <input\n                        placeholder=\"New Password Again\"\n                        type='password'\n                        className=\"ModalInput\"\n                        ref={modalNewPassAgain}\n                        minLength='6'\n                    />\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Изменить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveResetPass} setActive={setModalActiveResetPass}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={handleResetPass}>\n                    <h2>Новый пароль будет: qwerty123</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Сбросить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveReset} setActive={setModalActiveReset}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={status}>\n                    <h2>Закончить время</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Закончить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveDelete} setActive={setModalActiveDelete}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                <form className=\"modalLoginBox\" onSubmit={handleDelete}>\n                    <h2>Пользователь будет удален</h2>\n                    <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n                        Удалить\n                    </button>\n                </form>\n            </Modal>\n            <Modal active={modalActiveVote} setActive={setModalActiveVote}>\n\n                <h1>Номинации</h1>\n                {er && <div className='modalError'>{er}</div>}\n                <hr/>\n                <div className='div'>\n                    <div> {vote.map((vote, id) => <label key={id} htmlFor={vote.id}><h3\n                        className='inputVote'>{vote.nominations_name}</h3>\n                        {vote.description}\n                    </label>)}\n                    </div>\n                    <div className='di'>\n                        {vote.map((vote, id) =>\n                            <select onChange={clickVote} key={id} value={userVote.id} className='select'>\n                                <option value=''>Выберите участника</option>\n\n                                {userVote.map((userVote, id) => <option key={id}\n                                                                        value={vote.id + '_' + userVote.id}>{userVote.user_name}</option>)}\n                            </select>\n                        )}</div>\n                </div>\n                {localUse.isAdmin ? <button className=\"button\" type=\"submit\" disabled={isFetching}\n                                            onClick={() => setModalVote(true)}>Закрепить номинацию</button> : ''}\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={button}> Проголосовать</button>\n            </Modal>\n            <Modal active={modalVote} setActive={setModalVote}>\n                <h1>Закрепить номинацию</h1>\n                <hr/>\n                <div>\n                    <div className='voteContainer'>\n                        {vote.map((vote, id) => (\n                            <div key={id} className=\"voteItem\">\n                                <label key={id} htmlFor={vote.id} className=\"inputVote\">\n                                    <input\n                                        type='checkbox'\n                                        id={vote.id}\n                                        value={vote.id}\n                                        onChange={inputClick}\n                                        checked={checkedItems[vote.id] || false}\n                                    />\n                                    {vote.nominations_name}{' '}\n                                    <img src={`../${vote.id}.png`} alt={`Image for ${vote.nominations_name}`}\n                                         className='images'/>\n                                </label>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={secureButton}>Закрепить</button>\n            </Modal>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}