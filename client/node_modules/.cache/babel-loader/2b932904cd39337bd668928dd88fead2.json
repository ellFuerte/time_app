{"ast":null,"code":"import _regeneratorRuntime from\"D:/Download/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{Link}from'react-router-dom';import{Delete}from'@material-ui/icons';import axios from'axios';import'./Employee.css';import{useEffect,useState}from'react';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Employee(_ref){var user=_ref.user;var localUser=JSON.parse(localStorage.getItem('user'));var usersStatuses={0:'',1:'start',2:'end',3:'vacation',4:'deleted'};function findStatus(k){for(var i in usersStatuses){if(i==k){return usersStatuses[i];}}}var _useState=useState(null),_useState2=_slicedToArray(_useState,2),date=_useState2[0],setDate=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),time=_useState4[0],setTime=_useState4[1];// Проверка, если пользователь закончил работу, то вывод даты, когда он закончил\nuseEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,data,dataF,dataS;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/user/'+localUser._id);case 2:res=_context.sent;res.data.sort(function(p1,p2){return new Date(p2.workStart)-new Date(p1.workStart);});data=res.data[0].workEnd;data=new Date(data);data=data.toLocaleString();data=data.split(',');dataF=data[0].split('.');dataS=data[1].split(':');dataF=dataF[0]+'/'+dataF[1];dataS=dataS[0]+':'+dataS[1];setDate(dataF);setTime(dataS);case 14:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref2.apply(this,arguments);};}();if(user.status===2){fetchUser();}},[user._id]);var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),dateStart=_useState6[0],setDateStart=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),dateEnd=_useState8[0],setDateEnd=_useState8[1];// Проверка, если пользователь в отпуске или на больничном, то вывод даты начала и конца\nuseEffect(function(){var fetchUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var res,dataStart,dataEnd;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return axios.get('/api/user'+localUser._id);case 2:res=_context2.sent;res.data.sort(function(p1,p2){return new Date(p2.start)-new Date(p1.start);});dataStart=res.data[0].start;dataEnd=res.data[0].end;dataStart=new Date(dataStart);dataStart=dataStart.toLocaleString();dataStart=dataStart.split(',');dataEnd=new Date(dataEnd);dataEnd=dataEnd.toLocaleString();dataEnd=dataEnd.split(',');setDateStart(dataStart[0]);setDateEnd(dataEnd[0]);case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function fetchUser(){return _ref3.apply(this,arguments);};}();if(user.status===3){fetchUser();}},[user._id]);return/*#__PURE__*/_jsx(_Fragment,{children:user.status===4&&!localUser.isAdmin?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsxs(\"div\",{className:'employee '+findStatus(user.status),children:[/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:localUser.isAdmin?/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(user.id),className:\"name\",children:/*#__PURE__*/_jsx(\"span\",{children:user.user_name})}):/*#__PURE__*/_jsx(\"div\",{className:\"name\",children:/*#__PURE__*/_jsx(\"span\",{children:user.user_name})})}),/*#__PURE__*/_jsx(\"div\",{className:\"down\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"downRight\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"emailEmployee\",children:user.email.toLowerCase()}),user.status===2&&/*#__PURE__*/_jsxs(\"div\",{children:[date,\" \",time]}),user.status===3&&/*#__PURE__*/_jsxs(\"div\",{children:[dateStart,\" - \",dateEnd]})]})})]})});}","map":{"version":3,"sources":["D:/Download/time_app/client/src/components/Employee/Employee.jsx"],"names":["Link","Delete","axios","useEffect","useState","Employee","user","localUser","JSON","parse","localStorage","getItem","usersStatuses","findStatus","k","i","date","setDate","time","setTime","fetchUser","get","_id","res","data","sort","p1","p2","Date","workStart","workEnd","toLocaleString","split","dataF","dataS","status","dateStart","setDateStart","dateEnd","setDateEnd","start","dataStart","dataEnd","end","isAdmin","id","user_name","email","toLowerCase"],"mappings":"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","sourcesContent":["import { Link } from 'react-router-dom'\r\nimport { Delete } from '@material-ui/icons'\r\nimport axios from 'axios'\r\n\r\nimport './Employee.css'\r\nimport { useEffect, useState } from 'react'\r\n\r\nexport default function Employee({user}) {\r\n  const localUser = JSON.parse(localStorage.getItem('user'))\r\n\r\n  const usersStatuses = {0: '', 1: 'start', 2: 'end', 3: 'vacation', 4: 'deleted'}\r\n  \r\n  function findStatus(k){\r\n    for(let i in usersStatuses){\r\n      if(i == k){\r\n        return usersStatuses[i]\r\n      }\r\n    }\r\n  }\r\n\r\n  const [date, setDate] = useState(null)\r\n  const [time, setTime] = useState(null)\r\n\r\n  // Проверка, если пользователь закончил работу, то вывод даты, когда он закончил\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get('/api/user/'+localUser._id)\r\n      res.data.sort((p1, p2) => {\r\n        return new Date(p2.workStart) - new Date(p1.workStart)\r\n      })\r\n      let data = (res.data[0].workEnd)\r\n      data = new Date(data)\r\n      data = data.toLocaleString()\r\n      data = data.split(',')\r\n      let dataF = data[0].split('.')\r\n      let dataS = data[1].split(':')\r\n      dataF = dataF[0]+'/'+dataF[1]\r\n      dataS = dataS[0]+':'+dataS[1]\r\n      setDate(dataF)\r\n      setTime(dataS)\r\n    }\r\n    if(user.status === 2){\r\n      fetchUser()\r\n    }\r\n  }, [user._id])\r\n\r\n  const [dateStart, setDateStart] = useState(null)\r\n  const [dateEnd, setDateEnd] = useState(null)\r\n\r\n  // Проверка, если пользователь в отпуске или на больничном, то вывод даты начала и конца\r\n  useEffect(() => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get('/api/user'+localUser._id)\r\n      res.data.sort((p1, p2) => {\r\n        return new Date(p2.start) - new Date(p1.start)\r\n      })\r\n      let dataStart = (res.data[0].start)\r\n      let dataEnd = (res.data[0].end)\r\n      dataStart = new Date(dataStart)\r\n      dataStart = dataStart.toLocaleString()\r\n      dataStart = dataStart.split(',')\r\n      dataEnd = new Date(dataEnd)\r\n      dataEnd = dataEnd.toLocaleString()\r\n      dataEnd = dataEnd.split(',')\r\n      setDateStart(dataStart[0])\r\n      setDateEnd(dataEnd[0])\r\n    }\r\n    if(user.status === 3){\r\n      fetchUser()\r\n    }\r\n  }, [user._id])\r\n\r\n  return (<>\r\n    {user.status === 4 && !localUser.isAdmin\r\n      ? <div></div> \r\n      : <div className={'employee ' + (findStatus(user.status))}>\r\n          <div className='top'>\r\n            {localUser.isAdmin\r\n              ? <Link to={`/profile/${user.id}`} className='name'><span>{user.user_name}</span></Link>\r\n              : <div className='name'><span>{user.user_name}</span></div>\r\n            }\r\n          </div>\r\n          <div className='down'>\r\n              <div className='downRight'>\r\n                <div className='emailEmployee'>{user.email.toLowerCase()}</div>\r\n                {user.status === 2 && <div>{date} {time}</div>}\r\n                {user.status === 3 && <div>{dateStart} - {dateEnd}</div>}\r\n                </div>\r\n          </div>\r\n        </div>\r\n    }</>\r\n  )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}