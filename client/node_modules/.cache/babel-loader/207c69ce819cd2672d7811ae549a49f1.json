{"ast":null,"code":"/*import React from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { CircularProgress } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from 'react'\r\n\r\nimport SidebarDeps from '../SidebarDeps/SidebarDeps'\r\nimport './Sidebar.css'\r\nimport TreeView from 'react-treeview';\r\nimport 'react-treeview/react-treeview.css'\r\n\r\nexport default function Sidebar() {\r\n  const [deps, setDeps] = useState([])\r\n  const [users, setUsers] = useState([])\r\n  const [isFetching, setIsFetching] = useState(false)\r\n  const [filterDeps, setFilterDeps] = useState([])\r\n  const currentUrl = useParams().username\r\n  const localUser = JSON.parse(localStorage.getItem('user'))\r\n\r\n  const dataSource = [\r\n\r\n    {\r\n      type: 'Управление соппровождения и эксплуатации систем подержки бизнеса',id:0,\r\n      collapsed: false,\r\n      child: [\r\n\r\n          {name: 'Служба поддержски продуктовых систем розничного бизнеса',collapsed: false,id:1,\r\n              child: [\r\n          {name: 'Отдел администрирования бэк-офисных систем розничного бизнеса',collapsed: false,id:2},\r\n          {name: 'Отдел круглосуточной поддержски процессов закрытия операционного дня отчетности розничного бизнеса', collapsed: false,id:3},\r\n          {name: 'Отдел сопровождения активных операций ФЛ', collapsed: false,id:4},\r\n          {name: 'Отдел сопровождения пассивных операций ФЛ', collapsed: false,id:5}]},\r\n\r\n        {name: 'Служба поддержски централизованных и технологических процессов', collapsed: false,id:6,\r\n            child: [\r\n                {name: 'Отдел поддержски обмена с ФОИВ', collapsed: false,id:7},\r\n                {name: 'Отдел поддержски систем электронного хранения', collapsed: false,id:8},\r\n                {name: 'Отдел поддержски технологиеских процессов',id:9,\r\n                    child: [\r\n                        {name:'Группа поддержки зарплатных проектов',id:10,collapsed: false},\r\n                        {name:'Группа поддержки логичесих карт и технологических сервисов',id:11, collapsed: false}\r\n                    ]},\r\n                {name: 'Отдел поддержски технологиеских процессов',id:12}\r\n            ],\r\n        },\r\n\r\n        {name: 'Служба сопровождения муниципальных и специальных сервисов', collapsed: false,id:13,\r\n            child: [\r\n                {name: 'Отдел сопровождения муниципальных проектов', collapsed: false,id:14},\r\n                {name: 'Отдел сопровождения специальных сервисов', collapsed: false,id:15}\r\n            ],\r\n        },\r\n\r\n        {name: 'Служба сопровождения операционной и расчетной деятельности', collapsed: false,id:16,\r\n            child: [{name: 'Отдел поддержки пользователей прочих АБС', collapsed: false,id:17},\r\n                {name: 'Отдел систем доставки электронных документов',id:18,\r\n                    child: [\r\n                        {name:'Группа поддежрски SWIFT/КФТ/TELEX',id:19}]},\r\n                {name: 'Отдел сопровождения АБС ЮЛ, систем расчетов и задач Казначейства',id:20,\r\n                    child: [\r\n                        {name:'Группа интеграции с внешними системами',id:21,collapsed: false},\r\n                        {name:'Группа поддержки пользователей восточной зоны РФ',id:22,collapsed: false},\r\n                        {name:'Группа поддержки пользователей европейской зоны РФ',id:23,collapsed: false},\r\n                        {name:'Группа сопровождения систем расчетов',id:24}]},\r\n                {name: 'Отдел сопровождения операционного дня', collapsed: false,id:25},\r\n                {name: 'Отдел специального технологического сопровождения АБС', collapsed: false,id:26},\r\n                {name: 'Отдел управления изменениями', collapsed: false,id:27}\r\n\r\n            ]\r\n        }\r\n      ],\r\n    },\r\n  ]\r\n\r\n\r\n\r\n/!*    {\r\n        type: 'Служба поддержски продуктовых систем розничного бизнеса',id:1,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел администрирования бэк-офисных систем розничного бизнеса',collapsed: false,id:2},\r\n        {name: 'Отдел круглосуточной поддержски процессов закрытия операционного дня отчетности розничного бизнеса', collapsed: false,id:3},\r\n        {name: 'Отдел сопровождения активных операций ФЛ', collapsed: false,id:4},\r\n        {name: 'Отдел сопровождения пассивных операций ФЛ', collapsed: false,id:5}\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба поддержски централизованных и технологических процессов',id:6,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел поддержски обмена с ФОИВ', collapsed: false,id:7},\r\n        {name: 'Отдел поддержски систем электронного хранения', collapsed: false,id:8},\r\n        {name: 'Отдел поддержски технологиеских процессов',id:9,\r\n            child: [\r\n                {name:'Группа поддержки зарплатных проектов',id:10,collapsed: false},\r\n                {name:'Группа поддержки логичесих карт и технологических сервисов',id:11, collapsed: false}]}\r\n\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба сопровождения муниципальных и специальных сервисов',id:12,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел сопровождения муниципальных проектов', collapsed: false,id:13},\r\n        {name: 'Отдел сопровождения специальных сервисов', collapsed: false,id:14}\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба сопровождения операционной и расчетной деятельности',id:15,\r\n        collapsed: false,\r\n        child: [{name: 'Отдел поддержки пользователей прочих АБС', collapsed: false,id:16},\r\n        {name: 'Отдел систем доставки электронных документов',id:17,\r\n            child: [\r\n                {name:'Группа поддежрски SWIFT/КФТ/TELEX',id:18}]},\r\n        {name: 'Отдел сопровождения АБС ЮЛ, систем расчетов и задач Казначейства',id:20,\r\n            child: [\r\n                {name:'Группа интеграции с внешними системами',id:21,collapsed: false},\r\n                {name:'Группа поддержки пользователей восточной зоны РФ',id:22,collapsed: false},\r\n                {name:'Группа поддержки пользователей европейской зоны РФ',id:23,collapsed: false},\r\n                {name:'Группа сопровождения систем расчетов',id:24}]},\r\n        {name: 'Отдел сопровождения операционного дня', collapsed: false,id:25},\r\n        {name: 'Отдел специального технологического сопровождения АБС', collapsed: false,id:26},\r\n        {name: 'Отдел управления изменениями', collapsed: false,id:27}\r\n\r\n    ]\r\n    }\r\n]*!/\r\n\r\n\r\n  // загрузка всех департаментов\r\n  useEffect(() => {\r\n    // сортировка на дочерние и тд\r\n    const getDeps = async () => {\r\n        setIsFetching(true)\r\n        const res = await axios.get('/api/departments/')\r\n      let id = res.data.map(newarray => newarray.department_name)\r\n      console.log(\"departaments=\",res.data)\r\n\r\n        for(let i = 0; i < res.data.length-1; i++){\r\n          for(let j = i+1; j < res.data.length; j++){\r\n            if(res.data.find(k => k === res.data[j].id && k !== res.data[i].id)){\r\n              if(res.data[j].margin ){\r\n                res.data[j].margin += 40\r\n              } else {\r\n                res.data[j].margin = 40\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n      let newArr = res.data.filter(d => d.id !== 7)\r\n      newArr.push(res.data[6])\r\n      global.xz=res.data[0].department_name\r\n      console.log(\"NEWARRAY=\",global.xz)\r\n      setFilterDeps(newArr.filter(a => a.dep_id === 1))\r\n      setDeps(newArr)\r\n      if(currentUrl && currentUrl !== localUser._id){\r\n        const arr1 = [1, 2, 3, 4, 5, 6, 7, '61efa2f6cf0ce39b27ba2a53', '61efa304cf0ce39b27ba2a54', '61efa31dcf0ce39b27ba2a55', '61efa32bcf0ce39b27ba2a56', '61efa33acf0ce39b27ba2a57', '61efa344cf0ce39b27ba2a58', '61efa34fcf0ce39b27ba2a59']\r\n        const arr2 = [6, 8, 9, 10, 11, '61efa344cf0ce39b27ba2a58', '61efa35dcf0ce39b27ba2a5a', '61efa361cf0ce39b27ba2a5b', '61efa36acf0ce39b27ba2a5c', '61efa374cf0ce39b27ba2a5d']\r\n\r\n        if(arr1.find(i => i === currentUrl)){\r\n          setFilterDeps(newArr.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n        }\r\n        if(arr2.find(i => i === currentUrl)){\r\n          setFilterDeps(newArr)\r\n        }else{\r\n          setFilterDeps(newArr.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n        }\r\n      }\r\n      setIsFetching(false)\r\n    }\r\n\r\n    // загрузка пользователей и сортировка по департаментам\r\n    const fetchUser = async () => {\r\n      setIsFetching(true)\r\n      const res = await axios.get('/api/user/')\r\n      const id=res.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\r\n      setUsers(res.data)\r\n      setIsFetching(false)\r\n      console.log(\"ID=\",id)\r\n    }\r\n\r\n    fetchUser()\r\n    getDeps()\r\n  }, [])\r\n\r\n  const isShowDeps = (e) => {\r\n    const arr1 = [1, 2, 3, 4, 5, 6, 7, '61efa2f6cf0ce39b27ba2a53', '61efa304cf0ce39b27ba2a54', '61efa31dcf0ce39b27ba2a55', '61efa32bcf0ce39b27ba2a56', '61efa33acf0ce39b27ba2a57', '61efa344cf0ce39b27ba2a58', '61efa34fcf0ce39b27ba2a59']\r\n    const arr2 = [6, 8, 9, 10, 11, '61efa344cf0ce39b27ba2a58', '61efa35dcf0ce39b27ba2a5a', '61efa361cf0ce39b27ba2a5b', '61efa36acf0ce39b27ba2a5c', '61efa374cf0ce39b27ba2a5d']\r\n\r\n    if(e.target.value === 1){\r\n      setFilterDeps(deps.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n    }\r\n    if(arr2.find(i => i === e.target.value)){\r\n      setFilterDeps(deps)\r\n    }else{\r\n      setFilterDeps(deps.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n    }\r\n  }\r\n  const click= async ()=>{\r\n    const res = await axios.get('/api/departments/')\r\n    let id = res.data.map(newarray => newarray.parent_department)\r\n      console.log(id)\r\n\r\n  }\r\n\r\n  return (\r\n    <div className='sidebar'>\r\n      <div className=\"sidebarWrapper\">\r\n        <div className=\"tree\">\r\n          <div className=\"treeWrapper\">\r\n{/!*\r\n            {isFetching ? <CircularProgress style={{color:'#1877f2', margin:'30%'}}/> : filterDeps.map((dep, id) => <SidebarDeps dep={dep} key={id} users={users} setIsShowDeps={isShowDeps}/>)}\r\n            {deps.map((dep, id) => {\r\n\r\n              const type = dep.type\r\n              const label = <span className=\"node\">{dep.department_name}</span>\r\n              return (\r\n                  <TreeView key={type + '|' + id} nodeLabel={label} defaultCollapsed={true}>\r\n\r\n                  <TreeView defaultCollapsed={true}>\r\n\r\n                  <div className=\"info\">{dep.parent_department}</div>\r\n                </TreeView>\r\n              </TreeView>\r\n              )})}*!/}\r\n\r\n              {dataSource.map((node, i) => {\r\n\r\n                  const label = <Link to={`/department/${node.id}`} className='depsUser' style={{fontWeight: `bold`}}><span className=\"node\">{node.type}</span></Link>\r\n\r\n                  return (\r\n\r\n                      <TreeView key={node.type + '|' + i} nodeLabel={label} defaultCollapsed={true}>\r\n\r\n                          {node.child.map(departments => {\r\n\r\n                              const label2 = <Link to={`/department/${departments.id}`} className='depsUser'><span className=\"node\">{departments.name}</span></Link>\r\n\r\n                              return (\r\n\r\n                                  <TreeView nodeLabel={label2} key={departments.child} defaultCollapsed={true}>\r\n\r\n                                      {!!departments.child ? departments.child.map(departments1  => {\r\n\r\n                                          const label3 = <Link to={`/department/${departments1.id}`} className='depsUser'><span className=\"node\">{departments1.name}</span></Link>\r\n\r\n                                          return(\r\n\r\n                                              <TreeView nodeLabel={label3} defaultCollapsed={true}>\r\n\r\n                                                  {!!departments1.child ? departments1.child.map(departments2  => {\r\n\r\n                                            return(\r\n\r\n                                                <Link to={`/department/${departments2.id}`} className='depsUser'>\r\n\r\n                                                    <div className=\"info\" style={{paddingBottom:'8px'}}>{departments2.name}</div>\r\n\r\n                                                </Link>\r\n                                            )\r\n\r\n                                      }):''}\r\n                                  </TreeView>\r\n                              );\r\n                          }):''}\r\n                      </TreeView>\r\n                  );\r\n              })}\r\n                      </TreeView>\r\n                  );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n        {/!* <SidebarDeps users={users} dep={deps}/>*!/}\r\n        <div>\r\n\r\n        </div>\r\n    </div>\r\n  )\r\n}*/","map":{"version":3,"sources":["D:/Download/time_app/client/src/components/Sidebar/Sidebar.jsx"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/*import React from 'react'\r\nimport { Link, useParams } from 'react-router-dom'\r\nimport { CircularProgress } from '@material-ui/core'\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from 'react'\r\n\r\nimport SidebarDeps from '../SidebarDeps/SidebarDeps'\r\nimport './Sidebar.css'\r\nimport TreeView from 'react-treeview';\r\nimport 'react-treeview/react-treeview.css'\r\n\r\nexport default function Sidebar() {\r\n  const [deps, setDeps] = useState([])\r\n  const [users, setUsers] = useState([])\r\n  const [isFetching, setIsFetching] = useState(false)\r\n  const [filterDeps, setFilterDeps] = useState([])\r\n  const currentUrl = useParams().username\r\n  const localUser = JSON.parse(localStorage.getItem('user'))\r\n\r\n  const dataSource = [\r\n\r\n    {\r\n      type: 'Управление соппровождения и эксплуатации систем подержки бизнеса',id:0,\r\n      collapsed: false,\r\n      child: [\r\n\r\n          {name: 'Служба поддержски продуктовых систем розничного бизнеса',collapsed: false,id:1,\r\n              child: [\r\n          {name: 'Отдел администрирования бэк-офисных систем розничного бизнеса',collapsed: false,id:2},\r\n          {name: 'Отдел круглосуточной поддержски процессов закрытия операционного дня отчетности розничного бизнеса', collapsed: false,id:3},\r\n          {name: 'Отдел сопровождения активных операций ФЛ', collapsed: false,id:4},\r\n          {name: 'Отдел сопровождения пассивных операций ФЛ', collapsed: false,id:5}]},\r\n\r\n        {name: 'Служба поддержски централизованных и технологических процессов', collapsed: false,id:6,\r\n            child: [\r\n                {name: 'Отдел поддержски обмена с ФОИВ', collapsed: false,id:7},\r\n                {name: 'Отдел поддержски систем электронного хранения', collapsed: false,id:8},\r\n                {name: 'Отдел поддержски технологиеских процессов',id:9,\r\n                    child: [\r\n                        {name:'Группа поддержки зарплатных проектов',id:10,collapsed: false},\r\n                        {name:'Группа поддержки логичесих карт и технологических сервисов',id:11, collapsed: false}\r\n                    ]},\r\n                {name: 'Отдел поддержски технологиеских процессов',id:12}\r\n            ],\r\n        },\r\n\r\n        {name: 'Служба сопровождения муниципальных и специальных сервисов', collapsed: false,id:13,\r\n            child: [\r\n                {name: 'Отдел сопровождения муниципальных проектов', collapsed: false,id:14},\r\n                {name: 'Отдел сопровождения специальных сервисов', collapsed: false,id:15}\r\n            ],\r\n        },\r\n\r\n        {name: 'Служба сопровождения операционной и расчетной деятельности', collapsed: false,id:16,\r\n            child: [{name: 'Отдел поддержки пользователей прочих АБС', collapsed: false,id:17},\r\n                {name: 'Отдел систем доставки электронных документов',id:18,\r\n                    child: [\r\n                        {name:'Группа поддежрски SWIFT/КФТ/TELEX',id:19}]},\r\n                {name: 'Отдел сопровождения АБС ЮЛ, систем расчетов и задач Казначейства',id:20,\r\n                    child: [\r\n                        {name:'Группа интеграции с внешними системами',id:21,collapsed: false},\r\n                        {name:'Группа поддержки пользователей восточной зоны РФ',id:22,collapsed: false},\r\n                        {name:'Группа поддержки пользователей европейской зоны РФ',id:23,collapsed: false},\r\n                        {name:'Группа сопровождения систем расчетов',id:24}]},\r\n                {name: 'Отдел сопровождения операционного дня', collapsed: false,id:25},\r\n                {name: 'Отдел специального технологического сопровождения АБС', collapsed: false,id:26},\r\n                {name: 'Отдел управления изменениями', collapsed: false,id:27}\r\n\r\n            ]\r\n        }\r\n      ],\r\n    },\r\n  ]\r\n\r\n\r\n\r\n/!*    {\r\n        type: 'Служба поддержски продуктовых систем розничного бизнеса',id:1,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел администрирования бэк-офисных систем розничного бизнеса',collapsed: false,id:2},\r\n        {name: 'Отдел круглосуточной поддержски процессов закрытия операционного дня отчетности розничного бизнеса', collapsed: false,id:3},\r\n        {name: 'Отдел сопровождения активных операций ФЛ', collapsed: false,id:4},\r\n        {name: 'Отдел сопровождения пассивных операций ФЛ', collapsed: false,id:5}\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба поддержски централизованных и технологических процессов',id:6,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел поддержски обмена с ФОИВ', collapsed: false,id:7},\r\n        {name: 'Отдел поддержски систем электронного хранения', collapsed: false,id:8},\r\n        {name: 'Отдел поддержски технологиеских процессов',id:9,\r\n            child: [\r\n                {name:'Группа поддержки зарплатных проектов',id:10,collapsed: false},\r\n                {name:'Группа поддержки логичесих карт и технологических сервисов',id:11, collapsed: false}]}\r\n\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба сопровождения муниципальных и специальных сервисов',id:12,\r\n        collapsed: false,\r\n        child: [\r\n        {name: 'Отдел сопровождения муниципальных проектов', collapsed: false,id:13},\r\n        {name: 'Отдел сопровождения специальных сервисов', collapsed: false,id:14}\r\n    ],\r\n    },\r\n    {\r\n        type: 'Служба сопровождения операционной и расчетной деятельности',id:15,\r\n        collapsed: false,\r\n        child: [{name: 'Отдел поддержки пользователей прочих АБС', collapsed: false,id:16},\r\n        {name: 'Отдел систем доставки электронных документов',id:17,\r\n            child: [\r\n                {name:'Группа поддежрски SWIFT/КФТ/TELEX',id:18}]},\r\n        {name: 'Отдел сопровождения АБС ЮЛ, систем расчетов и задач Казначейства',id:20,\r\n            child: [\r\n                {name:'Группа интеграции с внешними системами',id:21,collapsed: false},\r\n                {name:'Группа поддержки пользователей восточной зоны РФ',id:22,collapsed: false},\r\n                {name:'Группа поддержки пользователей европейской зоны РФ',id:23,collapsed: false},\r\n                {name:'Группа сопровождения систем расчетов',id:24}]},\r\n        {name: 'Отдел сопровождения операционного дня', collapsed: false,id:25},\r\n        {name: 'Отдел специального технологического сопровождения АБС', collapsed: false,id:26},\r\n        {name: 'Отдел управления изменениями', collapsed: false,id:27}\r\n\r\n    ]\r\n    }\r\n]*!/\r\n\r\n\r\n  // загрузка всех департаментов\r\n  useEffect(() => {\r\n    // сортировка на дочерние и тд\r\n    const getDeps = async () => {\r\n        setIsFetching(true)\r\n        const res = await axios.get('/api/departments/')\r\n      let id = res.data.map(newarray => newarray.department_name)\r\n      console.log(\"departaments=\",res.data)\r\n\r\n        for(let i = 0; i < res.data.length-1; i++){\r\n          for(let j = i+1; j < res.data.length; j++){\r\n            if(res.data.find(k => k === res.data[j].id && k !== res.data[i].id)){\r\n              if(res.data[j].margin ){\r\n                res.data[j].margin += 40\r\n              } else {\r\n                res.data[j].margin = 40\r\n              }\r\n            }\r\n          }\r\n        }\r\n\r\n      let newArr = res.data.filter(d => d.id !== 7)\r\n      newArr.push(res.data[6])\r\n      global.xz=res.data[0].department_name\r\n      console.log(\"NEWARRAY=\",global.xz)\r\n      setFilterDeps(newArr.filter(a => a.dep_id === 1))\r\n      setDeps(newArr)\r\n      if(currentUrl && currentUrl !== localUser._id){\r\n        const arr1 = [1, 2, 3, 4, 5, 6, 7, '61efa2f6cf0ce39b27ba2a53', '61efa304cf0ce39b27ba2a54', '61efa31dcf0ce39b27ba2a55', '61efa32bcf0ce39b27ba2a56', '61efa33acf0ce39b27ba2a57', '61efa344cf0ce39b27ba2a58', '61efa34fcf0ce39b27ba2a59']\r\n        const arr2 = [6, 8, 9, 10, 11, '61efa344cf0ce39b27ba2a58', '61efa35dcf0ce39b27ba2a5a', '61efa361cf0ce39b27ba2a5b', '61efa36acf0ce39b27ba2a5c', '61efa374cf0ce39b27ba2a5d']\r\n\r\n        if(arr1.find(i => i === currentUrl)){\r\n          setFilterDeps(newArr.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n        }\r\n        if(arr2.find(i => i === currentUrl)){\r\n          setFilterDeps(newArr)\r\n        }else{\r\n          setFilterDeps(newArr.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n        }\r\n      }\r\n      setIsFetching(false)\r\n    }\r\n\r\n    // загрузка пользователей и сортировка по департаментам\r\n    const fetchUser = async () => {\r\n      setIsFetching(true)\r\n      const res = await axios.get('/api/user/')\r\n      const id=res.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\r\n      setUsers(res.data)\r\n      setIsFetching(false)\r\n      console.log(\"ID=\",id)\r\n    }\r\n\r\n    fetchUser()\r\n    getDeps()\r\n  }, [])\r\n\r\n  const isShowDeps = (e) => {\r\n    const arr1 = [1, 2, 3, 4, 5, 6, 7, '61efa2f6cf0ce39b27ba2a53', '61efa304cf0ce39b27ba2a54', '61efa31dcf0ce39b27ba2a55', '61efa32bcf0ce39b27ba2a56', '61efa33acf0ce39b27ba2a57', '61efa344cf0ce39b27ba2a58', '61efa34fcf0ce39b27ba2a59']\r\n    const arr2 = [6, 8, 9, 10, 11, '61efa344cf0ce39b27ba2a58', '61efa35dcf0ce39b27ba2a5a', '61efa361cf0ce39b27ba2a5b', '61efa36acf0ce39b27ba2a5c', '61efa374cf0ce39b27ba2a5d']\r\n\r\n    if(e.target.value === 1){\r\n      setFilterDeps(deps.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n    }\r\n    if(arr2.find(i => i === e.target.value)){\r\n      setFilterDeps(deps)\r\n    }else{\r\n      setFilterDeps(deps.filter(dep => dep.dep_id === 1 || dep.dep_id === 2 || dep.dep_id === 3 || dep.dep_id === 4 || dep.dep_id === 5 || dep.dep_id === 6 || dep.dep_id === 7))\r\n    }\r\n  }\r\n  const click= async ()=>{\r\n    const res = await axios.get('/api/departments/')\r\n    let id = res.data.map(newarray => newarray.parent_department)\r\n      console.log(id)\r\n\r\n  }\r\n\r\n  return (\r\n    <div className='sidebar'>\r\n      <div className=\"sidebarWrapper\">\r\n        <div className=\"tree\">\r\n          <div className=\"treeWrapper\">\r\n{/!*\r\n            {isFetching ? <CircularProgress style={{color:'#1877f2', margin:'30%'}}/> : filterDeps.map((dep, id) => <SidebarDeps dep={dep} key={id} users={users} setIsShowDeps={isShowDeps}/>)}\r\n            {deps.map((dep, id) => {\r\n\r\n              const type = dep.type\r\n              const label = <span className=\"node\">{dep.department_name}</span>\r\n              return (\r\n                  <TreeView key={type + '|' + id} nodeLabel={label} defaultCollapsed={true}>\r\n\r\n                  <TreeView defaultCollapsed={true}>\r\n\r\n                  <div className=\"info\">{dep.parent_department}</div>\r\n                </TreeView>\r\n              </TreeView>\r\n              )})}*!/}\r\n\r\n              {dataSource.map((node, i) => {\r\n\r\n                  const label = <Link to={`/department/${node.id}`} className='depsUser' style={{fontWeight: `bold`}}><span className=\"node\">{node.type}</span></Link>\r\n\r\n                  return (\r\n\r\n                      <TreeView key={node.type + '|' + i} nodeLabel={label} defaultCollapsed={true}>\r\n\r\n                          {node.child.map(departments => {\r\n\r\n                              const label2 = <Link to={`/department/${departments.id}`} className='depsUser'><span className=\"node\">{departments.name}</span></Link>\r\n\r\n                              return (\r\n\r\n                                  <TreeView nodeLabel={label2} key={departments.child} defaultCollapsed={true}>\r\n\r\n                                      {!!departments.child ? departments.child.map(departments1  => {\r\n\r\n                                          const label3 = <Link to={`/department/${departments1.id}`} className='depsUser'><span className=\"node\">{departments1.name}</span></Link>\r\n\r\n                                          return(\r\n\r\n                                              <TreeView nodeLabel={label3} defaultCollapsed={true}>\r\n\r\n                                                  {!!departments1.child ? departments1.child.map(departments2  => {\r\n\r\n                                            return(\r\n\r\n                                                <Link to={`/department/${departments2.id}`} className='depsUser'>\r\n\r\n                                                    <div className=\"info\" style={{paddingBottom:'8px'}}>{departments2.name}</div>\r\n\r\n                                                </Link>\r\n                                            )\r\n\r\n                                      }):''}\r\n                                  </TreeView>\r\n                              );\r\n                          }):''}\r\n                      </TreeView>\r\n                  );\r\n              })}\r\n                      </TreeView>\r\n                  );\r\n              })}\r\n          </div>\r\n        </div>\r\n      </div>\r\n        {/!* <SidebarDeps users={users} dep={deps}/>*!/}\r\n        <div>\r\n\r\n        </div>\r\n    </div>\r\n  )\r\n}*/\r\n"]},"metadata":{},"sourceType":"module"}