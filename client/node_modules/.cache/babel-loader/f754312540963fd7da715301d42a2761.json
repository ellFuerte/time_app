{"ast":null,"code":"var _jsxFileName = \"D:\\\\time_app\\\\client\\\\src\\\\components\\\\ProfileInfo\\\\ProfileInfo.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useEffect, useRef, useState } from 'react';\nimport { Link, useParams } from \"react-router-dom\";\nimport { Create, Delete, Settings, Message } from '@material-ui/icons';\nimport Skills from '../ProfileInfo/Skills/Skills';\nimport Modal from '../Templates/Modal/Modal';\nimport ModalVacanciesItem from \"../VacanciesItem/ModalVacanciesItem/ModalVacanciesItem\";\nimport ModalVacancies from \"../Templates/ModalVacancies/ModalVacancies\";\nimport Editing from \"./Editing/Editing\";\nimport './ProfileInfo.css';\nimport DeleteUser from \"./DeleteUser/DeleteUser\";\nimport ResetPassword from \"./ResetPassword/ResetPassword\";\nimport FinishTime from \"./FinishTime/FinishTime\";\nimport AddNomination from \"./AddNomination/AddNomination\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function ProfileInfo() {\n  _s();\n\n  const [timeZone, setTimeZone] = useState([]);\n  const [searchTermCities, setSearchTermCities] = useState('');\n  const [allDateUser, setAllDateUser] = useState();\n  const [modalVacancies, setModalVacancies] = useState(false);\n  const [inputValues, setInputValues] = useState('');\n  const [selectedInputIndex, setSelectedInputIndex] = useState(null);\n  const [check, setCheck] = useState();\n  const [checkedItems, setCheckedItems] = useState({});\n  const [votearray, setVotearray] = useState([]);\n  const [userVote, setUserVote] = useState([]);\n  const [depsName, setDepsName] = useState([]);\n  const [cityName, setCityName] = useState([]);\n  const [user, setUser] = useState([]);\n  const [isFetching, setIsFetching] = useState(false);\n  const [modalActive, setModalActive] = useState(false);\n  const [modalActivePass, setModalActivePass] = useState(false);\n  const [modalActiveVote, setModalActiveVote] = useState(false);\n  const [modalVote, setModalVote] = useState(false);\n  const [vote, setVote] = useState([]);\n  const [modalResetPassword, setModalResetPassword] = useState(false);\n  const [modalFinishTime, setModalFinishTime] = useState(false);\n  const [modalActiveDelete, setModalActiveDelete] = useState(false);\n  const [modalActiveSkills, setModalActiveSkills] = useState(false);\n  const [er, setErr] = useState('');\n  const username = useParams();\n  let localUser = !!username ? {\n    _id: username.username,\n    email: \"\"\n  } : JSON.parse(localStorage.getItem('user'));\n  const localUse = JSON.parse(localStorage.getItem('user'));\n  const modalOldPass = useRef();\n  const modalNewPass = useRef();\n  const modalNewPassAgain = useRef();\n  const [filteredCities, setFilteredCities] = useState([]);\n  const [hasImage, setHasImage] = useState(false);\n  const usersStatuses = {\n    0: '',\n    1: 'start',\n    2: 'end',\n    3: 'sick_leave',\n    4: 'deleted',\n    5: 'vacation',\n    6: 'time_off',\n    7: 'other'\n  };\n\n  function findStatus(k) {\n    for (let i in usersStatuses) {\n      if (i == k) {\n        return usersStatuses[i];\n      }\n    }\n  }\n\n  const [userNominationStatus, setUserNominationStatus] = useState(user.nomination_status);\n  useEffect(() => {\n    const getNameDeps = async () => {\n      const deps = {\n        user: username.username\n      };\n      const res = await axios.post('/api/departments/', deps);\n      setTimeZone(res.data[0]['timezone']);\n      setDepsName(res.data[0]['department_name']);\n      setCityName(res.data[0]['city_name']);\n    };\n\n    const fetchUser = async () => {\n      localUser._id = !!localUser._id ? localUser._id : localUser.id;\n      localUser._id = !!username ? username.username : localUser._id;\n      const res = await axios.get('/api/user/' + username.username);\n      setUser(res.data);\n      setIsFetching(false);\n      const user = await axios.get('/api/user/');\n      const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name));\n      const mass = sort.filter(element => element.id !== username.username && element.status !== 4);\n      setUserVote(mass);\n    }; // Номинации\n\n\n    const fetchVote = async () => {\n      const res = await axios.get('/api/vote/');\n      setVote(res.data);\n    };\n\n    fetchVote();\n    fetchUser();\n    getNameDeps();\n  }, [user.user_name, user.email, user.phone_number, user.additional_contact, user.distribution_group, user.activity_profile, user.place_of_residence, username.username, userNominationStatus]); // изменить пароль\n\n  const handleClickPassword = async e => {\n    e.preventDefault();\n\n    if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n      setErr('Новые пароли не совпадают');\n      return;\n    }\n\n    const passwords = {\n      userId: localUse._id,\n      password: localUse.password,\n      oldPassword: modalOldPass.current.value,\n      newPassword: modalNewPass.current.value\n    };\n\n    try {\n      await axios.put('/api/newPassword/', passwords);\n      setModalActivePass(false);\n      /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/\n    } catch (er) {\n      setErr('Старые пароли не совпадают');\n    }\n  }; // сбросить пароль\n  // удалить пользователя\n\n\n  localUser = !!user && !Array.isArray(user) ? user : localUser;\n  localUser.username = !!localUser.user_name ? localUser.user_name : localUser.username;\n  const name = localUser.email.toLowerCase();\n\n  const button = () => {\n    if (votearray.length === 0) {\n      setErr('Выберите участников номинации');\n    } else {\n      votearray.forEach(async vote => {\n        const arr = vote.split(\"_\");\n        const voteUser = {\n          user_id: localUse._id,\n          vote_for_user: arr[1],\n          nominations_id: arr[0]\n        };\n        await axios.post('/api/vote/', voteUser);\n      });\n      setModalActiveVote(false);\n    }\n  };\n\n  const clickVote = (e, id, user_name) => {\n    setFilteredCities([]);\n    console.log('index=', id, user_name);\n    setInputValues(prev => ({ ...prev,\n      [selectedInputIndex]: user_name\n    }));\n    e.preventDefault();\n    const data = id.toString();\n    const arr = data.split(\"_\");\n\n    if (arr[0] === '' || arr[1] === '') {\n      return;\n    } else {\n      const str = arr[1].toString();\n      const str1 = arr[0].toString();\n      const existingIndex = votearray.findIndex(item => item.split(\"_\")[0] === str1);\n\n      if (existingIndex !== -1) {\n        const newArray = [...votearray];\n        newArray[existingIndex] = data;\n        console.log('Массив с обновленным элементом:', newArray);\n        setVotearray(newArray);\n        return;\n      }\n    }\n\n    const votearr = [...votearray];\n    votearr.push(data);\n    const newArray = votearr.filter(element => element !== \"\");\n    console.log('newArray=', newArray);\n    setVotearray(newArray);\n  };\n  /*    const secureButton = async () => {\n  \n          const res = await axios.get('/api/user/' + username.username)\n  \n          const addNomination = {\n              userId: username.username,\n              id_nomination: check\n          }\n  \n          if (check === undefined) {\n              setErr('Выберите номинацию')\n          } else {\n              await axios.post('/api/vote/', addNomination)\n              setModalVote(false)\n              window.location.reload()\n          }\n      }\n  \n  \n  \n  \n      const clearSecureButton = async () => {\n          const res = await axios.get('/api/user/' + username.username)\n          const addNomination = {\n              userId: username.username,\n              id_nomination: null\n          }\n  \n          await axios.post('/api/vote/', addNomination)\n          setModalVote(false)\n          window.location.reload()\n  \n      }\n  \n  \n      const inputClick = (event, voteId) => {\n          const {id, checked} = event.target\n          if (checked) {\n              setCheckedItems(checked)\n          } else {\n              setCheckedItems(null)\n          }\n          setCheck(event.target.value)\n          setCheckedItems(prevState => ({\n              ...prevState,\n              [id]: checked,\n          }))\n  \n          setUser(prevState => ({\n                  ...prevState,\n                  nomination_status: checked ? voteId : null\n              }\n          ))\n      }*/\n\n\n  const images = {\n    '1': {\n      src: '../images/1.png',\n      title: 'Тучка'\n    },\n    '2': {\n      src: '../images/2.png',\n      title: 'Аркадий Паровозов'\n    },\n    '3': {\n      src: '../images/3.png',\n      title: 'И так сойдет'\n    },\n    '4': {\n      src: '../images/4.png',\n      title: 'Портной'\n    },\n    '5': {\n      src: '../images/5.png',\n      title: 'Мама обезьянка'\n    },\n    '6': {\n      src: '../images/6.png',\n      title: 'Кот Матроскин'\n    },\n    '7': {\n      src: '../images/7.png',\n      title: 'Крот'\n    },\n    '8': {\n      src: '../images/8.png',\n      title: 'Птица говорун(голосуем только среди дежурных)'\n    },\n    '9': {\n      src: '../images/9.png',\n      title: 'Хома(Голосуем среди коллег из внедрения)'\n    },\n    '10': {\n      src: '../images/10.png',\n      title: 'Симка и нолик'\n    }\n  };\n\n  const handleInputChangeUsers = (e, id) => {\n    const index = id + 1;\n    const {\n      value\n    } = e.target;\n    setInputValues(prev => ({ ...prev,\n      [index]: value\n    }));\n    setSelectedInputIndex(index);\n    const termCities = e.target.value;\n    setSearchTermCities(termCities);\n    const filtered = userVote.filter(city => city.user_name && city.user_name.toLowerCase().includes(termCities.toLowerCase()));\n\n    if (termCities === '') {\n      setFilteredCities([]);\n    } else {\n      setFilteredCities(filtered);\n    }\n  };\n\n  const getChangeVacancies = () => {\n    if (localUse.isAdmin) {\n      setModalVacancies(true);\n      setAllDateUser(user);\n    }\n  };\n\n  const updateNominationStatus = newStatus => {\n    setUser(prevState => ({ ...prevState,\n      nomination_status: newStatus\n    }));\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profileInfo\",\n    children: [Object.keys(images).map((key, id) => (user.nomination_status === key || user.nomination_status === parseInt(key)) && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: images[key].src,\n      title: images[key].title,\n      alt: `Image for ${key}`,\n      className: \"imagesProfile\"\n    }, id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 339,\n      columnNumber: 17\n    }, this)), isFetching ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"isFatching\",\n      children: \"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 348,\n      columnNumber: 27\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: 'employeePI ' + findStatus(user.status),\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ProfileName\",\n        children: [user.user_name, localUse.isAdmin || localUse._id === username.username ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Create, {\n            style: {\n              cursor: 'pointer',\n              fontSize: '20px',\n              paddingLeft: '5px'\n            },\n            onClick: () => setModalActive(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 37\n          }, this), /*#__PURE__*/_jsxDEV(Editing, {\n            modalActive: modalActive,\n            setModalActive: setModalActive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 37\n          }, this)]\n        }, void 0, true) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(Delete, {\n            style: {\n              cursor: 'pointer',\n              fontSize: '20px'\n            },\n            onClick: () => setModalActiveDelete(true)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(DeleteUser, {\n            modalActiveDelete: modalActiveDelete,\n            setModalActiveDelete: setModalActiveDelete,\n            username: username.username,\n            user: user.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 366,\n            columnNumber: 30\n          }, this)]\n        }, void 0, true) : '', localUse.isAdmin === true && localUse._id === user.id ? /*#__PURE__*/_jsxDEV(Link, {\n          to: `/AdminPanel`,\n          children: /*#__PURE__*/_jsxDEV(Settings, {\n            style: {\n              cursor: 'pointer',\n              fontSize: '20px',\n              paddingTop: '5px',\n              color: 'black'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 374,\n            columnNumber: 37\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 373,\n          columnNumber: 33\n        }, this) : '']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"label\", {\n          style: {\n            cursor: 'pointer'\n          },\n          onClick: getChangeVacancies,\n          className: \"ProfileLinkVacancies\",\n          children: user.vacancy_code\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 29\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 380,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '3px dashed black',\n          padding: '10px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"Email: \", name.charAt(0).toUpperCase() + name.slice(1)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D: \", user.phone_number]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [localUse.isAdmin !== false || localUse._id === username.username ? 'Доп.Контакт: ' : '', localUse.isAdmin !== false || localUse._id === username.username ? user.additional_contact : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430 \\u0440\\u0430\\u0441\\u0441\\u044B\\u043B\\u043A\\u0438: \", user.distribution_group]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438: \", user.activity_profile]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"\\u0413\\u043E\\u0440\\u043E\\u0434 \\u043F\\u0440\\u043E\\u0436\\u0438\\u0432\\u0430\\u043D\\u0438\\u044F: \", cityName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [localUse.isAdmin !== false || localUse._id === username.username ? 'Адрес фактического проживания: ' : '', localUse.isAdmin !== false || localUse._id === username.username ? user.place_of_residence : '']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"ProfileInfoCard\",\n          children: [\"\\u041F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435: \", depsName]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 21\n      }, this), localUse.isAdmin || localUse._id === username.username ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActivePass(true),\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 25\n      }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"changePass\",\n          onClick: () => setModalResetPassword(true),\n          children: \"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ResetPassword, {\n          modalResetPassword: modalResetPassword,\n          setModalResetPassword: setModalResetPassword,\n          username: username.username\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"changePass\",\n          onClick: () => setModalFinishTime(true),\n          children: \"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(FinishTime, {\n          modalFinishTime: modalFinishTime,\n          setModalFinishTime: setModalFinishTime,\n          user: user.id,\n          status: user.status\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 425,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true) : '', localUse._id === user.id ? /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActiveVote(true),\n        children: \"\\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 432,\n        columnNumber: 25\n      }, this) : '', localUse.isAdmin ? /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"changePass\",\n          onClick: () => setModalVote(true),\n          children: \"\\u0417\\u0430\\u043A\\u0440\\u0435\\u043F\\u0438\\u0442\\u044C \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044E\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 438,\n          columnNumber: 26\n        }, this), /*#__PURE__*/_jsxDEV(AddNomination, {\n          modalVote: modalVote,\n          setModalVote: setModalVote,\n          username: username,\n          updateNominationStatus: updateNominationStatus\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 26\n        }, this)]\n      }, void 0, true) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"changePass\",\n        onClick: () => setModalActiveSkills(true),\n        children: \"\\u041D\\u0430\\u0432\\u044B\\u043A\\u0438\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 443,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Skills, {\n        modalActiveSkills: modalActiveSkills,\n        setModalActiveSkills: setModalActiveSkills\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 444,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 349,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActivePass,\n      setActive: setModalActivePass,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 451,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 452,\n        columnNumber: 17\n      }, this), er && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: er\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 453,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleClickPassword,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\u0421\\u0442\\u0430\\u0440\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          type: \"password\",\n          className: \"inputChangePassword\",\n          ref: modalOldPass\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n          type: \"password\",\n          className: \"inputChangePassword\",\n          ref: modalNewPass,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 461,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0435\\u0449\\u0451 \\u0440\\u0430\\u0437\",\n          type: \"password\",\n          className: \"inputChangePassword\",\n          ref: modalNewPassAgain,\n          minLength: \"6\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButtonChangePassword\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 475,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 454,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActiveVote,\n      setActive: setModalActiveVote,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u041D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 485,\n        columnNumber: 17\n      }, this), er && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: er\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 486,\n        columnNumber: 24\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 487,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"div\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: vote.map((vote, id) => /*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: vote.id,\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"inputVote\",\n              children: vote.nominations_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 37\n            }, this), vote.description]\n          }, id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 489,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"di\",\n          children: vote.map((vote, id) => /*#__PURE__*/_jsxDEV(\"div\", {\n            style: {\n              position: 'relative'\n            },\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              onChange: e => handleInputChangeUsers(e, id),\n              value: inputValues[id + 1] || '',\n              className: \"select\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 502,\n              columnNumber: 37\n            }, this), selectedInputIndex === id + 1 && filteredCities.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divSelectRegister\",\n              style: {\n                position: 'absolute',\n                top: '100%',\n                left: 0,\n                zIndex: 1000,\n                marginLeft: '20px'\n              },\n              children: filteredCities.map((city, cityId) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selectNameDiv\",\n                onClick: e => clickVote(e, selectedInputIndex + \"_\" + city.id, city.user_name),\n                children: city.user_name\n              }, cityId, false, {\n                fileName: _jsxFileName,\n                lineNumber: 510,\n                columnNumber: 49\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 508,\n              columnNumber: 41\n            }, this)]\n          }, id + 1, true, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 33\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 499,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 488,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button\",\n        type: \"submit\",\n        disabled: isFetching,\n        onClick: button,\n        children: \"\\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 524,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 484,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(ModalVacancies, {\n      active: modalVacancies,\n      setActive: setModalVacancies,\n      children: /*#__PURE__*/_jsxDEV(ModalVacanciesItem, {\n        allDateUser: allDateUser\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 565,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 564,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Skills, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 572,\n      columnNumber: 1\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 335,\n    columnNumber: 9\n  }, this);\n}\n/*                            <select onChange={clickVote} key={id} value={userVote.id} className='select'>\n                                <option value=''>Выберите участника</option>\n\n                                {userVote.map((userVote, id) => <option key={id}\n                                                                        value={vote.id + '_' + userVote.id}>{userVote.user_name}</option>)}\n                            </select>*/\n\n_s(ProfileInfo, \"t3p2gIl8qHULWzXkrEBP+NOuCdA=\", false, function () {\n  return [useParams];\n});\n\n_c = ProfileInfo;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileInfo\");","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/ProfileInfo.jsx"],"names":["axios","React","useEffect","useRef","useState","Link","useParams","Create","Delete","Settings","Message","Skills","Modal","ModalVacanciesItem","ModalVacancies","Editing","DeleteUser","ResetPassword","FinishTime","AddNomination","ProfileInfo","timeZone","setTimeZone","searchTermCities","setSearchTermCities","allDateUser","setAllDateUser","modalVacancies","setModalVacancies","inputValues","setInputValues","selectedInputIndex","setSelectedInputIndex","check","setCheck","checkedItems","setCheckedItems","votearray","setVotearray","userVote","setUserVote","depsName","setDepsName","cityName","setCityName","user","setUser","isFetching","setIsFetching","modalActive","setModalActive","modalActivePass","setModalActivePass","modalActiveVote","setModalActiveVote","modalVote","setModalVote","vote","setVote","modalResetPassword","setModalResetPassword","modalFinishTime","setModalFinishTime","modalActiveDelete","setModalActiveDelete","modalActiveSkills","setModalActiveSkills","er","setErr","username","localUser","_id","email","JSON","parse","localStorage","getItem","localUse","modalOldPass","modalNewPass","modalNewPassAgain","filteredCities","setFilteredCities","hasImage","setHasImage","usersStatuses","findStatus","k","i","userNominationStatus","setUserNominationStatus","nomination_status","getNameDeps","deps","res","post","data","fetchUser","id","get","sort","a","b","user_name","localeCompare","mass","filter","element","status","fetchVote","phone_number","additional_contact","distribution_group","activity_profile","place_of_residence","handleClickPassword","e","preventDefault","current","value","passwords","userId","password","oldPassword","newPassword","put","Array","isArray","name","toLowerCase","button","length","forEach","arr","split","voteUser","user_id","vote_for_user","nominations_id","clickVote","console","log","prev","toString","str","str1","existingIndex","findIndex","item","newArray","votearr","push","images","src","title","handleInputChangeUsers","index","target","termCities","filtered","city","includes","getChangeVacancies","isAdmin","updateNominationStatus","newStatus","prevState","Object","keys","map","key","parseInt","cursor","fontSize","paddingLeft","paddingTop","color","vacancy_code","border","padding","charAt","toUpperCase","slice","nominations_name","description","position","top","left","zIndex","marginLeft","cityId"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport React, {useEffect, useRef, useState} from 'react'\nimport {Link, useParams} from \"react-router-dom\";\nimport {Create, Delete, Settings, Message} from '@material-ui/icons'\n\n\nimport Skills from '../ProfileInfo/Skills/Skills'\nimport Modal from '../Templates/Modal/Modal'\nimport ModalVacanciesItem from \"../VacanciesItem/ModalVacanciesItem/ModalVacanciesItem\";\nimport ModalVacancies from \"../Templates/ModalVacancies/ModalVacancies\";\nimport Editing from \"./Editing/Editing\"\n\nimport './ProfileInfo.css'\nimport DeleteUser from \"./DeleteUser/DeleteUser\";\nimport ResetPassword from \"./ResetPassword/ResetPassword\";\nimport FinishTime from \"./FinishTime/FinishTime\";\nimport AddNomination from \"./AddNomination/AddNomination\";\n\nexport default function ProfileInfo() {\n\n    const [timeZone, setTimeZone] = useState([])\n    const [searchTermCities, setSearchTermCities] = useState('');\n\n    const [allDateUser,setAllDateUser]=useState()\n\n    const [modalVacancies, setModalVacancies] = useState(false)\n    const [inputValues, setInputValues] = useState('');\n    const [selectedInputIndex, setSelectedInputIndex] = useState(null);\n\n    const [check, setCheck] = useState();\n    const [checkedItems, setCheckedItems] = useState({});\n    const [votearray, setVotearray] = useState([])\n    const [userVote, setUserVote] = useState([])\n\n\n    const [depsName, setDepsName] = useState([])\n    const [cityName, setCityName] = useState([])\n\n    const [user, setUser] = useState([])\n\n\n\n    const [isFetching, setIsFetching] = useState(false)\n    const [modalActive, setModalActive] = useState(false)\n    const [modalActivePass, setModalActivePass] = useState(false)\n    const [modalActiveVote, setModalActiveVote] = useState(false)\n    const [modalVote, setModalVote] = useState(false)\n    const [vote, setVote] = useState([])\n    const [modalResetPassword, setModalResetPassword] = useState(false)\n    const [modalFinishTime, setModalFinishTime] = useState(false)\n    const [modalActiveDelete, setModalActiveDelete] = useState(false)\n    const [modalActiveSkills, setModalActiveSkills] = useState(false)\n\n\n    const [er, setErr] = useState('')\n    const username = useParams()\n\n\n    let localUser = !!username ? {_id: username.username, email: \"\"} : JSON.parse(localStorage.getItem('user'))\n    const localUse = JSON.parse(localStorage.getItem('user'))\n\n    const modalOldPass = useRef()\n    const modalNewPass = useRef()\n    const modalNewPassAgain = useRef()\n\n\n    const [filteredCities, setFilteredCities] = useState([]);\n    const [hasImage, setHasImage] = useState(false);\n\n\n\n    const usersStatuses = {\n        0: '',\n        1: 'start',\n        2: 'end',\n        3: 'sick_leave',\n        4: 'deleted',\n        5: 'vacation',\n        6: 'time_off',\n        7: 'other'\n    }\n\n    function findStatus(k) {\n        for (let i in usersStatuses) {\n            if (i == k) {\n                return usersStatuses[i]\n            }\n        }\n    }\n\n    const [userNominationStatus, setUserNominationStatus] = useState(user.nomination_status);\n    useEffect(() => {\n\n\n\n\n        const getNameDeps = async () => {\n            const deps = {\n                user: username.username\n            }\n            const res = await axios.post('/api/departments/', deps)\n            setTimeZone(res.data[0]['timezone'])\n            setDepsName(res.data[0]['department_name'])\n            setCityName(res.data[0]['city_name'])\n        }\n\n        const fetchUser = async () => {\n            localUser._id = !!localUser._id ? localUser._id : localUser.id\n            localUser._id = !!username ? username.username : localUser._id\n            const res = await axios.get('/api/user/' + username.username)\n            setUser(res.data)\n            setIsFetching(false)\n\n            const user = await axios.get('/api/user/')\n            const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\n            const mass = sort.filter(element => element.id !== username.username && element.status !== 4)\n            setUserVote(mass)\n        }\n        // Номинации\n        const fetchVote = async () => {\n            const res = await axios.get('/api/vote/')\n            setVote(res.data)\n        }\n\n        fetchVote()\n        fetchUser()\n        getNameDeps()\n    }, [\n        user.user_name,\n        user.email,\n        user.phone_number,\n        user.additional_contact,\n        user.distribution_group,\n        user.activity_profile,\n        user.place_of_residence,\n        username.username,\n        userNominationStatus\n    ])\n\n\n    // изменить пароль\n    const handleClickPassword = async (e) => {\n        e.preventDefault()\n        if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n            setErr('Новые пароли не совпадают')\n            return\n        }\n        const passwords = {\n            userId: localUse._id,\n            password: localUse.password,\n            oldPassword: modalOldPass.current.value,\n            newPassword: modalNewPass.current.value\n        }\n        try {\n            await axios.put('/api/newPassword/', passwords)\n            setModalActivePass(false)\n            /*      localStorage.clear()\n                  window.location.reload()\n                  window.location.href = '/'*/\n        } catch (er) {\n            setErr('Старые пароли не совпадают')\n        }\n    }\n\n    // сбросить пароль\n\n\n\n\n    // удалить пользователя\n\n\n    localUser = (!!user && !Array.isArray(user)) ? user : localUser\n    localUser.username = !!localUser.user_name ? localUser.user_name : localUser.username\n    const name = localUser.email.toLowerCase()\n\n\n    const button = () => {\n        if (votearray.length === 0) {\n            setErr('Выберите участников номинации')\n        } else {\n            votearray.forEach(async (vote) => {\n\n\n                    const arr = vote.split(\"_\")\n\n                    const voteUser = {\n                        user_id: localUse._id,\n                        vote_for_user: arr[1],\n                        nominations_id: arr[0]\n                    }\n                    await axios.post('/api/vote/', voteUser)\n                }\n            )\n            setModalActiveVote(false)\n        }\n    }\n\n    const clickVote = (e, id,user_name) => {\n        setFilteredCities([])\n        console.log('index=',id,user_name)\n        setInputValues(prev => ({ ...prev, [selectedInputIndex]: user_name }));\n        e.preventDefault();\n        const data =id.toString();\n        const arr = data.split(\"_\");\n        if (arr[0] === '' || arr[1] === '') {\n            return;\n        } else {\n            const str = arr[1].toString();\n            const str1 = arr[0].toString();\n\n            const existingIndex = votearray.findIndex(item => item.split(\"_\")[0] === str1);\n            if (existingIndex !== -1) {\n                const newArray = [...votearray];\n                newArray[existingIndex] = data;\n                console.log('Массив с обновленным элементом:', newArray);\n                setVotearray(newArray);\n                return;\n            }\n        }\n\n        const votearr = [...votearray];\n        votearr.push(data);\n\n        const newArray = votearr.filter(element => element !== \"\");\n        console.log('newArray=', newArray);\n        setVotearray(newArray);\n\n    };\n\n\n/*    const secureButton = async () => {\n\n        const res = await axios.get('/api/user/' + username.username)\n\n        const addNomination = {\n            userId: username.username,\n            id_nomination: check\n        }\n\n        if (check === undefined) {\n            setErr('Выберите номинацию')\n        } else {\n            await axios.post('/api/vote/', addNomination)\n            setModalVote(false)\n            window.location.reload()\n        }\n    }\n\n\n\n\n    const clearSecureButton = async () => {\n        const res = await axios.get('/api/user/' + username.username)\n        const addNomination = {\n            userId: username.username,\n            id_nomination: null\n        }\n\n        await axios.post('/api/vote/', addNomination)\n        setModalVote(false)\n        window.location.reload()\n\n    }\n\n\n    const inputClick = (event, voteId) => {\n        const {id, checked} = event.target\n        if (checked) {\n            setCheckedItems(checked)\n        } else {\n            setCheckedItems(null)\n        }\n        setCheck(event.target.value)\n        setCheckedItems(prevState => ({\n            ...prevState,\n            [id]: checked,\n        }))\n\n        setUser(prevState => ({\n                ...prevState,\n                nomination_status: checked ? voteId : null\n            }\n        ))\n    }*/\n\n\n    const images = {\n        '1': {src: '../images/1.png', title: 'Тучка'},\n        '2': {src: '../images/2.png', title: 'Аркадий Паровозов'},\n        '3': {src: '../images/3.png', title: 'И так сойдет'},\n        '4': {src: '../images/4.png', title: 'Портной'},\n        '5': {src: '../images/5.png', title: 'Мама обезьянка'},\n        '6': {src: '../images/6.png', title: 'Кот Матроскин'},\n        '7': {src: '../images/7.png', title: 'Крот'},\n        '8': {src: '../images/8.png', title: 'Птица говорун(голосуем только среди дежурных)'},\n        '9': {src: '../images/9.png', title: 'Хома(Голосуем среди коллег из внедрения)'},\n        '10': {src: '../images/10.png', title: 'Симка и нолик'}\n    };\n\n\n    const handleInputChangeUsers = (e,id) => {\n        const index = id + 1\n        const { value } = e.target;\n        setInputValues(prev => ({ ...prev, [index]: value }));\n        setSelectedInputIndex(index);\n\n        const termCities = e.target.value;\n        setSearchTermCities(termCities);\n        const filtered = userVote.filter(city =>\n            city.user_name && city.user_name.toLowerCase().includes(termCities.toLowerCase())\n        );\n        if (termCities === '') {\n            setFilteredCities([])\n        } else {\n            setFilteredCities(filtered);\n        }\n    }\n\n\n    const getChangeVacancies =  () => {\n        if(localUse.isAdmin) {\n            setModalVacancies(true)\n            setAllDateUser(user)\n        }\n    }\n    const updateNominationStatus = (newStatus) => {\n        setUser(prevState => ({\n            ...prevState,\n            nomination_status: newStatus\n        }));\n    };\n    return (\n\n        <div className='profileInfo'>\n\n            {Object.keys(images).map((key, id) => (\n                (user.nomination_status === key || user.nomination_status === parseInt(key)) &&\n                <img\n                    key={id}\n                    src={images[key].src}\n                    title={images[key].title}\n                    alt={`Image for ${key}`}\n                    className='imagesProfile'\n                />\n            ))}\n\n            {isFetching ? <div className='isFatching'>Загрузка...</div> :\n                <div className={'employeePI ' + (findStatus(user.status))}>\n                        <div className='ProfileName'>\n\n                            {user.user_name}\n\n                            {localUse.isAdmin || localUse._id===username.username\n                                ?\n                                <>\n                                    <Create style={{cursor:'pointer', fontSize:'20px',paddingLeft:'5px'}} onClick={() => setModalActive(true)}/>\n                                    <Editing modalActive={modalActive} setModalActive={setModalActive} />\n                                </>\n                                : ''}\n\n\n                            {localUse.isAdmin ?\n                                <>\n                            <Delete style={{cursor:'pointer',fontSize:'20px'}}  onClick={() => setModalActiveDelete(true)}/>\n                             <DeleteUser modalActiveDelete={modalActiveDelete} setModalActiveDelete={setModalActiveDelete} username={username.username} user={user.id} />\n                                </>\n                            : ''}\n\n\n\n                            {localUse.isAdmin === true && localUse._id === user.id ?\n                                <Link to={`/AdminPanel`}>\n                                    <Settings style={{cursor:'pointer',fontSize:'20px',paddingTop:'5px',color:'black'}}/>\n                                </Link>\n                                : ''}\n                        </div>\n\n\n                        <div>\n                            <label style={{cursor:'pointer'}} onClick={getChangeVacancies} className='ProfileLinkVacancies'>{user.vacancy_code}</label>\n                        </div>\n\n\n{/*                    {\n                        <Message style={{cursor: 'pointer', fontSize: 'large'}} />\n                    }*/}\n\n\n                    <div style={{border: '3px dashed black',padding:'10px'}}>\n                    <div className='ProfileInfoCard'>Email: {name.charAt(0).toUpperCase() + name.slice(1)}</div>\n                    <div className='ProfileInfoCard'>Телефон: {user.phone_number}</div>\n                    <div className='ProfileInfoCard'>\n                        {localUse.isAdmin !== false || localUse._id===username.username? 'Доп.Контакт: ' : ''}\n                        {localUse.isAdmin !== false || localUse._id===username.username? user.additional_contact : ''}\n                    </div>\n                    <div className='ProfileInfoCard'>Группа рассылки: {user.distribution_group}</div>\n                    <div className='ProfileInfoCard'>Профиль деятельности: {user.activity_profile}</div>\n                    <div className='ProfileInfoCard'>Город проживания: {cityName}</div>\n                    <div className='ProfileInfoCard'>\n                        {localUse.isAdmin !== false  || localUse._id===username.username ? 'Адрес фактического проживания: ' : ''}\n                        {localUse.isAdmin !== false || localUse._id===username.username ? user.place_of_residence : ''}\n                    </div>\n                    <div className='ProfileInfoCard'>Подразделение: {depsName}</div>\n                    </div>\n\n                    {\n                        localUse.isAdmin || localUse._id===username.username ?\n                        <div className='changePass' onClick={() => setModalActivePass(true)}>Изменить пароль</div>:''\n                    }\n\n                    {\n                        localUse.isAdmin ?\n                            <>\n                        <div className='changePass' onClick={() => setModalResetPassword(true)}>Сбросить пароль</div>\n                        <ResetPassword modalResetPassword={modalResetPassword} setModalResetPassword={setModalResetPassword} username={username.username}/>\n                            </>\n                        : ''\n                    }\n\n                    {\n                        localUse.isAdmin ?\n                            <>\n                        <div className='changePass' onClick={() => setModalFinishTime(true)}>Закончить</div>\n                        <FinishTime modalFinishTime={modalFinishTime} setModalFinishTime={setModalFinishTime} user={user.id} status={user.status}/>\n                            </>\n                        :''\n                    }\n\n                    {\n                        localUse._id === user.id ?\n                        <div className='changePass' onClick={() => setModalActiveVote(true)}>Проголосовать</div> : ''\n                    }\n\n                    {\n                        localUse.isAdmin ?\n                            <>\n                         <div className=\"changePass\" onClick={() => setModalVote(true)}>Закрепить номинацию</div>\n                         <AddNomination modalVote={modalVote} setModalVote={setModalVote} username={username}  updateNominationStatus={updateNominationStatus}/>\n                            </>: ''\n                    }\n\n                    <div className=\"changePass\" onClick={() => setModalActiveSkills(true)}>Навыки</div>\n                    <Skills modalActiveSkills={modalActiveSkills} setModalActiveSkills={setModalActiveSkills} />\n\n                </div>\n            }\n\n\n            <Modal active={modalActivePass} setActive={setModalActivePass}>\n                <h1>Изменение информации:</h1>\n                <hr/>\n                {er && <div className='modalError'>{er}</div>}\n                <form className=\"modalLoginBox\" onSubmit={handleClickPassword}>\n                    <input\n                        placeholder=\"Старый пароль\"\n                        type='password'\n                        className=\"inputChangePassword\"\n                        ref={modalOldPass}\n                    />\n                    <input\n                        placeholder=\"Новый пароль\"\n                        type='password'\n                        className=\"inputChangePassword\"\n                        ref={modalNewPass}\n                        minLength='6'\n                    />\n                    <input\n                        placeholder=\"Новый пароль ещё раз\"\n                        type='password'\n                        className=\"inputChangePassword\"\n                        ref={modalNewPassAgain}\n                        minLength='6'\n                    />\n                    <button className=\"ModalButtonChangePassword\" type=\"submit\" disabled={isFetching}>\n                        Изменить\n                    </button>\n                </form>\n            </Modal>\n\n\n\n\n            <Modal active={modalActiveVote} setActive={setModalActiveVote}>\n                <h1>Номинации:</h1>\n                {er && <div className='modalError'>{er}</div>}\n                <hr/>\n                <div className='div'>\n                    <div>\n                        {\n                            vote.map((vote, id) =>\n\n                                <label key={id} htmlFor={vote.id}>\n                                    <h3 className='inputVote'>{vote.nominations_name}</h3>\n                                    {vote.description}\n                                </label>\n                            )}\n                    </div>\n                    <div className='di'>\n                            {vote.map((vote, id) => (\n                                <div key={id+1} style={{ position: 'relative' }}>\n                                    <input\n                                        onChange={(e) => handleInputChangeUsers(e, id)}\n                                        value={inputValues[id+1] || ''}\n                                        className='select'\n                                    />\n                                    {selectedInputIndex === id+1 && filteredCities.length > 0 && (\n                                        <div className='divSelectRegister' style={{ position: 'absolute', top: '100%', left: 0, zIndex: 1000,marginLeft:'20px' }}>\n                                            {filteredCities.map((city, cityId) => (\n                                                <div\n                                                    className='selectNameDiv'\n                                                    key={cityId}\n                                                    onClick={(e) => clickVote(e, selectedInputIndex + \"_\" + city.id, city.user_name)}>\n                                                    {city.user_name}\n                                                </div>\n                                            ))}\n                                        </div>\n                                    )}\n                                </div>\n                            ))}\n                        </div>\n\n                </div>\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={button}>Проголосовать</button>\n            </Modal>\n\n\n\n\n            {/*<Modal active={modalVote} setActive={setModalVote}>\n                <h1>Закрепить номинацию:</h1>\n                {er && <div className='modalError'>{er}</div>}\n                <hr/>\n                <div>\n                    <div className='voteContainer'>\n                        {vote.map((vote, id) => (\n                            <div key={id} className=\"voteItem\">\n                                <label key={id} htmlFor={vote.id} className=\"inputVote\">\n\n                                    <input\n                                        type='checkbox'\n                                        id={vote.id}\n                                        value={vote.id}\n                                        onChange={(e) => inputClick(e, vote.id)}\n                                        checked={user.nomination_status === vote.id}\n                                    />\n\n                                    {vote.nominations_name}{' '}\n\n                                    <img src={`../images/${vote.id}.png`} alt={`Image for ${vote.nominations_name}`}\n                                         className='images'/>\n\n                                </label>\n                            </div>\n                        ))}\n                    </div>\n                </div>\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={secureButton}>Закрепить</button>\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={clearSecureButton}>Снять\n                    номинацию\n                </button>\n            </Modal>*/}\n\n            <ModalVacancies active={modalVacancies} setActive={setModalVacancies}>\n                <ModalVacanciesItem\n                    allDateUser={allDateUser}\n                />\n            </ModalVacancies>\n\n\n\n<Skills/>\n\n        </div>\n    )\n}\n\n\n\n\n/*                            <select onChange={clickVote} key={id} value={userVote.id} className='select'>\n                                <option value=''>Выберите участника</option>\n\n                                {userVote.map((userVote, id) => <option key={id}\n                                                                        value={vote.id + '_' + userVote.id}>{userVote.user_name}</option>)}\n                            </select>*/"]},"metadata":{},"sourceType":"module"}