{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Link}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Statistics(){var localUser=JSON.parse(localStorage.getItem('user'));var _useState=useState(0),_useState2=_slicedToArray(_useState,2),countAll_users=_useState2[0],setCountAll_users=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),countWorked_today=_useState4[0],setCountWorked_today=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),countWorked_yesterday=_useState6[0],setCountWorked_yesterday=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),countSickLeave_today=_useState8[0],setCountSickLeave_today=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),countSick_yesterday=_useState10[0],setCountSick_yesterday=_useState10[1];var _useState11=useState(0),_useState12=_slicedToArray(_useState11,2),countVacation_today=_useState12[0],setCountVacation_today=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),countVacation_yesterday=_useState14[0],setCountVacation_yesterday=_useState14[1];useEffect(function(){var typework=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/typework_status/');case 2:res=_context.sent;case 3:case\"end\":return _context.stop();}}},_callee);}));return function typework(){return _ref.apply(this,arguments);};}();var get_statistics_all_users=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var getUsers,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:getUsers={id:localUser._id};if(!(localUser.isAdmin===true)){_context2.next=12;break;}_context2.next=4;return axios.post('/api/get_statistics_all_users',getUsers);case 4:res=_context2.sent;if(res.data[0]['get_statistics_all_users'][0]['all_users']===null){res.data[0]['get_statistics_all_users'][0]['all_users']=0;}else{setCountAll_users(res.data[0]['get_statistics_all_users'][0]['all_users'].length);}if(res.data[0]['get_statistics_all_users'][0]['not_working_today']===null){res.data[0]['get_statistics_all_users'][0]['not_working_today']=0;}else{setCountWorked_today(res.data[0]['get_statistics_all_users'][0]['not_working_today'].length);}if(res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday']===null){res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday']=0;}else{setCountWorked_yesterday(res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday'].length);}if(res.data[0]['get_statistics_all_users'][0]['sick_today']===null){res.data[0]['get_statistics_all_users'][0]['sick_today']=0;}else{setCountSickLeave_today(res.data[0]['get_statistics_all_users'][0]['sick_today'].length);}if(res.data[0]['get_statistics_all_users'][0]['sick_yesterday']===null){res.data[0]['get_statistics_all_users'][0]['sick_yesterday']=0;}else{setCountSick_yesterday(res.data[0]['get_statistics_all_users'][0]['sick_yesterday'].length);}if(res.data[0]['get_statistics_all_users'][0]['vacation_today']===null){res.data[0]['get_statistics_all_users'][0]['vacation_today']=0;}else{setCountVacation_today(res.data[0]['get_statistics_all_users'][0]['vacation_today'].length);}if(res.data[0]['get_statistics_all_users'][0]['vacation_yesterday']===null){res.data[0]['get_statistics_all_users'][0]['vacation_yesterday']=0;}else{setCountVacation_yesterday(res.data[0]['get_statistics_all_users'][0]['vacation_yesterday'].length);}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function get_statistics_all_users(){return _ref2.apply(this,arguments);};}();typework();get_statistics_all_users();},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"topbarCenter\",children:localUser.isAdmin?/*#__PURE__*/_jsxs(\"div\",{className:\"statistics\",children:[/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/all_users/\";},title:\"\\u0412\\u0441\\u0435\\u0433\\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u043E\\u0432\",children:countAll_users}),\" /\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/not_working_today/\";},title:\"\\u0421\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F \\u043D\\u0435 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u044E\\u0442\",children:countWorked_today}),\" /\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/not_worked_yesterday/\";},title:\"\\u0412\\u0447\\u0435\\u0440\\u0430 \\u043D\\u0435 \\u0440\\u0430\\u0431\\u043E\\u0442\\u0430\\u043B\\u0438\",children:countWorked_yesterday}),\" /\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/sick_today/\";},title:\"\\u0421\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F \\u0431\\u043E\\u043B\\u0435\\u044E\\u0442\",children:countSickLeave_today}),\" /\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/sick_yesterday/\";},title:\"\\u0412\\u0447\\u0435\\u0440\\u0430 \\u0431\\u043E\\u043B\\u0435\\u043B\\u0438\",children:countSick_yesterday}),\" /\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/vacation_today/\";},title:\"\\u0421\\u0435\\u0433\\u043E\\u0434\\u043D\\u044F \\u0432 \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0435\",children:countVacation_today}),\"/\",/*#__PURE__*/_jsx(Link,{className:\"topbarLinkCount\",onClick:function onClick(){return window.location.href=\"/vacation_yesterday/\";},title:\"\\u0412\\u0447\\u0435\\u0440\\u0430 \\u0432 \\u043E\\u0442\\u043F\\u0443\\u0441\\u043A\\u0435\",children:countVacation_yesterday})]}):''});}export default Statistics;","map":{"version":3,"sources":["D:/time_app/client/src/components/Topbar/Statistics/Statistics.jsx"],"names":["React","useEffect","useState","Link","axios","Statistics","localUser","JSON","parse","localStorage","getItem","countAll_users","setCountAll_users","countWorked_today","setCountWorked_today","countWorked_yesterday","setCountWorked_yesterday","countSickLeave_today","setCountSickLeave_today","countSick_yesterday","setCountSick_yesterday","countVacation_today","setCountVacation_today","countVacation_yesterday","setCountVacation_yesterday","typework","get","res","get_statistics_all_users","getUsers","id","_id","isAdmin","post","data","length","window","location","href"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\nfunction Statistics () {\r\n    const localUser = JSON.parse(localStorage.getItem('user'))\r\n    const [countAll_users, setCountAll_users] = useState(0)\r\n    const [countWorked_today, setCountWorked_today] = useState(0)\r\n    const [countWorked_yesterday, setCountWorked_yesterday] = useState(0)\r\n    const [countSickLeave_today, setCountSickLeave_today] = useState(0)\r\n    const [countSick_yesterday, setCountSick_yesterday] = useState(0)\r\n    const [countVacation_today, setCountVacation_today] = useState(0)\r\n    const [countVacation_yesterday, setCountVacation_yesterday] = useState(0)\r\n\r\n    useEffect(() => {\r\n        const typework = async () => {\r\n            const res = await axios.get('/api/typework_status/')\r\n        }\r\n\r\n        const get_statistics_all_users = async () => {\r\n            const getUsers = {\r\n                id: localUser._id\r\n            }\r\n            if (localUser.isAdmin === true) {\r\n                const res = await axios.post('/api/get_statistics_all_users', getUsers)\r\n\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['all_users']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['all_users']=0\r\n                }else{\r\n                    setCountAll_users(res.data[0]['get_statistics_all_users'][0]['all_users'].length)\r\n                }\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['not_working_today']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['not_working_today']=0\r\n                }else{\r\n                    setCountWorked_today(res.data[0]['get_statistics_all_users'][0]['not_working_today'].length)\r\n                }\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday']=0\r\n                }else{\r\n                    setCountWorked_yesterday(res.data[0]['get_statistics_all_users'][0]['not_worked_yesterday'].length)\r\n                }\r\n\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['sick_today']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['sick_today']=0\r\n                }else {\r\n                    setCountSickLeave_today(res.data[0]['get_statistics_all_users'][0]['sick_today'].length)\r\n                }\r\n\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['sick_yesterday']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['sick_yesterday']=0\r\n                }else{\r\n                    setCountSick_yesterday(res.data[0]['get_statistics_all_users'][0]['sick_yesterday'].length)\r\n                }\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['vacation_today']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['vacation_today']=0\r\n                }else{\r\n                    setCountVacation_today(res.data[0]['get_statistics_all_users'][0]['vacation_today'].length)\r\n                }\r\n\r\n                if(res.data[0]['get_statistics_all_users'][0]['vacation_yesterday']===null){\r\n                    res.data[0]['get_statistics_all_users'][0]['vacation_yesterday']=0\r\n                }else{\r\n                    setCountVacation_yesterday(res.data[0]['get_statistics_all_users'][0]['vacation_yesterday'].length)\r\n                }\r\n            }\r\n        }\r\n        typework()\r\n        get_statistics_all_users()\r\n}, [])\r\n\r\n        return (\r\n            <div className=\"topbarCenter\">\r\n                {localUser.isAdmin ?\r\n                    <div className='statistics'>\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/all_users/`}\r\n                              title=\"Всего сотрудников\">{countAll_users}</Link> /\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/not_working_today/`}\r\n                              title=\"Сегодня не работают\">{countWorked_today}</Link> /\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/not_worked_yesterday/`}\r\n                              title=\"Вчера не работали\">{countWorked_yesterday}</Link> /\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/sick_today/`}\r\n                              title=\"Сегодня болеют\">{countSickLeave_today}</Link> /\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/sick_yesterday/`}\r\n                              title=\"Вчера болели\">{countSick_yesterday}</Link> /\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/vacation_today/`}\r\n                              title=\"Сегодня в отпуске\">{countVacation_today}</Link>/\r\n                        <Link className=\"topbarLinkCount\" onClick={() => window.location.href = `/vacation_yesterday/`}\r\n                              title=\"Вчера в отпуске\">{countVacation_yesterday}</Link>\r\n                    </div> : ''\r\n                }\r\n            </div>\r\n        )\r\n}\r\n\r\nexport default Statistics;"]},"metadata":{},"sourceType":"module"}