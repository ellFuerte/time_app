{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import axios from\"axios\";import Role from'./Role.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Roles(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),roles=_useState2[0],setRoles=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),users=_useState4[0],setUsers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),filteredUsers=_useState6[0],setFilteredUsers=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),searchTermUsers=_useState8[0],setSearchTermUsers=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),userId=_useState10[0],setUserId=_useState10[1];useEffect(function(){var fetchData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var resRoles,rolesData,resUsers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get('/api/roles/');case 3:resRoles=_context.sent;rolesData=resRoles.data[0].get_roles;setRoles(rolesData);_context.next=8;return axios.get('/api/user/');case 8:resUsers=_context.sent;setUsers(resUsers.data);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.error('Error fetching data:',_context.t0);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function fetchData(){return _ref.apply(this,arguments);};}();fetchData();},[]);var handleInputChangeUsers=function handleInputChangeUsers(e){var termCities=e.target.value;if(termCities.length===0){setUserId('');}setSearchTermUsers(termCities);if(termCities===''){setFilteredUsers([]);return;}var filtered=users.filter(function(user){return user.user_name&&user.user_name.toLowerCase().includes(termCities.toLowerCase());});setFilteredUsers(filtered);};var handleUserClickCities=function handleUserClickCities(user_name,id){setSearchTermUsers(user_name);setFilteredUsers([]);setUserId(id);};var addRole=function addRole(){setUserId('');setSearchTermUsers('');};return/*#__PURE__*/_jsxs(\"div\",{className:\"ReportsButton\",children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:'200px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"RoleWrapper\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0418\\u043C\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputRole\",children:[/*#__PURE__*/_jsx(\"input\",{className:\"ModalInputUpdate\",type:\"text\",value:searchTermUsers,onChange:handleInputChangeUsers}),filteredUsers.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"divInputRole1\",children:filteredUsers.map(function(user,id){return/*#__PURE__*/_jsx(\"div\",{className:\"selectNameDiv\",onClick:function onClick(){return handleUserClickCities(user.user_name,user.id);},children:user.user_name},id);})})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"\\u0420\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"select\",{className:\"ModalInputUpdate\",children:roles.map(function(role,index){return/*#__PURE__*/_jsx(\"option\",{value:role.id,children:role.name},index);})})]})]}),/*#__PURE__*/_jsx(\"div\",{style:{height:'30px'},children:userId?/*#__PURE__*/_jsx(\"button\",{onClick:addRole,className:\"AddRole\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C\"}):''}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"table\",{className:\"skills-table\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{className:\"skills-header\",children:[/*#__PURE__*/_jsx(\"th\",{children:\"\\u0418\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0420\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"th\",{})]})}),/*#__PURE__*/_jsxs(\"tr\",{className:\"skill-item\",children:[/*#__PURE__*/_jsx(\"td\",{}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"select\",{children:/*#__PURE__*/_jsx(\"option\",{})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"SkillButton\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})})]}),/*#__PURE__*/_jsx(\"tbody\",{})]})})]});}export default Roles;","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/AdminPanel/Role/Role.jsx"],"names":["React","useEffect","useState","axios","Role","Roles","roles","setRoles","users","setUsers","filteredUsers","setFilteredUsers","searchTermUsers","setSearchTermUsers","userId","setUserId","fetchData","get","resRoles","rolesData","data","get_roles","resUsers","console","error","handleInputChangeUsers","e","termCities","target","value","length","filtered","filter","user","user_name","toLowerCase","includes","handleUserClickCities","id","addRole","display","gap","map","role","index","name","height"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from \"axios\";\r\nimport Role from './Role.css'\r\nfunction Roles() {\r\n    const [roles, setRoles] = useState([]);\r\n    const [users, setUsers] = useState([]);\r\n    const [filteredUsers, setFilteredUsers] = useState([]);\r\n    const [searchTermUsers, setSearchTermUsers] = useState('');\r\n    const [userId, setUserId] = useState('');\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            try {\r\n                const resRoles = await axios.get('/api/roles/');\r\n                const rolesData = resRoles.data[0].get_roles;\r\n                setRoles(rolesData);\r\n\r\n                const resUsers = await axios.get('/api/user/');\r\n                setUsers(resUsers.data);\r\n            } catch (error) {\r\n                console.error('Error fetching data:', error);\r\n            }\r\n        };\r\n\r\n        fetchData();\r\n    }, []);\r\n\r\n    const handleInputChangeUsers = (e) => {\r\n        const termCities = e.target.value;\r\n\r\n        if(termCities.length===0){\r\n            setUserId('')\r\n        }\r\n        setSearchTermUsers(termCities);\r\n\r\n        if (termCities === '') {\r\n            setFilteredUsers([]);\r\n            return;\r\n        }\r\n\r\n        const filtered = users.filter(user =>\r\n            user.user_name && user.user_name.toLowerCase().includes(termCities.toLowerCase())\r\n        );\r\n        setFilteredUsers(filtered);\r\n    };\r\n\r\n    const handleUserClickCities = (user_name, id) => {\r\n            setSearchTermUsers(user_name)\r\n            setFilteredUsers([])\r\n            setUserId(id)\r\n    }\r\n\r\n    const addRole = () => {\r\n    setUserId('')\r\n    setSearchTermUsers('')\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"ReportsButton\">\r\n            <div style={{ display: 'flex', gap: '200px' }}>\r\n                <div className='RoleWrapper'>\r\n                    <label>Имя сотрудника</label>\r\n                    <div className='inputRole'>\r\n                        <input className=\"ModalInputUpdate\" type=\"text\"\r\n                               value={searchTermUsers}\r\n                               onChange={handleInputChangeUsers} />\r\n\r\n                        {filteredUsers.length > 0 && (\r\n                            <div className='divInputRole1'>\r\n                                {filteredUsers.map((user, id) => (\r\n                                    <div className='selectNameDiv' key={id} onClick={() => handleUserClickCities(user.user_name, user.id)}>\r\n                                        {user.user_name}\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div>\r\n                    <label>Роль</label>\r\n                    <select className=\"ModalInputUpdate\">\r\n                        {roles.map((role, index) => (\r\n                            <option key={index} value={role.id}>\r\n                                {role.name}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                </div>\r\n            </div>\r\n            <div style={{ height: '30px'}}>\r\n                {userId ?\r\n                    <button onClick={addRole} className=\"AddRole\">\r\n                        Добавить\r\n                    </button>\r\n                    :''\r\n                }\r\n            </div>\r\n            <div>\r\n                <table className=\"skills-table\">\r\n                    <thead>\r\n                    <tr className=\"skills-header\">\r\n                        <th>Имя</th>\r\n                        <th>Роль</th>\r\n                        <th></th>\r\n                    </tr>\r\n                    </thead>\r\n                    <tr className=\"skill-item\">\r\n                        <td>\r\n\r\n                        </td>\r\n                        <td>\r\n                            <select>\r\n                                <option>\r\n\r\n                                </option>\r\n                            </select>\r\n                        </td>\r\n                        <td><button className='SkillButton'>Удалить</button></td>\r\n                    </tr>\r\n                    <tbody>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Roles;"]},"metadata":{},"sourceType":"module"}