{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"./VcanciesItem.css\";import moment from\"moment\";import React,{useEffect,useRef,useState}from\"react\";import{Link}from'react-router-dom';import axios from\"axios\";import ModalVacancies from\"../Templates/ModalVacancies/ModalVacancies\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var VacanciesItem=function VacanciesItem(_ref){var department=_ref.department,vacancies=_ref.vacancies,status=_ref.status;var localUser=JSON.parse(localStorage.getItem('user'));var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),selectDep=_useState2[0],setSelectDep=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),company=_useState4[0],setCompany=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),selectCompany=_useState6[0],setSelectCompany=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),selectItc=_useState8[0],setSelectItc=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),projectItem=_useState10[0],setProjectItem=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),plannedReleaseDate=_useState14[0],setPlannedReleaseDate=_useState14[1];var _useState15=useState(\"\"),_useState16=_slicedToArray(_useState15,2),vacanciesId=_useState16[0],setVacanciesId=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalVacations=_useState18[0],setModalVacations=_useState18[1];var _useState19=useState(\"\"),_useState20=_slicedToArray(_useState19,2),inputValue=_useState20[0],setInputValue=_useState20[1];var _useState21=useState(\"\"),_useState22=_slicedToArray(_useState21,2),old_user=_useState22[0],setOld_user=_useState22[1];var _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),inputValueDescription=_useState24[0],setInputValueDescription=_useState24[1];var _useState25=useState(\"\"),_useState26=_slicedToArray(_useState25,2),inputValueStatuses=_useState26[0],setInputValueStatuses=_useState26[1];var _useState27=useState(\"\"),_useState28=_slicedToArray(_useState27,2),inputValueGrade=_useState28[0],setInputValueGrade=_useState28[1];var _useState29=useState(''),_useState30=_slicedToArray(_useState29,2),user_name=_useState30[0],setUser_name=_useState30[1];var date=moment().format('YYYY-MM-DD');var _useState31=useState(''),_useState32=_slicedToArray(_useState31,2),searchTerm=_useState32[0],setSearchTerm=_useState32[1];var _useState33=useState([]),_useState34=_slicedToArray(_useState33,2),userId=_useState34[0],setUserId=_useState34[1];var _useState35=useState([]),_useState36=_slicedToArray(_useState35,2),filteredUsers=_useState36[0],setFilteredUsers=_useState36[1];var _useState37=useState([]),_useState38=_slicedToArray(_useState37,2),users=_useState38[0],setUsers=_useState38[1];var _useState39=useState(''),_useState40=_slicedToArray(_useState39,2),selectedVacanciesName=_useState40[0],setSelectedVacanciesName=_useState40[1];var _useState41=useState(''),_useState42=_slicedToArray(_useState41,2),selectedVacanciesStatuses=_useState42[0],setSelectedVacanciesStatuses=_useState42[1];var _useState43=useState(''),_useState44=_slicedToArray(_useState43,2),selectedVacanciesDescription=_useState44[0],setSelectedVacanciesDescription=_useState44[1];var _useState45=useState(''),_useState46=_slicedToArray(_useState45,2),selectedVacanciesGrade=_useState46[0],setSelectedVacanciesGrade=_useState46[1];var statusRef=useRef();var departRef=useRef();var companyRef=useRef();var ITCRef=useRef();var projectRef=useRef();var DateReleaseRef=useRef();var searchRef=useRef();var _useState47=useState(''),_useState48=_slicedToArray(_useState47,2),startDate=_useState48[0],setStartDate=_useState48[1];// начальная дата фильтра\nvar _useState49=useState(''),_useState50=_slicedToArray(_useState49,2),endDate=_useState50[0],setEndDate=_useState50[1];// конечная дата фильтра\nvar _useState51=useState([]),_useState52=_slicedToArray(_useState51,2),deps=_useState52[0],setDeps=_useState52[1];useEffect(function(){var Department=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var departs,company,user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/departments/');case 2:departs=_context.sent;setDeps(departs.data);_context.next=6;return axios.get('/api/Vacations/?company=company');case 6:company=_context.sent;setCompany(company.data);_context.next=10;return axios.get('/api/user');case 10:user=_context.sent;setUsers(user.data);case 12:case\"end\":return _context.stop();}}},_callee);}));return function Department(){return _ref2.apply(this,arguments);};}();Department();},[]);var handleNameInputChange=function handleNameInputChange(e){setInputValue(e.target.value);};// Обработчик изменения значения для поля ввода с grade\nvar handleDescriptionInputChange=function handleDescriptionInputChange(e){setInputValueDescription(e.target.value);};var handleGradeInputChange=function handleGradeInputChange(e){// Проверяем, является ли введенное значение числом (включая пустое значение)\nif(/^\\d*$/.test(e.target.value)){setInputValueGrade(e.target.value);}};var selectValueStatus=function selectValueStatus(){setInputValueStatuses(statusRef.current.value);};var selectDeps=function selectDeps(){setSelectDep(departRef.current.value);};var companySelect=function companySelect(){setSelectCompany(companyRef.current.value);};var SelectITC=function SelectITC(){setSelectItc(ITCRef.current.value);};var Project=function Project(e){if(/^\\d*$/.test(e.target.value)){setProjectItem(e.target.value);}};var DataCurrent=function DataCurrent(){setPlannedReleaseDate(DateReleaseRef.current.value);};var ChangeDataButton=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var ChangeData,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:ChangeData={namevacanciesId:vacanciesId,namevacancies:inputValue,description:inputValueDescription,grade:inputValueGrade,statuses:statusRef.current.value,users:userId.length===0?old_user:userId,search:searchTerm,old_user:old_user,deps:selectDep,company_id:selectCompany,vacancy_code:selectItc,project_id:projectItem,planned_release_date:plannedReleaseDate===''?null:plannedReleaseDate};if(!(statusRef.current.value==='3'&&old_user===null&&userId.length<1)){_context2.next=5;break;}setMessage('Сотрудник не назначен');_context2.next=10;break;case 5:_context2.next=7;return axios.put('/api/Vacations/',ChangeData);case 7:res=_context2.sent;setMessage('Сохранено');window.location.reload();case 10:case\"end\":return _context2.stop();}}},_callee2);}));return function ChangeDataButton(){return _ref3.apply(this,arguments);};}();var handleInputChange=function handleInputChange(e){var term=e.target.value;if(term===''){setSearchTerm(null);}else{setSearchTerm(term);}var filtered=users.filter(function(user){return user.user_name&&user.user_name.toLowerCase().includes(term.toLowerCase());});if(term===''){setUser_name('');}else{setFilteredUsers(filtered);// всегда устанавливаем filteredUsers\n}};var handleClick=function handleClick(name,grade,id,description,status_id,user_name,user_id,department_id,company_id,vacancy_code,project_id,planned_release_date){if(localUser.isAdmin===true){if(user_name===null){setUser_name([]);}else{setUser_name(user_name);}setFilteredUsers([]);setMessage([]);setModalVacations(true);setVacanciesId(id);setSelectedVacanciesName(name);setInputValue(name);// Установка начального значения для name\nsetSelectedVacanciesDescription(description);setInputValueDescription(description);setSelectedVacanciesGrade(grade);setInputValueGrade(grade);// Установка начального значения для grade\nsetSelectedVacanciesStatuses(status_id);setInputValueStatuses(status_id);setOld_user(user_id);setSelectDep(department_id);setSelectCompany(company_id);setSelectItc(vacancy_code);setProjectItem(project_id);setPlannedReleaseDate(planned_release_date);}};var handleUserClick=function handleUserClick(userName,userId){setUserId(userId);setSearchTerm(userName);setFilteredUsers([]);};var getColorByStatusId=function getColorByStatusId(statusId){switch(statusId){case 20:return'Reserve';//  Резерв Установите Белый цвет для статуса 1\ncase 30:return'Selection';// Подбор Установите желтый цвет для статуса 2\ncase 50:return'Securely';// Обеспеченно Установите зелёный цвет для статуса 3\ncase 10:return'Liquidated';// Ликвидированно Установите белый прозрачный цвет для статуса 4\ncase 40:return'Finalist';//  Финалист Установите красный цвет для статуса 5\n}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"departmentName\",children:department}),/*#__PURE__*/_jsxs(\"div\",{className:\"vacancies-container\",children:[vacancies.map(function(vac){return/*#__PURE__*/_jsx(\"div\",{className:\"angry-grid1\"+getColorByStatusId(vac.status_id),onClick:function onClick(){return handleClick(vac.name,vac.grade,vac.id,vac.description,vac.status_id,vac.user_name,vac.user_id,vac.department_id,vac.company_id,vac.vacancy_code,vac.project_id,vac.planned_release_date);},children:/*#__PURE__*/_jsxs(\"div\",{id:\"cssportal-grid\",children:[/*#__PURE__*/_jsx(\"div\",{id:\"div1\"}),/*#__PURE__*/_jsx(\"div\",{id:\"div2\",children:vac.user_name}),/*#__PURE__*/_jsx(\"div\",{id:\"div3\",children:date===vac.create_date?'NEW':''}),/*#__PURE__*/_jsx(\"div\",{id:\"div4\"}),/*#__PURE__*/_jsx(\"div\",{id:\"div5\",children:vac.name}),/*#__PURE__*/_jsx(\"div\",{id:\"div6\"}),/*#__PURE__*/_jsx(\"div\",{id:\"div7\"}),/*#__PURE__*/_jsx(\"div\",{id:\"div8\",children:vac.vacancy_code}),/*#__PURE__*/_jsx(\"div\",{id:\"div9\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"div10\",children:[\"\\u0413\\u0440\\u0435\\u0439\\u0434: \",vac.grade]}),/*#__PURE__*/_jsx(\"div\",{id:\"div11\",children:vac.status_name}),/*#__PURE__*/_jsxs(\"div\",{id:\"div12\",children:[\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442: \",vac.project_id]}),/*#__PURE__*/_jsx(\"div\",{id:\"div13\",children:vac.company_name})]})},vac.id);}),/*#__PURE__*/_jsxs(ModalVacancies,{active:modalVacations,setActive:setModalVacations,children:[/*#__PURE__*/_jsx(\"div\",{className:\"MessageItemVacancies\",children:/*#__PURE__*/_jsx(\"span\",{children:message})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"ModalInputVacancies\",value:inputValue,onChange:handleNameInputChange})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"textarea\",{className:\"textDescription\",value:inputValueDescription,onChange:handleDescriptionInputChange})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"select\",{ref:departRef,value:selectDep,onChange:selectDeps,className:\"InputVacanciesItemDeps\",children:deps.map(function(dep,name){return/*#__PURE__*/_jsx(\"option\",{value:dep.id,children:dep.department_name},name);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"select\",{ref:statusRef,value:inputValueStatuses,onChange:selectValueStatus,className:\"InputVacanciesItemSelect\",children:status.map(function(status,name){return/*#__PURE__*/_jsx(\"option\",{value:status.id,children:status.name},name);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0413\\u0440\\u0435\\u0439\\u0434:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:inputValueGrade,onChange:handleGradeInputChange,placeholder:\"\\u0413\\u0440\\u0435\\u0439\\u0434\",className:\"InputVacanciesItem\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"select\",{ref:companyRef,value:selectCompany,onChange:companySelect,className:\"InputVacanciesItemSelect\",children:company.map(function(company,name){return/*#__PURE__*/_jsx(\"option\",{value:company.id,children:company.name},name);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u043C\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0418\\u043C\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\",value:searchTerm||user_name,onChange:handleInputChange,className:\"InputVacanciesItem\"}),old_user?/*#__PURE__*/_jsx(Link,{className:\"ProfileLinkVacancies\",style:{paddingLeft:'10px'},to:\"/profile/\".concat(old_user),children:\"\\u041F\\u0435\\u0440\\u0435\\u0439\\u0442\\u0438 \\u0432 \\u043F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C\"}):'',filteredUsers.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"userListContainer\",children:filteredUsers.map(function(user,index){return/*#__PURE__*/_jsx(\"div\",{className:\"selectNameDiv\",value:user.id,onClick:function onClick(){return handleUserClick(user.user_name,user.id);},children:user.user_name},index);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0414\\u0430\\u0442\\u0430 \\u0432\\u044B\\u0445\\u043E\\u0434\\u0430:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",ref:DateReleaseRef,placeholder:\"\\u0418\\u0422\\u0421\",className:\"InputVacanciesItem\",value:plannedReleaseDate||'',onChange:DataCurrent})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u0418\\u0422\\u0421:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:ITCRef,value:selectItc,onChange:SelectITC,placeholder:\"\\u0418\\u0422\\u0421\",className:\"InputVacanciesItem\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442:\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:projectRef,value:projectItem,onChange:Project,placeholder:\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442(\\u041D\\u0435\\u0442 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430=0)\",className:\"InputVacanciesItem\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"divHistory\",children:\"\\u0418\\u0441\\u0442\\u043E\\u0440\\u0438\\u044F\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",onClick:ChangeDataButton,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})})]})]})]})]});};export default VacanciesItem;","map":{"version":3,"sources":["D:/time_app/client/src/components/VacanciesItem/VacanciesItem.jsx"],"names":["moment","React","useEffect","useRef","useState","Link","axios","ModalVacancies","VacanciesItem","department","vacancies","status","localUser","JSON","parse","localStorage","getItem","selectDep","setSelectDep","company","setCompany","selectCompany","setSelectCompany","selectItc","setSelectItc","projectItem","setProjectItem","message","setMessage","plannedReleaseDate","setPlannedReleaseDate","vacanciesId","setVacanciesId","modalVacations","setModalVacations","inputValue","setInputValue","old_user","setOld_user","inputValueDescription","setInputValueDescription","inputValueStatuses","setInputValueStatuses","inputValueGrade","setInputValueGrade","user_name","setUser_name","date","format","searchTerm","setSearchTerm","userId","setUserId","filteredUsers","setFilteredUsers","users","setUsers","selectedVacanciesName","setSelectedVacanciesName","selectedVacanciesStatuses","setSelectedVacanciesStatuses","selectedVacanciesDescription","setSelectedVacanciesDescription","selectedVacanciesGrade","setSelectedVacanciesGrade","statusRef","departRef","companyRef","ITCRef","projectRef","DateReleaseRef","searchRef","startDate","setStartDate","endDate","setEndDate","deps","setDeps","Department","get","departs","data","user","handleNameInputChange","e","target","value","handleDescriptionInputChange","handleGradeInputChange","test","selectValueStatus","current","selectDeps","companySelect","SelectITC","Project","DataCurrent","ChangeDataButton","ChangeData","namevacanciesId","namevacancies","description","grade","statuses","length","search","company_id","vacancy_code","project_id","planned_release_date","put","res","window","location","reload","handleInputChange","term","filtered","filter","toLowerCase","includes","handleClick","name","id","status_id","user_id","department_id","isAdmin","handleUserClick","userName","getColorByStatusId","statusId","map","vac","create_date","status_name","company_name","dep","department_name","paddingLeft","index"],"mappings":"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","sourcesContent":["import \"./VcanciesItem.css\"\r\nimport moment from \"moment\";\r\nimport React, {useEffect, useRef, useState} from \"react\";\r\nimport {Link} from 'react-router-dom'\r\nimport axios from \"axios\";\r\nimport ModalVacancies from \"../Templates/ModalVacancies/ModalVacancies\";\r\n\r\n\r\nconst VacanciesItem =({department,vacancies,status})=> {\r\n    const localUser = JSON.parse(localStorage.getItem('user'))\r\n\r\n    const [selectDep, setSelectDep] = useState(\"\")\r\n\r\n    const [company, setCompany] = useState([])\r\n    const [selectCompany, setSelectCompany] = useState([])\r\n\r\n\r\n    const [selectItc, setSelectItc] = useState([])\r\n\r\n    const [projectItem, setProjectItem] = useState([])\r\n\r\n    const [message, setMessage] = useState(\"\")\r\n\r\n\r\n    const [plannedReleaseDate, setPlannedReleaseDate] = useState([])\r\n\r\n    const [vacanciesId, setVacanciesId] = useState(\"\")\r\n\r\n    const [modalVacations, setModalVacations] = useState(false)\r\n\r\n    const [inputValue, setInputValue] = useState(\"\")\r\n\r\n    const [old_user, setOld_user] = useState(\"\")\r\n\r\n    const [inputValueDescription, setInputValueDescription] = useState(\"\")\r\n\r\n    const [inputValueStatuses, setInputValueStatuses] = useState(\"\")\r\n\r\n    const [inputValueGrade, setInputValueGrade] = useState(\"\")\r\n\r\n    const [user_name, setUser_name] = useState('')\r\n\r\n    const date = moment().format('YYYY-MM-DD');\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n    const [userId, setUserId] = useState([])\r\n    const [filteredUsers, setFilteredUsers] = useState([]);\r\n    const [users, setUsers] = useState([])\r\n\r\n    const [selectedVacanciesName, setSelectedVacanciesName] = useState('');\r\n    const [selectedVacanciesStatuses, setSelectedVacanciesStatuses] = useState('');\r\n    const [selectedVacanciesDescription, setSelectedVacanciesDescription] = useState('');\r\n    const [selectedVacanciesGrade, setSelectedVacanciesGrade] = useState('');\r\n\r\n    const statusRef = useRef()\r\n    const departRef = useRef()\r\n    const companyRef = useRef()\r\n    const ITCRef = useRef()\r\n    const projectRef = useRef()\r\n    const DateReleaseRef = useRef()\r\n\r\n    const searchRef = useRef()\r\n\r\n    const [startDate, setStartDate] = useState(''); // начальная дата фильтра\r\n    const [endDate, setEndDate] = useState(''); // конечная дата фильтра\r\n\r\n    const [deps, setDeps] = useState([])\r\n\r\n\r\n\r\n    useEffect(() => {\r\n        const Department = async () => {\r\n\r\n            const departs = await axios.get('/api/departments/')\r\n            setDeps(departs.data)\r\n            const company = await axios.get('/api/Vacations/?company=company')\r\n            setCompany(company.data)\r\n            const user = await axios.get('/api/user')\r\n            setUsers(user.data)\r\n\r\n        }\r\n\r\n        Department()\r\n    }, [])\r\n\r\n\r\n\r\n    const handleNameInputChange = (e) => {\r\n        setInputValue(e.target.value);\r\n    }\r\n\r\n    // Обработчик изменения значения для поля ввода с grade\r\n    const handleDescriptionInputChange = (e) => {\r\n        setInputValueDescription(e.target.value);\r\n    }\r\n\r\n    const handleGradeInputChange = (e) => {\r\n        // Проверяем, является ли введенное значение числом (включая пустое значение)\r\n        if (/^\\d*$/.test(e.target.value)) {\r\n            setInputValueGrade(e.target.value);\r\n        }\r\n    };\r\n\r\n    const selectValueStatus = () => {\r\n        setInputValueStatuses(statusRef.current.value)\r\n    }\r\n\r\n    const selectDeps = () => {\r\n        setSelectDep(departRef.current.value)\r\n    }\r\n\r\n    const companySelect = () => {\r\n        setSelectCompany(companyRef.current.value)\r\n    }\r\n\r\n    const SelectITC = () => {\r\n        setSelectItc(ITCRef.current.value)\r\n    }\r\n\r\n    const Project = (e) => {\r\n        if (/^\\d*$/.test(e.target.value)) {\r\n            setProjectItem(e.target.value);\r\n        }\r\n    }\r\n\r\n    const DataCurrent = () => {\r\n        setPlannedReleaseDate(DateReleaseRef.current.value)\r\n    }\r\n\r\n\r\n\r\n    const ChangeDataButton = async () => {\r\n\r\n        const ChangeData = {\r\n            namevacanciesId: vacanciesId,\r\n            namevacancies: inputValue,\r\n            description: inputValueDescription,\r\n            grade: inputValueGrade,\r\n            statuses: statusRef.current.value,\r\n            users: (userId.length===0 ? old_user : userId),\r\n            search: searchTerm,\r\n            old_user: old_user,\r\n            deps: selectDep,\r\n            company_id: selectCompany,\r\n            vacancy_code: selectItc,\r\n            project_id: projectItem,\r\n            planned_release_date:(plannedReleaseDate==='' ? null : plannedReleaseDate)\r\n        }\r\n        if (statusRef.current.value === '3' && old_user===null && userId.length<1) {\r\n            setMessage('Сотрудник не назначен')\r\n        }\r\n\r\n\r\n        else {\r\n            const res = await axios.put('/api/Vacations/', ChangeData)\r\n            setMessage('Сохранено')\r\n            window.location.reload()\r\n        }\r\n\r\n    }\r\n    const handleInputChange = (e) => {\r\n        const term = e.target.value;\r\n        if(term==='') {\r\n            setSearchTerm(null)\r\n        }\r\n        else {\r\n            setSearchTerm(term);\r\n        }\r\n        const filtered = users.filter(user =>\r\n            user.user_name && user.user_name.toLowerCase().includes(term.toLowerCase())\r\n        )\r\n\r\n        if (term === '') {\r\n            setUser_name('')\r\n        } else {\r\n            setFilteredUsers(filtered); // всегда устанавливаем filteredUsers\r\n        }\r\n    }\r\n\r\n\r\n    const handleClick = (name, grade,id,description,status_id,user_name,user_id,department_id,company_id,vacancy_code,project_id,planned_release_date) => {\r\n        if(localUser.isAdmin===true) {\r\n\r\n            if(user_name===null){\r\n                setUser_name([])\r\n            }else {\r\n                setUser_name(user_name)\r\n            }\r\n\r\n            setFilteredUsers([])\r\n            setMessage([])\r\n            setModalVacations(true);\r\n            setVacanciesId(id)\r\n            setSelectedVacanciesName(name);\r\n            setInputValue(name); // Установка начального значения для name\r\n\r\n\r\n            setSelectedVacanciesDescription(description)\r\n            setInputValueDescription(description)\r\n\r\n            setSelectedVacanciesGrade(grade);\r\n            setInputValueGrade(grade); // Установка начального значения для grade\r\n\r\n            setSelectedVacanciesStatuses(status_id)\r\n            setInputValueStatuses(status_id)\r\n\r\n            setOld_user(user_id)\r\n\r\n            setSelectDep(department_id)\r\n\r\n            setSelectCompany(company_id)\r\n\r\n            setSelectItc(vacancy_code)\r\n\r\n            setProjectItem(project_id)\r\n\r\n            setPlannedReleaseDate(planned_release_date)\r\n        }\r\n    };\r\n\r\n    const handleUserClick = (userName,userId) => {\r\n\r\n        setUserId(userId)\r\n        setSearchTerm(userName)\r\n        setFilteredUsers([])\r\n\r\n    }\r\n\r\n\r\n    const getColorByStatusId = (statusId) => {\r\n        switch (statusId) {\r\n            case 20:\r\n                return 'Reserve'; //  Резерв Установите Белый цвет для статуса 1\r\n            case 30:\r\n                return 'Selection'; // Подбор Установите желтый цвет для статуса 2\r\n            case 50:\r\n                return 'Securely'; // Обеспеченно Установите зелёный цвет для статуса 3\r\n            case 10:\r\n                return 'Liquidated'; // Ликвидированно Установите белый прозрачный цвет для статуса 4\r\n            case 40:\r\n                return 'Finalist'; //  Финалист Установите красный цвет для статуса 5\r\n\r\n        }\r\n    }\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <h2 className='departmentName'>{department}</h2>\r\n            <div className=\"vacancies-container\">\r\n                {vacancies.map(vac => (\r\n                    <div key={vac.id} className={\"angry-grid1\"+getColorByStatusId(vac.status_id)}\r\n                         onClick={() => handleClick(vac.name, vac.grade,vac.id,vac.description,vac.status_id,\r\n                             vac.user_name,vac.user_id,vac.department_id,vac.company_id,vac.vacancy_code,vac.project_id,vac.planned_release_date)}>\r\n\r\n                        <div id=\"cssportal-grid\">\r\n                            <div id=\"div1\"></div>\r\n                            <div id=\"div2\">{vac.user_name}</div>\r\n                            <div id=\"div3\">{date === vac.create_date ? 'NEW' : ''}</div>\r\n                            <div id=\"div4\"></div>\r\n                            <div id=\"div5\">{vac.name}</div>\r\n                            <div id=\"div6\"></div>\r\n                            <div id=\"div7\"></div>\r\n                            <div id=\"div8\">{vac.vacancy_code}</div>\r\n                            <div id=\"div9\"></div>\r\n                            <div id=\"div10\">Грейд: {vac.grade}</div>\r\n                            <div id=\"div11\">{vac.status_name}</div>\r\n                            <div id=\"div12\">Проект: {vac.project_id}</div>\r\n                            <div id=\"div13\">{vac.company_name}</div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n\r\n                ))}\r\n\r\n\r\n                <ModalVacancies active={modalVacations} setActive={setModalVacations}>\r\n                    <div className='MessageItemVacancies'>\r\n                        <span >{message}</span>\r\n                    </div>\r\n                    <div>\r\n                        <input type='text' className=\"ModalInputVacancies\"\r\n                               value={inputValue}\r\n                               onChange={handleNameInputChange}\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                    <textarea className='textDescription'\r\n                              value={inputValueDescription}\r\n                              onChange={handleDescriptionInputChange}\r\n                    />\r\n                    </div>\r\n                    <div>\r\n                        <span>Подразделение:</span><br/>\r\n                        <select ref={departRef}\r\n                                value={selectDep}\r\n                                onChange={selectDeps}\r\n                                className='InputVacanciesItemDeps'>\r\n                            {deps.map((dep, name) => <option key={name}\r\n                                                             value={dep.id}>{dep.department_name}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <span>Статус:</span><br/>\r\n                        <select ref={statusRef}\r\n                                value={inputValueStatuses}\r\n                                onChange={selectValueStatus}\r\n                                className='InputVacanciesItemSelect'>\r\n                            {status.map((status, name) => <option key={name}\r\n                                                                  value={status.id}>{status.name}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <span>Грейд:</span><br/>\r\n                        <input type='text'\r\n                               value={inputValueGrade}\r\n                               onChange={handleGradeInputChange}\r\n                               placeholder='Грейд'\r\n                               className='InputVacanciesItem'\r\n                        />\r\n                    </div>\r\n                    <div>\r\n                        <span>Компания:</span><br/>\r\n                        <select ref={companyRef}\r\n                                value={selectCompany}\r\n                                onChange={companySelect}\r\n                                className='InputVacanciesItemSelect'>\r\n                            {company.map((company, name) => <option key={name} value={company.id}>{company.name}</option>)}\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div className=\"container\">\r\n                        <div>\r\n\r\n                            <span>Имя сотрудника:</span><br/>\r\n                            <div className='inputDiv'>\r\n                                <input\r\n                                    type='text'\r\n                                    placeholder='Имя сотрудника'\r\n                                    value={searchTerm || user_name}\r\n                                    onChange={handleInputChange}\r\n                                    className='InputVacanciesItem'\r\n                                />\r\n\r\n                                {old_user ?<Link className='ProfileLinkVacancies' style={{paddingLeft:'10px'}} to={`/profile/${old_user}`}>Перейти в профиль</Link>:''}\r\n\r\n\r\n                                {filteredUsers.length > 0 && (\r\n                                    <div className=\"userListContainer\">\r\n                                        {filteredUsers.map((user, index) => (\r\n                                            <div className='selectNameDiv' key={index} value={user.id}\r\n                                                 onClick={() => handleUserClick(user.user_name, user.id)}>\r\n                                                {user.user_name}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                            <div>\r\n                                <span>Дата выхода:</span><br/>\r\n                                <input type='date'\r\n                                       ref={DateReleaseRef}\r\n                                       placeholder='ИТС'\r\n                                       className='InputVacanciesItem'\r\n                                       value={plannedReleaseDate || ''}\r\n                                       onChange={DataCurrent}\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <span>ИТС:</span><br/>\r\n                                <input type='text'\r\n                                       ref={ITCRef}\r\n                                       value={selectItc}\r\n                                       onChange={SelectITC}\r\n                                       placeholder='ИТС'\r\n                                       className='InputVacanciesItem'\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <span>Проект:</span><br/>\r\n                                <input type='text'\r\n                                       ref={projectRef}\r\n                                       value={projectItem}\r\n                                       onChange={Project}\r\n                                       placeholder='Проект(Нет проекта=0)'\r\n                                       className='InputVacanciesItem'\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <br/>\r\n                        <div className='divHistory'>\r\n                            История\r\n                        </div>\r\n                        <br/>\r\n                        <div>\r\n                            <button className=\"ModalButton\" type=\"submit\" onClick={ChangeDataButton}>\r\n                                Сохранить\r\n                            </button>\r\n                        </div>\r\n                    </div>\r\n                </ModalVacancies>\r\n            </div>\r\n        </>    )\r\n}\r\nexport default VacanciesItem"]},"metadata":{},"sourceType":"module"}