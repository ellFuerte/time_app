{"ast":null,"code":"var _jsxFileName = \"D:\\\\time_app\\\\client\\\\src\\\\components\\\\ProfileInfo\\\\Editing\\\\Editing.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState } from 'react';\nimport { Create } from \"@material-ui/icons\";\nimport Modal from \"../../Templates/Modal/Modal\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Editing() {\n  _s();\n\n  const [modalActive, setModalActive] = useState(false);\n  const [error, setError] = useState('');\n\n  const handleClick = async e => {\n    const name = user.user_name;\n    const part = name.split(' ');\n    e.preventDefault();\n    const newInfo = {\n      departmentId: modalDep.current.value || user.department_id,\n      email: email ? email : emailChange.toUpperCase(),\n      username: nameValue + ' ' + surnameValue,\n      _id: user.id,\n      isAdmin: user.isadmin,\n      see_child: user.see_child,\n      status: user.status,\n      main_department: user.main_department,\n      phone_number: phoneNumber.current.value === '' ? '' : phoneNumber.current.value,\n      additional_contact: additionalContact.current.value,\n      distribution_group: distributionGroup.current.value,\n      activity_profile: activityProfile.current.value,\n      city_id: citiesId,\n      cityPlaceChange: modalCityPlace.current.value\n    };\n\n    if (localUse._id !== username.username) {\n      const newInfo2 = {\n        departmentId: modalDep.current.value || user.department_id,\n        email: email ? email : emailChange.toUpperCase(),\n        username: nameValue + ' ' + surnameValue,\n        phone_number: phoneNumber.current.value === '' ? '' : phoneNumber.current.value,\n        additional_contact: additionalContact.current.value,\n        distribution_group: distributionGroup.current.value,\n        activity_profile: activityProfile.current.value,\n        city_id: citiesId,\n        _id: user.id,\n        cityPlaceChange: modalCityPlace.current.value\n      };\n      await axios.put('/api/user/', newInfo2);\n      window.location.reload();\n    } else {\n      await axios.put('/api/user/', newInfo);\n      delete newInfo.phone_number;\n      delete newInfo.additional_contact;\n      delete newInfo.distribution_group;\n      delete newInfo.activity_profile;\n      delete newInfo.city_id;\n      delete newInfo.cityPlaceChange;\n      localStorage.setItem('user', JSON.stringify({ ...newInfo\n      }));\n      setModalActive(false);\n      window.location.reload();\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Create, {\n      style: {\n        marginLeft: '5px',\n        fontSize: 'large',\n        cursor: 'pointer'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      active: modalActive,\n      setActive: setModalActive,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 21\n      }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modalError\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"modalLoginBox\",\n        onSubmit: handleClick,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0424\\u0430\\u043C\\u0438\\u043B\\u0438\\u044F\",\n            className: \"ModalInputUpdate\",\n            onChange: handleNameChange,\n            value: nameValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0418\\u043C\\u044F\",\n            className: \"ModalInputUpdate\",\n            onChange: handleSurnameChange,\n            value: surnameValue\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"Email\",\n            type: \"email\",\n            className: \"ModalInputUpdate\",\n            onChange: handleEmailChange,\n            value: email || emailChange,\n            minLength: 6\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0422\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\",\n            type: \"text\",\n            className: \"ModalInputUpdate\",\n            ref: phoneNumber,\n            onChange: handlePhoneChange,\n            value: phone || phoneChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0414\\u043E\\u043F \\u043A\\u043E\\u043D\\u0442\\u0430\\u043A\\u0442(\\u041D\\u043E\\u043C\\u0435\\u0440 \\u0442\\u0435\\u043B\\u0435\\u0444\\u043E\\u043D\\u0430,\\u0424\\u0418\\u041E,\\u0441\\u0442\\u0430\\u0442\\u0443\\u0441 \\u0447\\u0435\\u043B\\u043E\\u0432\\u0435\\u043A\\u0430)\",\n            type: \"text\",\n            className: \"ModalInputUpdate\",\n            ref: additionalContact,\n            onChange: additional_Contact,\n            value: additional_contact || additional_contact_change\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0413\\u0440\\u0443\\u043F\\u043F\\u0430 \\u0440\\u0430\\u0441\\u0441\\u044B\\u043B\\u043A\\u0438\",\n            type: \"text\",\n            className: \"ModalInputUpdate\",\n            ref: distributionGroup,\n            onChange: distribution_Group,\n            value: distribution_group || distribution_group_change\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u041F\\u0440\\u043E\\u0444\\u0438\\u043B\\u044C \\u0434\\u0435\\u044F\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E\\u0441\\u0442\\u0438\",\n            type: \"text\",\n            className: \"ModalInputUpdate\",\n            ref: activityProfile,\n            onChange: activity_Profile,\n            value: activity_profile || activity_profile_change\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            placeholder: \"\\u0413\\u043E\\u0440\\u043E\\u0434\",\n            type: \"text\",\n            className: \"ModalInputUpdate\",\n            ref: modalCity,\n            value: searchTermCities || cityName,\n            onChange: handleInputChangeCities\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 150,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [filteredCities.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"divSelectRegister\",\n              children: filteredCities.map((city, id) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"selectNameDiv\",\n                value: city.id,\n                onClick: () => handleUserClickCities(city.city_name, city.id),\n                children: city.city_name\n              }, id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 45\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 160,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              placeholder: \"\\u0410\\u0434\\u0440\\u0435\\u0441 \\u0444\\u0430\\u043A\\u0442\\u0438\\u0447\\u0435\\u0441\\u043A\\u043E\\u0433\\u043E \\u043F\\u0440\\u043E\\u0436\\u0438\\u0432\\u0430\\u043D\\u0438\\u044F\",\n              type: \"text\",\n              className: \"ModalInputUpdate\",\n              ref: modalCityPlace,\n              onChange: cityPlace,\n              value: CityPlace || CityPlace_Change\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 169,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 158,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"select\", {\n            value: selectedValue // Привязываем значение к selectedValue\n            ,\n            onChange: handleChange,\n            ref: modalDep,\n            className: \"ModalInputUpdateSelect\",\n            children: options.map(option => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: option.id,\n              children: option.name\n            }, option.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"ModalButton\",\n          type: \"submit\",\n          disabled: isFetching,\n          children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 193,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 73,\n    columnNumber: 13\n  }, this);\n}\n\n_s(Editing, \"KOlUA8lsKjrB0EZRg0crJeYUpLg=\");\n\n_c = Editing;\nexport default Editing;\n\nvar _c;\n\n$RefreshReg$(_c, \"Editing\");","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/Editing/Editing.jsx"],"names":["React","Component","useState","Create","Modal","axios","Editing","modalActive","setModalActive","error","setError","handleClick","e","name","user","user_name","part","split","preventDefault","newInfo","departmentId","modalDep","current","value","department_id","email","emailChange","toUpperCase","username","nameValue","surnameValue","_id","id","isAdmin","isadmin","see_child","status","main_department","phone_number","phoneNumber","additional_contact","additionalContact","distribution_group","distributionGroup","activity_profile","activityProfile","city_id","citiesId","cityPlaceChange","modalCityPlace","localUse","newInfo2","put","window","location","reload","localStorage","setItem","JSON","stringify","marginLeft","fontSize","cursor","handleNameChange","handleSurnameChange","handleEmailChange","handlePhoneChange","phone","phoneChange","additional_Contact","additional_contact_change","distribution_Group","distribution_group_change","activity_Profile","activity_profile_change","modalCity","searchTermCities","cityName","handleInputChangeCities","filteredCities","length","map","city","handleUserClickCities","city_name","cityPlace","CityPlace","CityPlace_Change","selectedValue","handleChange","options","option","isFetching"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react';\r\nimport { Create } from \"@material-ui/icons\";\r\nimport Modal from \"../../Templates/Modal/Modal\";\r\nimport axios from \"axios\";\r\n\r\nfunction Editing() {\r\n    const [modalActive, setModalActive] = useState(false)\r\n    const [error, setError] = useState('')\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const handleClick = async (e) => {\r\n\r\n        const name = user.user_name\r\n        const part = name.split(' ')\r\n        e.preventDefault()\r\n        const newInfo = {\r\n            departmentId: modalDep.current.value || user.department_id,\r\n            email: (email ? email : emailChange.toUpperCase()),\r\n            username: nameValue + ' ' + surnameValue,\r\n            _id: user.id,\r\n            isAdmin: user.isadmin,\r\n            see_child: user.see_child,\r\n            status: user.status,\r\n            main_department: user.main_department,\r\n            phone_number: (phoneNumber.current.value === '' ? '' : phoneNumber.current.value),\r\n            additional_contact: additionalContact.current.value,\r\n            distribution_group: distributionGroup.current.value,\r\n            activity_profile: activityProfile.current.value,\r\n            city_id: citiesId,\r\n            cityPlaceChange:modalCityPlace.current.value\r\n        }\r\n\r\n        if (localUse._id !== username.username) {\r\n            const newInfo2 = {\r\n                departmentId: modalDep.current.value || user.department_id,\r\n                email: (email ? email : emailChange.toUpperCase()),\r\n                username: nameValue + ' ' + surnameValue,\r\n                phone_number: (phoneNumber.current.value === '' ? '' : phoneNumber.current.value),\r\n                additional_contact: additionalContact.current.value,\r\n                distribution_group: distributionGroup.current.value,\r\n                activity_profile: activityProfile.current.value,\r\n                city_id: citiesId,\r\n                _id: user.id,\r\n                cityPlaceChange:modalCityPlace.current.value\r\n            }\r\n\r\n            await axios.put('/api/user/', newInfo2)\r\n            window.location.reload()\r\n        } else {\r\n            await axios.put('/api/user/', newInfo)\r\n            delete newInfo.phone_number\r\n            delete newInfo.additional_contact\r\n            delete newInfo.distribution_group\r\n            delete newInfo.activity_profile\r\n            delete newInfo.city_id\r\n            delete newInfo.cityPlaceChange\r\n            localStorage.setItem('user', JSON.stringify({...newInfo}))\r\n            setModalActive(false)\r\n            window.location.reload()\r\n        }\r\n    }\r\n\r\n        return (\r\n            <div>\r\n                <Create style={{marginLeft: '5px', fontSize: 'large', cursor: 'pointer'}}\r\n                       />\r\n\r\n\r\n                <Modal active={modalActive} setActive={setModalActive}>\r\n                    <h1>Изменение информации:</h1>\r\n                    <hr/>\r\n                    {error && <div className='modalError'>{error}</div>}\r\n                    <form className=\"modalLoginBox\" onSubmit={handleClick}>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Фамилия\"\r\n                                className=\"ModalInputUpdate\"\r\n                                onChange={handleNameChange}\r\n                                value={nameValue}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Имя\"\r\n                                className=\"ModalInputUpdate\"\r\n                                onChange={handleSurnameChange}\r\n                                value={surnameValue}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Email\"\r\n                                type=\"email\"\r\n                                className=\"ModalInputUpdate\"\r\n                                onChange={handleEmailChange}\r\n                                value={email || emailChange}\r\n                                minLength={6}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Телефон\"\r\n                                type='text'\r\n                                className=\"ModalInputUpdate\"\r\n                                ref={phoneNumber}\r\n                                onChange={handlePhoneChange}\r\n                                value={phone || phoneChange}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Доп контакт(Номер телефона,ФИО,статус человека)\"\r\n                                type='text'\r\n                                className=\"ModalInputUpdate\"\r\n                                ref={additionalContact}\r\n                                onChange={additional_Contact}\r\n                                value={additional_contact || additional_contact_change}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Группа рассылки\"\r\n                                type='text'\r\n                                className=\"ModalInputUpdate\"\r\n                                ref={distributionGroup}\r\n                                onChange={distribution_Group}\r\n                                value={distribution_group || distribution_group_change}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Профиль деятельности\"\r\n                                type='text'\r\n                                className=\"ModalInputUpdate\"\r\n                                ref={activityProfile}\r\n                                onChange={activity_Profile}\r\n                                value={activity_profile || activity_profile_change}\r\n                            />\r\n                        </div>\r\n                        <div>\r\n                            <input\r\n                                placeholder=\"Город\"\r\n                                type='text'\r\n                                className=\"ModalInputUpdate\"\r\n                                ref={modalCity}\r\n                                value={searchTermCities || cityName}\r\n                                onChange={handleInputChangeCities}\r\n                            />\r\n                            <div>\r\n                                {filteredCities.length > 0 && (\r\n                                    <div className='divSelectRegister'>\r\n                                        {filteredCities.map((city, id) => (\r\n                                            <div className='selectNameDiv' key={id} value={city.id}\r\n                                                 onClick={() => handleUserClickCities(city.city_name, city.id)}>\r\n                                                {city.city_name}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                                <input\r\n                                    placeholder=\"Адрес фактического проживания\"\r\n                                    type='text'\r\n                                    className=\"ModalInputUpdate\"\r\n                                    ref={modalCityPlace}\r\n                                    onChange={cityPlace}\r\n                                    value={CityPlace || CityPlace_Change}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div>\r\n                            <select\r\n                                value={selectedValue} // Привязываем значение к selectedValue\r\n                                onChange={handleChange}\r\n                                ref={modalDep}\r\n                                className=\"ModalInputUpdateSelect\"\r\n                            >\r\n                                {options.map((option) => (\r\n                                    <option key={option.id} value={option.id}>\r\n                                        {option.name}\r\n                                    </option>\r\n                                ))}\r\n                            </select>\r\n                        </div>\r\n                        <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\r\n                            Изменить\r\n                        </button>\r\n                    </form>\r\n                </Modal>\r\n            </div>\r\n\r\n        )\r\n}\r\n\r\nexport default Editing;"]},"metadata":{},"sourceType":"module"}