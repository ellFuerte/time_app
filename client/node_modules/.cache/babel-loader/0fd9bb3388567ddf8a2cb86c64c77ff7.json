{"ast":null,"code":"var _jsxFileName = \"D:\\\\time_app\\\\client\\\\src\\\\components\\\\ProfileInfo\\\\\\u0421hangePassword\\\\\\u0421hangePassword.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useRef, useState } from 'react';\nimport Modal from \"../../Templates/Modal/Modal\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction ChangePassword({\n  modalActivePass,\n  setModalActivePass\n}) {\n  _s();\n\n  const localUse = JSON.parse(localStorage.getItem('user'));\n  const [er, setErr] = useState('');\n  const modalOldPass = useRef();\n  const modalNewPass = useRef();\n  const modalNewPassAgain = useRef();\n\n  const handleChangePassword = async e => {\n    e.preventDefault();\n\n    if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\n      setErr('Новые пароли не совпадают');\n      return;\n    }\n\n    const passwords = {\n      userId: localUse._id,\n      password: localUse.password,\n      oldPassword: modalOldPass.current.value,\n      newPassword: modalNewPass.current.value\n    };\n\n    try {\n      await axios.put('/api/newPassword/', passwords);\n      setModalActivePass(false);\n      /*      localStorage.clear()\r\n            window.location.reload()\r\n            window.location.href = '/'*/\n    } catch (er) {\n      setErr('Старые пароли не совпадают');\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    active: modalActivePass,\n    setActive: setModalActivePass,\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 13\n    }, this), er && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modalError\",\n      children: er\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 20\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      className: \"modalLoginBox\",\n      onSubmit: handleChangePassword,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\\u0421\\u0442\\u0430\\u0440\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        type: \"password\",\n        className: \"inputChangePassword\",\n        ref: modalOldPass\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\",\n        type: \"password\",\n        className: \"inputChangePassword\",\n        ref: modalNewPass,\n        minLength: \"6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0435\\u0449\\u0451 \\u0440\\u0430\\u0437\",\n        type: \"password\",\n        className: \"inputChangePassword\",\n        ref: modalNewPassAgain,\n        minLength: \"6\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"ModalButtonChangePassword\",\n        type: \"submit\",\n        children: \"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n\n_s(ChangePassword, \"KXZxey7tQb1K+PKVGpMR6okcSOY=\");\n\n_c = ChangePassword;\nexport default ChangePassword;\n\nvar _c;\n\n$RefreshReg$(_c, \"ChangePassword\");","map":{"version":3,"sources":["D:/time_app/client/src/components/ProfileInfo/СhangePassword/СhangePassword.jsx"],"names":["React","useRef","useState","Modal","axios","ChangePassword","modalActivePass","setModalActivePass","localUse","JSON","parse","localStorage","getItem","er","setErr","modalOldPass","modalNewPass","modalNewPassAgain","handleChangePassword","e","preventDefault","current","value","passwords","userId","_id","password","oldPassword","newPassword","put"],"mappings":"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","sourcesContent":["import React, { useRef, useState } from 'react';\r\nimport Modal from \"../../Templates/Modal/Modal\";\r\nimport axios from \"axios\";\r\n\r\n\r\nfunction ChangePassword({modalActivePass,setModalActivePass}) {\r\n    const localUse = JSON.parse(localStorage.getItem('user'))\r\n    const [er, setErr] = useState('')\r\n    const modalOldPass = useRef()\r\n    const modalNewPass = useRef()\r\n    const modalNewPassAgain = useRef()\r\n\r\n    const handleChangePassword = async (e) => {\r\n        e.preventDefault()\r\n        if (modalNewPass.current.value !== modalNewPassAgain.current.value) {\r\n            setErr('Новые пароли не совпадают')\r\n            return\r\n        }\r\n        const passwords = {\r\n            userId: localUse._id,\r\n            password: localUse.password,\r\n            oldPassword: modalOldPass.current.value,\r\n            newPassword: modalNewPass.current.value\r\n        }\r\n        try {\r\n            await axios.put('/api/newPassword/', passwords)\r\n            setModalActivePass(false)\r\n            /*      localStorage.clear()\r\n                  window.location.reload()\r\n                  window.location.href = '/'*/\r\n        } catch (er) {\r\n            setErr('Старые пароли не совпадают')\r\n        }\r\n    }\r\n    return (\r\n        <Modal active={modalActivePass} setActive={setModalActivePass}>\r\n            <h1>Изменение информации:</h1>\r\n            <hr/>\r\n            {er && <div className='modalError'>{er}</div>}\r\n            <form className=\"modalLoginBox\" onSubmit={handleChangePassword}>\r\n                <input\r\n                    placeholder=\"Старый пароль\"\r\n                    type='password'\r\n                    className=\"inputChangePassword\"\r\n                    ref={modalOldPass}\r\n                />\r\n                <input\r\n                    placeholder=\"Новый пароль\"\r\n                    type='password'\r\n                    className=\"inputChangePassword\"\r\n                    ref={modalNewPass}\r\n                    minLength='6'\r\n                />\r\n                <input\r\n                    placeholder=\"Новый пароль ещё раз\"\r\n                    type='password'\r\n                    className=\"inputChangePassword\"\r\n                    ref={modalNewPassAgain}\r\n                    minLength='6'\r\n                />\r\n                <button className=\"ModalButtonChangePassword\" type=\"submit\" >\r\n                    Изменить\r\n                </button>\r\n            </form>\r\n        </Modal>\r\n    );\r\n\r\n}\r\n\r\nexport default ChangePassword;"]},"metadata":{},"sourceType":"module"}