{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useEffect,useState}from\"react\";import{BrowserRouter as Router,Switch,Route,Redirect,useParams}from\"react-router-dom\";import{AuthContext}from\"./context/AuthContext\";import Error from\"./pages/Error/Error\";import Login from\"./pages/Login/Login\";import Profile from\"./pages/Profile/Profile\";import Register from\"./pages/Register/Register\";import Department from'./pages/Department/Department';import Information from\"./pages/Information/Information\";import Reports from\"./pages/Reports/Reports\";import ReportsNominations from\"./pages/ReportsNominations/ReportsNominations\";import ReportsHistory from\"./pages/ReportsHistory/ReportsHistory\";import Message from\"./components/MessagePost/MessagePost\";import VacanciesView from\"./components/VacanciesView/VacanciesView\";import VacanciesAdd from\"./components/VacanciesAdd/VacanciesAdd\";import AdminPanel from'./components/ProfileInfo/AdminPanel/AdminPanel';import Layout from\"./components/Layout/Layout\";import axios from\"axios\";import Role from\"./components/ProfileInfo/AdminPanel/Role/Role\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),users=_useState2[0],setUser=_useState2[1];var userStorage=JSON.parse(localStorage.getItem('user'));useEffect(function(){var fetchUserName=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!(userStorage!==null)){_context.next=5;break;}_context.next=3;return axios.get('/api/user/'+userStorage._id);case 3:res=_context.sent;setUser(res.data);case 5:case\"end\":return _context.stop();}}},_callee);}));return function fetchUserName(){return _ref.apply(this,arguments);};}();fetchUserName();},[]);var _useContext=useContext(AuthContext),user=_useContext.user;var authUser=user||userStorage;return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",children:authUser?/*#__PURE__*/_jsx(Redirect,{to:\"/department/\".concat(authUser.main_department)}):/*#__PURE__*/_jsx(Redirect,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",children:authUser?/*#__PURE__*/_jsx(Redirect,{to:\"/department/\".concat(authUser.main_department)}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",children:authUser?/*#__PURE__*/_jsx(Redirect,{to:\"/\"}):/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/profile/:username\",children:authUser?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Profile,{authUser:authUser})}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/department/:username\",children:authUser?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/all_users\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/not_working_today\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/not_worked_yesterday\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sick_today\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/sick_yesterday\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vacation_today\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vacation_yesterday\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Department,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vacanciesview\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(VacanciesView,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/adminpanel\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(AdminPanel,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reports\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Reports,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/information\",children:authUser?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Information,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reportsnominations\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(ReportsNominations,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reportshistory\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(ReportsHistory,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/vacanciesadd\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(VacanciesAdd,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"/role\",children:authUser&&userStorage.isAdmin?/*#__PURE__*/_jsx(Layout,{children:/*#__PURE__*/_jsx(Role,{})}):/*#__PURE__*/_jsx(Error,{})}),/*#__PURE__*/_jsx(Route,{path:\"*\",children:/*#__PURE__*/_jsx(Error,{})})]})});}export default App;","map":{"version":3,"sources":["D:/time_app/client/src/App.js"],"names":["useContext","useEffect","useState","BrowserRouter","Router","Switch","Route","Redirect","useParams","AuthContext","Error","Login","Profile","Register","Department","Information","Reports","ReportsNominations","ReportsHistory","Message","VacanciesView","VacanciesAdd","AdminPanel","Layout","axios","Role","App","users","setUser","userStorage","JSON","parse","localStorage","getItem","fetchUserName","get","_id","res","data","user","authUser","main_department","isAdmin"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport {\n  BrowserRouter as Router,\n  Switch,\n  Route,\n  Redirect, useParams\n} from \"react-router-dom\";\nimport { AuthContext } from \"./context/AuthContext\";\nimport Error from \"./pages/Error/Error\";\nimport Login from \"./pages/Login/Login\";\nimport Profile from \"./pages/Profile/Profile\";\nimport Register from \"./pages/Register/Register\";\nimport Department from './pages/Department/Department';\nimport Information from \"./pages/Information/Information\";\nimport Reports from \"./pages/Reports/Reports\";\nimport ReportsNominations from \"./pages/ReportsNominations/ReportsNominations\";\nimport ReportsHistory from \"./pages/ReportsHistory/ReportsHistory\";\nimport Message from \"./components/MessagePost/MessagePost\";\nimport VacanciesView from \"./components/VacanciesView/VacanciesView\"\nimport VacanciesAdd from \"./components/VacanciesAdd/VacanciesAdd\"\nimport AdminPanel from './components/ProfileInfo/AdminPanel/AdminPanel'\nimport Layout from \"./components/Layout/Layout\";\nimport axios from \"axios\";\nimport Role from \"./components/ProfileInfo/AdminPanel/Role/Role\";\n\n\n\nfunction App() {\n  const [users, setUser] = useState([])\n\n  const userStorage = JSON.parse(localStorage.getItem('user'))\n  useEffect(() => {\n    const fetchUserName = async () => {\n      if(userStorage!==null) {\n        const res = await axios.get('/api/user/' + userStorage._id)\n        setUser(res.data)\n      }\n    }\n\n\n    fetchUserName()\n  },[])\n\n\n\n  const {user} = useContext(AuthContext)\n  const authUser = user || userStorage\n\n\n  return (\n      <Router>\n        <Switch>\n          <Route exact path=\"/\">\n            {authUser ? <Redirect to={`/department/${authUser.main_department}`} /> : <Redirect to=\"/login\" />}\n          </Route>\n          <Route path=\"/login\">\n            {authUser ? <Redirect to={`/department/${authUser.main_department}`} /> : <Login />}\n          </Route>\n          <Route path=\"/register\">\n            {authUser ? <Redirect to=\"/\" /> : <Register />}\n          </Route>\n\n\n            <Route path=\"/profile/:username\">\n              {authUser ? <Layout><Profile authUser={authUser} /></Layout>: <Login />}\n            </Route>\n            <Route path=\"/department/:username\">\n              {authUser ? <Layout><Department /></Layout> : <Login />}\n            </Route>\n            <Route path=\"/all_users\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/not_working_today\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/not_worked_yesterday\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/sick_today\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/sick_yesterday\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/vacation_today\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> :<Error />}\n            </Route>\n            <Route path=\"/vacation_yesterday\">\n              {authUser && userStorage.isAdmin ? <Layout><Department /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/vacanciesview\">\n              {authUser && userStorage.isAdmin ? <Layout><VacanciesView /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/adminpanel\">\n              {authUser && userStorage.isAdmin ? <Layout><AdminPanel /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/reports\">\n              {authUser && userStorage.isAdmin  ? <Layout><Reports /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/information\">\n              {authUser ? <Layout><Information /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/reportsnominations\">\n              {authUser && userStorage.isAdmin ? <Layout><ReportsNominations /></Layout> : <Error />}\n            </Route>\n            <Route path=\"/reportshistory\">\n              {authUser && userStorage.isAdmin ? <Layout><ReportsHistory /></Layout> : <Error />}\n            </Route>\n          <Route path=\"/vacanciesadd\">\n            {authUser && userStorage.isAdmin ? <Layout><VacanciesAdd /></Layout> : <Error />}\n          </Route>\n          <Route path=\"/role\">\n            {authUser && userStorage.isAdmin ? <Layout><Role /></Layout> : <Error />}\n          </Route>\n          <Route path=\"*\">\n            <Error />\n          </Route>\n        </Switch>\n      </Router>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}