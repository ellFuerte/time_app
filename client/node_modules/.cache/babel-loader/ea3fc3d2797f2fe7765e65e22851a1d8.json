{"ast":null,"code":"import _regeneratorRuntime from\"D:/Download/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useEffect,useRef,useState}from'react';import{Create,Delete}from'@material-ui/icons';import Modal from'../Templates/Modal/Modal';import'./ProfileInfo.css';import{useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProfileInfo(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),targetChecked=_useState2[0],setTargetChecked=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),checked=_useState4[0],setCheckedValue=_useState4[1];var _useState5=useState(),_useState6=_slicedToArray(_useState5,2),modalUser=_useState6[0],setModalUser=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),count=_useState8[0],setCount=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),userVote=_useState10[0],setUserVote=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),depsName=_useState12[0],setDepsName=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),user=_useState14[0],setUser=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isFetching=_useState16[0],setIsFetching=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),modalActive=_useState18[0],setModalActive=_useState18[1];var _useState19=useState(false),_useState20=_slicedToArray(_useState19,2),modalActivePass=_useState20[0],setModalActivePass=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),modalActiveVote=_useState22[0],setModalActiveVote=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),vote=_useState24[0],setVote=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),modalActiveResetPass=_useState26[0],setModalActiveResetPass=_useState26[1];var _useState27=useState(false),_useState28=_slicedToArray(_useState27,2),modalActiveReset=_useState28[0],setModalActiveReset=_useState28[1];var _useState29=useState(false),_useState30=_slicedToArray(_useState29,2),modalActiveDelete=_useState30[0],setModalActiveDelete=_useState30[1];var _useState31=useState([]),_useState32=_slicedToArray(_useState31,2),deps=_useState32[0],setDeps=_useState32[1];var _useState33=useState(''),_useState34=_slicedToArray(_useState33,2),error=_useState34[0],setError=_useState34[1];var _useState35=useState(''),_useState36=_slicedToArray(_useState35,2),er=_useState36[0],setErr=_useState36[1];var username=useParams();var localUser=!!username?{_id:username.username,email:\"\"}:JSON.parse(localStorage.getItem('user'));var localUse=JSON.parse(localStorage.getItem('user'));var modalName=useRef();var modalDep=useRef();var modalVote=useRef();var modalEmail=useRef();var modalOldPass=useRef();var modalNewPass=useRef();var modalNewPassAgain=useRef();var usersStatuses={0:'',1:'start',2:'end',3:'sick_leave',4:'deleted',5:'vacation',6:'time_off',7:'other'};function findStatus(k){for(var i in usersStatuses){if(i==k){return usersStatuses[i];}}}// данные о пользователе\n// Список всех департаментов и получение департаментов по юзеру\nuseEffect(function(){var getDeps=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/departments/');case 2:res=_context.sent;setDeps(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getDeps(){return _ref.apply(this,arguments);};}();var getNameDeps=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var deps,res;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:deps={user:username.username};_context2.next=3;return axios.post('/api/departments/',deps);case 3:res=_context2.sent;setDepsName(res.data);case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function getNameDeps(){return _ref2.apply(this,arguments);};}();var fetchUser=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res,user,sort;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:localUser._id=!!localUser._id?localUser._id:localUser.id;localUser._id=!!username?username.username:localUser._id;_context3.next=4;return axios.get('/api/user/'+username.username);case 4:res=_context3.sent;setUser(res.data);setIsFetching(false);_context3.next=9;return axios.get('/api/user/');case 9:user=_context3.sent;sort=user.data.sort(function(a,b){return a.user_name.localeCompare(b.user_name);});setUserVote(sort);case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function fetchUser(){return _ref3.apply(this,arguments);};}();// Номинации\nvar fetchVote=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){var res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return axios.get('/api/vote/');case 2:res=_context4.sent;setVote(res.data);case 4:case\"end\":return _context4.stop();}}},_callee4);}));return function fetchVote(){return _ref4.apply(this,arguments);};}();fetchVote();fetchUser();getDeps();getNameDeps();},[]);/*  // данные о работе от последнего к первому\n   useEffect(() => {\n      setIsFetching(true)\n      const fetchUser = async () => {\n        const res = await axios.get('/api/user/')\n        setPosts(res.data.sort((p1, p2) => {\n          return new Date(p2.workStart) - new Date(p1.workStart)\n        }))\n        setIsFetching(false)\n      }\n      fetchUser()\n    }, [username])*/ // изменение данных пользователя\nvar handleClick=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(e){var newInfo;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();newInfo={_id:username.username,username:modalName.current.value||user.username,email:modalEmail.current.value.toUpperCase()||user.email,departmentId:modalDep.current.value||user.departmentId};_context5.prev=2;_context5.next=5;return axios.put('/api/user/',newInfo);case 5:setModalActive(false);window.location.reload();_context5.next=12;break;case 9:_context5.prev=9;_context5.t0=_context5[\"catch\"](2);setError(\"Такой email существует\");case 12:case\"end\":return _context5.stop();}}},_callee5,null,[[2,9]]);}));return function handleClick(_x){return _ref5.apply(this,arguments);};}();// изменить пароль\nvar handleClickPassword=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(e){var passwords;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:e.preventDefault();if(!(modalNewPass.current.value!==modalNewPassAgain.current.value)){_context6.next=4;break;}setErr('Новые пароли не совпадают');return _context6.abrupt(\"return\");case 4:passwords={userId:localUse._id,password:localUse.password,oldPassword:modalOldPass.current.value,newPassword:modalNewPass.current.value};_context6.prev=5;_context6.next=8;return axios.put('/api/newPassword/',passwords);case 8:setModalActivePass(false);/*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/_context6.next=14;break;case 11:_context6.prev=11;_context6.t0=_context6[\"catch\"](5);setErr('Старые пароли не совпадают');case 14:case\"end\":return _context6.stop();}}},_callee6,null,[[5,11]]);}));return function handleClickPassword(_x2){return _ref6.apply(this,arguments);};}();// сбросить пароль\nvar handleResetPass=/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(e){var resetPassword;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:e.preventDefault();resetPassword={userId:username.username,newPassword:'qwerty123'};_context7.prev=2;_context7.next=5;return axios.put('/api/resetPassword/',resetPassword);case 5:setModalActiveResetPass(false);_context7.next=10;break;case 8:_context7.prev=8;_context7.t0=_context7[\"catch\"](2);case 10:case\"end\":return _context7.stop();}}},_callee7,null,[[2,8]]);}));return function handleResetPass(_x3){return _ref7.apply(this,arguments);};}();var status=/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(){var _status;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:if(!(user.status===1)){_context8.next=6;break;}_status={status:2,typework_id:1,userId:user.id,healthEnd:'-',commentEnd:'-',workEnd:new Date(Date.now())};_context8.next=4;return axios.put(\"/api/post/\",_status);case 4:_context8.next=7;break;case 6:alert(\"Пользователь не в работе\");case 7:case\"end\":return _context8.stop();}}},_callee8);}));return function status(){return _ref8.apply(this,arguments);};}();// удалить пользователя\nvar handleDelete=/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(e){var newPost;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:e.preventDefault();setIsFetching(true);newPost={userId:username.username,healthEnd:1,status:4/*      workEnd: new Date(Date.now()),\n            workTime: new Date(Date.now()) - new Date(posts[0].workStart)*/};/* localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/_context9.prev=3;_context9.next=6;return axios.put('/api/deluser/',newPost);case 6:/*      if(user.status === 1){\n              await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n            }*/ /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/setModalActiveDelete(false);window.location.href=\"/profile/\".concat(user.id);_context9.next=13;break;case 10:_context9.prev=10;_context9.t0=_context9[\"catch\"](3);console.log(_context9.t0);case 13:case\"end\":return _context9.stop();}}},_callee9,null,[[3,10]]);}));return function handleDelete(_x4){return _ref9.apply(this,arguments);};}();localUser=!!user&&!Array.isArray(user)?user:localUser;localUser.username=!!localUser.user_name?localUser.user_name:localUser.username;var name=localUser.email.toLowerCase();var buttonClick=function buttonClick(){setCount(count+1);};var handlePush=function handlePush(e){setCheckedValue(e.target.value);setTargetChecked(e.target.checked);};var hand=function hand(e){setModalUser(e.target.value);};var clickVote=/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(e){var voteUser;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:e.preventDefault();voteUser={user_id:localUse._id,vote_for_user:modalUser,nominations_id:checked};if(!(targetChecked===false)){_context10.next=6;break;}setErr(\"Выберите номинацию\");setCount(count-1);return _context10.abrupt(\"return\");case 6:if(!(modalUser===undefined)){_context10.next=10;break;}setCount(count-1);setErr(\"Выберите участника\");return _context10.abrupt(\"return\");case 10:if(!(count<=10)){_context10.next=17;break;}console.log('count=',count);setErr('');_context10.next=15;return axios.post('/api/vote/',voteUser);case 15:_context10.next=20;break;case 17:setTargetChecked(false);setModalActiveVote(false);window.location.reload();case 20:case\"end\":return _context10.stop();}}},_callee10);}));return function clickVote(_x5){return _ref10.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"profileInfo\",children:[isFetching?/*#__PURE__*/_jsx(\"div\",{className:\"isFatching\",children:\"\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0430...\"}):/*#__PURE__*/_jsxs(\"div\",{className:'employeePI '+findStatus(user.status),children:[/*#__PURE__*/_jsx(\"div\",{className:\"top\",children:/*#__PURE__*/_jsxs(\"span\",{className:\"name\",children:[user.user_name,localUser?/*#__PURE__*/_jsx(Create,{style:{fontSize:'medium',cursor:'pointer',marginLeft:'10px'},onClick:function onClick(){return setModalActive(true);}}):'',localUse.isAdmin?/*#__PURE__*/_jsx(Delete,{style:{cursor:'pointer',fontSize:'medium'},onClick:function onClick(){return setModalActiveDelete(true);}}):/*#__PURE__*/_jsx(_Fragment,{})]})}),/*#__PURE__*/_jsx(\"div\",{style:{fontSize:'18px'},className:\"email\",children:name.charAt(0).toUpperCase()+name.slice(1)}),/*#__PURE__*/_jsx(\"div\",{children:depsName}),/*#__PURE__*/_jsx(\"hr\",{className:\"hr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActivePass(true);},children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}),/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}),localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveResetPass(true);},children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C\"}):'',localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}):'',localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveReset(true);},children:\"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"}):'',localUse.isAdmin?/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",style:{width:\"20px\"}}):'',/*#__PURE__*/_jsx(\"div\",{className:\"changePass\",onClick:function onClick(){return setModalActiveVote(true);},children:\"\\u041F\\u0440\\u043E\\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u0442\\u044C\"})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActive,setActive:setModalActive,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:error}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleClick,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Name\",className:\"ModalInput\",ref:modalName}),/*#__PURE__*/_jsxs(\"select\",{ref:modalDep,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\"}),deps.map(function(dep,id){return/*#__PURE__*/_jsx(\"option\",{value:dep.id,children:dep.department_name},id);})]}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",type:\"emailLogin\",className:\"ModalInput\",ref:modalEmail,minLength:\"6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActivePass,setActive:setModalActivePass,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),er&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:er}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleClickPassword,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"Old Password\",type:\"password\",className:\"ModalInput\",ref:modalOldPass}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New Password\",type:\"password\",className:\"ModalInput\",ref:modalNewPass,minLength:\"6\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"New Password Again\",type:\"password\",className:\"ModalInput\",ref:modalNewPassAgain,minLength:\"6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveResetPass,setActive:setModalActiveResetPass,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleResetPass,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041D\\u043E\\u0432\\u044B\\u0439 \\u043F\\u0430\\u0440\\u043E\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442: qwerty123\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveReset,setActive:setModalActiveReset,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:status,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C \\u0432\\u0440\\u0435\\u043C\\u044F\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0417\\u0430\\u043A\\u043E\\u043D\\u0447\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveDelete,setActive:setModalActiveDelete,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"form\",{className:\"modalLoginBox\",onSubmit:handleDelete,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u041F\\u043E\\u043B\\u044C\\u0437\\u043E\\u0432\\u0430\\u0442\\u0435\\u043B\\u044C \\u0431\\u0443\\u0434\\u0435\\u0442 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",disabled:isFetching,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})]}),/*#__PURE__*/_jsxs(Modal,{active:modalActiveVote,setActive:setModalActiveVote,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0413\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435\"}),er&&/*#__PURE__*/_jsx(\"div\",{className:\"modalError\",children:er}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"\\u041D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044F\"}),vote.map(function(vote,id){return/*#__PURE__*/_jsxs(\"label\",{htmlFor:vote.nominations_name,className:\"inputVote\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:vote.id,id:vote.nominations_name,name:vote.nominations_name,onChange:handlePush,checked:vote.checked}),vote.nominations_name,/*#__PURE__*/_jsxs(\"select\",{onChange:hand,value:userVote.id,className:\"select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0443\\u0447\\u0430\\u0441\\u0442\\u043D\\u0438\\u043A\\u0430\"}),userVote.map(function(userVote,id){return/*#__PURE__*/_jsx(\"option\",{value:userVote.id,children:userVote.user_name},id);})]},id)]},id);}),checked?/*#__PURE__*/_jsx(\"h4\",{className:\"text\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435\"}):'',checked==='1'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u041E\\u0442\\u0432\\u0435\\u0442\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0437\\u0430\\u043A\\u0440\\u044B\\u0432\\u0430\\u0435\\u0442 \\u0432\\u0441\\u0435 \\u0441\\u0432\\u043E\\u0438 \\u0437\\u0430\\u044F\\u0432\\u043A\\u0438 \\u0432\\u043E\\u0432\\u0440\\u0435\\u043C\\u044F, \\u0431\\u0435\\u0437 \\u043F\\u0440\\u043E\\u0441\\u0440\\u043E\\u0447\\u0435\\u043A \\u0438 \\u0432\\u043E\\u0437\\u0432\\u0440\\u0430\\u0442\\u043E\\u0432. \\u041F\\u043E\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u0432\\u044B\\u0431\\u0438\\u0440\\u0430\\u0435\\u0442\\u0441\\u044F \\u043D\\u0430 \\u043E\\u0441\\u043D\\u043E\\u0432\\u0435 \\u0434\\u0430\\u043D\\u043D\\u044B\\u0445 \\u0432\\u044B\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438 \\u0438\\u0437 \\u0421\\u0444\\u0435\\u0440\\u044B.\"}):'',checked==='2'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u0427\\u0435\\u043B\\u043E\\u0432\\u0435\\u043A, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u043F\\u0440\\u0438\\u0434\\u0435\\u0442 \\u043D\\u0430 \\u043F\\u043E\\u043C\\u043E\\u0449\\u044C \\u0438 \\u0441\\u043F\\u0430\\u0441\\u0435\\u0442 \\u043C\\u0438\\u0440 (\\u0441\\u0438\\u0441\\u0442\\u0435\\u043C\\u0443) \\u0432 \\u043B\\u044E\\u0431\\u043E\\u0439 \\u0441\\u0430\\u043C\\u043E\\u0439 \\u043A\\u0440\\u0438\\u0442\\u0438\\u0447\\u043D\\u043E\\u0439 \\u0441\\u0438\\u0442\\u0443\\u0430\\u0446\\u0438\\u0438.\"}):'',checked==='3'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u042D\\u0442\\u043E\\u0442 \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A \\u043D\\u0438\\u043A\\u043E\\u0433\\u0434\\u0430 \\u043D\\u0435 \\u0434\\u043E\\u0432\\u0435\\u0434\\u0435\\u0442 \\u043D\\u0430\\u0447\\u0430\\u0442\\u043E\\u0435 \\u0434\\u0435\\u043B\\u043E \\u0434\\u043E \\u043A\\u043E\\u043D\\u0446\\u0430, \\u0431\\u0440\\u043E\\u0441\\u0438\\u0442 \\u043D\\u0430 \\u043F\\u043E\\u043B \\u043F\\u0443\\u0442\\u0438. \\u041B\\u0438\\u0431\\u043E \\u0441\\u0434\\u0435\\u043B\\u0430\\u0435\\u0442 \\u0435\\u0433\\u043E \\u0442\\u0430\\u043A, \\u0447\\u0442\\u043E \\u043F\\u0440\\u0438\\u0445\\u043E\\u0434\\u0438\\u0442\\u0441\\u044F \\u0437\\u0430 \\u043D\\u0438\\u043C \\u043F\\u0435\\u0440\\u0435\\u0434\\u0435\\u043B\\u044B\\u0432\\u0430\\u0442\\u044C.\"}):'',checked==='4'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \\u0432\\u0441\\u0435\\u0433\\u043E \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438 \\u043F\\u0440\\u043E\\u0432\\u043E\\u0434\\u0438\\u0442 \\u043D\\u0430 \\u0440\\u0430\\u0431\\u043E\\u0447\\u0435\\u043C \\u043C\\u0435\\u0441\\u0442\\u0435 (\\u043F\\u043E\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u043D\\u043E \\u0432\\u044B\\u0433\\u0440\\u0443\\u0437\\u043A\\u0435 \\u0438\\u0437 \\u0432\\u043E\\u0447\\u043C\\u0430\\u043D\\u0430)\"}):'',checked==='5'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u043B \\u0431\\u043E\\u043B\\u044C\\u0448\\u0435 \\u0432\\u0441\\u0435\\u0433\\u043E \\u0437\\u0430\\u044F\\u0432\\u043E\\u043A (\\u043F\\u043E\\u0431\\u0435\\u0434\\u0438\\u0442\\u0435\\u043B\\u044C \\u043E\\u043F\\u0440\\u0435\\u0434\\u0435\\u043B\\u044F\\u0435\\u0442\\u0441\\u044F \\u0441\\u043E\\u0433\\u043B\\u0430\\u0441\\u043D\\u043E \\u0432\\u044B\\u0433\\u0440\\u0443\\u0437\\u043A\\u0435 \\u0438\\u0437 \\u0421\\u0444\\u0435\\u0440\\u044B)\"}):'',checked==='6'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u0421\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u043F\\u0440\\u0438\\u043D\\u0438\\u043C\\u0430\\u0435\\u0442 \\u0430\\u043A\\u0442\\u0438\\u0432\\u043D\\u043E\\u0435 \\u0443\\u0447\\u0430\\u0441\\u0442\\u0438\\u0435 \\u0432 \\u0436\\u0438\\u0437\\u043D\\u0438 \\u043E\\u0442\\u0434\\u0435\\u043B\\u0430. \\u041E\\u043D \\u043D\\u0435 \\u0442\\u043E\\u043B\\u044C\\u043A\\u043E \\u0432\\u044B\\u043F\\u043E\\u043B\\u043D\\u044F\\u0435\\u0442 \\u0441\\u0432\\u043E\\u0438 \\u043F\\u0440\\u044F\\u043C\\u044B\\u0435 \\u043E\\u0431\\u044F\\u0437\\u0430\\u043D\\u043D\\u043E\\u0441\\u0442\\u0438, \\u043D\\u043E \\u0438 \\u043A\\u0440\\u0435\\u0441\\u0442\\u0438\\u043A\\u043E\\u043C \\u0432\\u044B\\u0448\\u0438\\u0432\\u0430\\u0435\\u0442, \\u043D\\u0430 \\u043C\\u0430\\u0448\\u0438\\u043D\\u043A\\u0435 \\u0448\\u044C\\u0435\\u0442 \\u0442\\u043E\\u0436\\u0435\\u2026 \\u0412 \\u043E\\u0431\\u0449\\u0435\\u043C \\u0433\\u043E\\u0442\\u043E\\u0432 \\u0438 \\u0432 \\u043E\\u0433\\u043E\\u043D\\u044C \\u0438 \\u0432 \\u0432\\u043E\\u0434\\u0443, \\u0438 \\u043E\\u0431\\u0443\\u0447\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0432\\u0435\\u0441\\u0442\\u0438 \\u0438 \\u043E\\u0431\\u0435\\u0434 \\u043F\\u0440\\u0438\\u0433\\u043E\\u0442\\u043E\\u0432\\u0438\\u0442\\u044C.\"}):'',checked==='7'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u041E\\u043D \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u0434\\u043E\\u043A\\u043E\\u043F\\u0430\\u0435\\u0442\\u0441\\u044F \\u0434\\u043E \\u0438\\u0441\\u0442\\u0438\\u043D\\u044B. \\u041F\\u043E\\u0438\\u0441\\u043A \\u0442\\u0438\\u043F\\u043E\\u0432\\u044B\\u0445 \\u043E\\u0431\\u0440\\u0430\\u0449\\u0435\\u043D\\u0438\\u0439, \\u0432\\u044B\\u044F\\u0432\\u043B\\u0435\\u043D\\u0438\\u0435 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C \\u0438 \\u043E\\u0448\\u0438\\u0431\\u043E\\u043A. \\u041E\\u0442 \\u044D\\u0442\\u043E\\u0433\\u043E \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430 \\u043D\\u0435 \\u0443\\u0441\\u043A\\u043E\\u043B\\u044C\\u0437\\u043D\\u0435\\u0442 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u0430 \\u043F\\u0440\\u043E\\u0431\\u043B\\u0435\\u043C\\u0430.\"}):'',checked==='8'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u042D\\u0442\\u043E\\u0442 \\u0447\\u0435\\u043B\\u043E\\u0432\\u0435\\u043A \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u0441\\u043B\\u0435\\u0434\\u0438\\u0442 \\u0437\\u0430 \\u043F\\u043E\\u0440\\u044F\\u0434\\u043A\\u043E\\u043C \\u043D\\u0430 \\u043C\\u043E\\u043D\\u0438\\u0442\\u043E\\u0440\\u0430\\u0445, \\u043D\\u0435 \\u043F\\u0440\\u043E\\u043F\\u0443\\u0441\\u0442\\u0438 \\u043D\\u0438 \\u043E\\u0434\\u043D\\u043E\\u0433\\u043E \\u043E\\u0442\\u043A\\u043B\\u043E\\u043D\\u0435\\u043D\\u0438\\u044F \\u0432 \\u0433\\u0440\\u0430\\u0444\\u0438\\u043A\\u0430\\u0445 \\u0438 \\u043D\\u0435 \\u0434\\u043E\\u043F\\u0443\\u0441\\u0442\\u0438\\u0442 \\u043D\\u0430\\u0441\\u0442\\u0443\\u043F\\u043B\\u0435\\u043D\\u0438\\u044F \\u0430\\u0432\\u0430\\u0440\\u0438\\u0438.\"}):'',checked==='9'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u0421\\u0430\\u043C\\u044B\\u0439 \\u043A\\u0430\\u0447\\u0435\\u0441\\u0442\\u0432\\u0435\\u043D\\u043D\\u044B\\u0439 \\u0432\\u043D\\u0435\\u0434\\u0440\\u0435\\u043D\\u0435\\u0446, \\u043A\\u043E\\u0442\\u043E\\u0440\\u044B\\u0439 \\u0434\\u0435\\u043B\\u0430\\u0435\\u0442 \\u0432\\u0441\\u0435 \\u0447\\u0435\\u0442\\u043A\\u043E \\u0431\\u0435\\u0437 \\u043A\\u043E\\u0441\\u044F\\u043A\\u043E\\u0432.\"}):'',checked==='10'?/*#__PURE__*/_jsx(\"div\",{className:\"textComment\",children:\"\\u041A\\u043E\\u043B\\u043B\\u0435\\u0433\\u0430, \\u043D\\u0430 \\u043A\\u043E\\u0442\\u043E\\u0440\\u043E\\u0433\\u043E \\u0432\\u0441\\u0435\\u0433\\u0434\\u0430 \\u043C\\u043E\\u0436\\u043D\\u043E \\u043F\\u043E\\u043B\\u043E\\u0436\\u0438\\u0442\\u044C\\u0441\\u044F. \\u041E\\u043D \\u043E\\u0431\\u0443\\u0447\\u0438\\u0442 \\u0432\\u0441\\u0435\\u043C \\u0440\\u0430\\u0431\\u043E\\u0447\\u0438\\u043C \\u043C\\u043E\\u043C\\u0435\\u043D\\u0442\\u0430\\u043C \\u0438 \\u043F\\u043E\\u043C\\u043E\\u0436\\u0435\\u0442 \\u0440\\u0435\\u0448\\u0438\\u0442\\u044C \\u043B\\u044E\\u0431\\u043E\\u0439 \\u0432\\u043E\\u043F\\u0440\\u043E\\u0441.\"}):'',/*#__PURE__*/_jsx(\"form\",{className:\"vote\",onSubmit:clickVote,children:count===10?/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:isFetching,onClick:buttonClick,children:\"\\u0413\\u043E\\u0442\\u043E\\u0432\\u043E\"}):targetChecked?/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",disabled:isFetching,onClick:buttonClick,children:\"\\u0414\\u0430\\u043B\\u0435\\u0435\"}):''})]})]});}","map":{"version":3,"sources":["D:/Download/time_app/client/src/components/ProfileInfo/ProfileInfo.jsx"],"names":["axios","useEffect","useRef","useState","Create","Delete","Modal","useParams","ProfileInfo","targetChecked","setTargetChecked","checked","setCheckedValue","modalUser","setModalUser","count","setCount","userVote","setUserVote","depsName","setDepsName","user","setUser","isFetching","setIsFetching","modalActive","setModalActive","modalActivePass","setModalActivePass","modalActiveVote","setModalActiveVote","vote","setVote","modalActiveResetPass","setModalActiveResetPass","modalActiveReset","setModalActiveReset","modalActiveDelete","setModalActiveDelete","deps","setDeps","error","setError","er","setErr","username","localUser","_id","email","JSON","parse","localStorage","getItem","localUse","modalName","modalDep","modalVote","modalEmail","modalOldPass","modalNewPass","modalNewPassAgain","usersStatuses","findStatus","k","i","getDeps","get","res","data","getNameDeps","post","fetchUser","id","sort","a","b","user_name","localeCompare","fetchVote","handleClick","e","preventDefault","newInfo","current","value","toUpperCase","departmentId","put","window","location","reload","handleClickPassword","passwords","userId","password","oldPassword","newPassword","handleResetPass","resetPassword","status","typework_id","healthEnd","commentEnd","workEnd","Date","now","alert","handleDelete","newPost","href","console","log","Array","isArray","name","toLowerCase","buttonClick","handlePush","target","hand","clickVote","voteUser","user_id","vote_for_user","nominations_id","undefined","fontSize","cursor","marginLeft","isAdmin","charAt","slice","width","map","dep","department_name","nominations_name"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport { useEffect, useRef, useState } from 'react'\nimport { Create, Delete } from '@material-ui/icons'\nimport Modal from '../Templates/Modal/Modal'\nimport './ProfileInfo.css'\nimport {useParams} from \"react-router-dom\";\nexport default function ProfileInfo() {\n  const [targetChecked, setTargetChecked] = useState(false)\n  const [checked, setCheckedValue] = useState()\n  const [modalUser, setModalUser] = useState()\n  const [count, setCount] = useState(0)\n  const [userVote,setUserVote] = useState([])\n  const [depsName,setDepsName] = useState([])\n  const [user, setUser] = useState([])\n  const [isFetching, setIsFetching] = useState(false)\n  const [modalActive, setModalActive] = useState(false)\n  const [modalActivePass, setModalActivePass] = useState(false)\n  const [modalActiveVote, setModalActiveVote] = useState(false)\n  const [vote, setVote]=useState([])\n  const [modalActiveResetPass, setModalActiveResetPass] = useState(false)\n  const [modalActiveReset, setModalActiveReset] = useState(false)\n  const [modalActiveDelete, setModalActiveDelete] = useState(false)\n  const [deps, setDeps] = useState([])\n  const [error, setError] = useState('')\n  const [er, setErr] = useState('')\n  const username=useParams()\n  let localUser = !!username ? {_id:username.username,email:\"\"} : JSON.parse(localStorage.getItem('user'))\n  const localUse = JSON.parse(localStorage.getItem('user'))\n\n  const modalName = useRef()\n  const modalDep = useRef()\n  const modalVote = useRef()\n  const modalEmail = useRef()\n  const modalOldPass = useRef()\n  const modalNewPass = useRef()\n  const modalNewPassAgain = useRef()\n\n  const usersStatuses = {0: '', 1: 'start', 2: 'end', 3: 'sick_leave', 4: 'deleted' ,5: 'vacation', 6: 'time_off', 7: 'other'}\n  function findStatus(k){\n    for(let i in usersStatuses){\n      if(i == k){\n        return usersStatuses[i]\n      }\n    }\n  }\n\n  // данные о пользователе\n\n\n  // Список всех департаментов и получение департаментов по юзеру\n  useEffect(() => {\n    const getDeps = async () => {\n\n      const res = await axios.get('/api/departments/')\n      setDeps(res.data)\n    }\n    const getNameDeps = async () => {\n      const deps = {\n        user: username.username\n      }\n      const res = await axios.post('/api/departments/',deps)\n      setDepsName(res.data)\n    }\n\n    const fetchUser = async () => {\n      localUser._id=!!localUser._id ? localUser._id:localUser.id\n      localUser._id=!!username ? username.username:localUser._id\n      const res = await axios.get('/api/user/'+username.username)\n      setUser(res.data)\n      setIsFetching(false)\n      const user = await axios.get('/api/user/')\n      const sort = user.data.sort((a, b) => a.user_name.localeCompare(b.user_name))\n      setUserVote(sort)\n    }\n\n// Номинации\n    const fetchVote = async () => {\n\n      const res = await axios.get('/api/vote/')\n      setVote(res.data)\n\n    }\n    fetchVote()\n    fetchUser()\n    getDeps()\n    getNameDeps()\n  }, [])\n\n\n\n\n\n\n\n  /*  // данные о работе от последнего к первому\n   useEffect(() => {\n      setIsFetching(true)\n      const fetchUser = async () => {\n        const res = await axios.get('/api/user/')\n        setPosts(res.data.sort((p1, p2) => {\n          return new Date(p2.workStart) - new Date(p1.workStart)\n        }))\n        setIsFetching(false)\n      }\n      fetchUser()\n    }, [username])*/\n\n\n\n\n\n  // изменение данных пользователя\n  const handleClick = async (e) => {\n    e.preventDefault()\n    const newInfo= {\n      _id: username.username,\n      username: modalName.current.value || user.username,\n      email: modalEmail.current.value.toUpperCase() || user.email,\n      departmentId: modalDep.current.value || user.departmentId,\n    }\n\n    try {\n      await axios.put('/api/user/', newInfo)\n      setModalActive(false)\n      window.location.reload()\n    } catch (error) {\n      setError(\"Такой email существует\")\n    }\n  }\n\n  // изменить пароль\n  const handleClickPassword = async (e) => {\n\n    e.preventDefault()\n    if(modalNewPass.current.value !== modalNewPassAgain.current.value){\n      setErr('Новые пароли не совпадают')\n      return }\n    const passwords = {\n      userId: localUse._id,\n      password: localUse.password,\n      oldPassword: modalOldPass.current.value,\n      newPassword: modalNewPass.current.value\n    }\n    try {\n      await axios.put('/api/newPassword/', passwords)\n      setModalActivePass(false)\n      /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/\n    } catch (er) {\n      setErr('Старые пароли не совпадают')\n    }\n  }\n\n  // сбросить пароль\n  const handleResetPass = async (e) => {\n    e.preventDefault()\n\n    const resetPassword = {\n      userId: username.username,\n      newPassword: 'qwerty123'\n    }\n\n    try {\n      await axios.put('/api/resetPassword/', resetPassword)\n      setModalActiveResetPass(false)\n    } catch (error) {\n    }\n  }\n\n  const status = async () => {\n    if(user.status===1){\n      const status = {\n        status: 2,\n        typework_id: 1,\n        userId: user.id,\n        healthEnd: '-',\n        commentEnd: '-',\n        workEnd: new Date(Date.now())\n      }\n      await axios.put(\"/api/post/\", status)\n    }else{\n      alert(\"Пользователь не в работе\")\n    }\n  }\n\n\n  // удалить пользователя\n  const handleDelete = async (e) => {\n    e.preventDefault()\n    setIsFetching(true)\n\n    const newPost = {\n      userId: username.username,\n      healthEnd: 1,\n      status: 4\n      /*      workEnd: new Date(Date.now()),\n            workTime: new Date(Date.now()) - new Date(posts[0].workStart)*/\n    }\n    /* localStorage.setItem('user', JSON.stringify({...localUser, status:3}))*/\n    try {\n      await axios.put('/api/deluser/', newPost)\n      /*      if(user.status === 1){\n              await axios.put(\"/api/post/\"+posts[0]._id, newPost)\n            }*/\n      /*      localStorage.clear()\n            window.location.reload()\n            window.location.href = '/'*/\n      setModalActiveDelete(false)\n      window.location.href = `/profile/${user.id}`\n    } catch (error) {\n      console.log(error);\n    }\n  }\n  localUser =(!!user && ! Array.isArray(user)) ? user:localUser\n  localUser.username=!!localUser.user_name ? localUser.user_name : localUser.username\n  const name=localUser.email.toLowerCase()\n\n\n  const buttonClick  =()=> {\n    setCount(count + 1)\n  }\n\n  const handlePush = e => {\n    setCheckedValue(e.target.value)\n    setTargetChecked(e.target.checked)\n  }\n\n  const hand = e => {\n    setModalUser(e.target.value)\n  }\n\n\n  const clickVote = async (e) => {\n    e.preventDefault()\n    const voteUser = {\n      user_id: localUse._id,\n      vote_for_user: modalUser,\n      nominations_id: checked\n    }\n\n\n    if (targetChecked===false) {\n      setErr(\"Выберите номинацию\")\n      setCount(count-1)\n      return\n    }\n\n    if(modalUser===undefined){\n      setCount(count-1)\n      setErr(\"Выберите участника\")\n      return\n    }\n\n    if(count<=10){\n      console.log('count=',count)\n      setErr('')\n      await axios.post('/api/vote/', voteUser)\n    }else{\n      setTargetChecked(false)\n      setModalActiveVote(false)\n      window.location.reload()\n    }\n  }\n\n  return (\n      <div className='profileInfo'>\n        {isFetching\n            ? <div className='isFatching'>Загрузка...</div>\n            : <div className={'employeePI ' + (findStatus(user.status))}>\n              <div className='top'>\n            <span className='name'>\n              {user.user_name}\n              {localUser ? <Create style={{fontSize:'medium', cursor:'pointer', marginLeft:'10px'}} onClick={() => setModalActive(true)}/> : ''}\n              {localUse.isAdmin ? <Delete style={{cursor:'pointer', fontSize:'medium'}}  onClick={() => setModalActiveDelete(true)}/> : <></>}\n            </span>\n              </div>\n              <div style={{fontSize:'18px'}} className='email'>{name.charAt(0).toUpperCase() + name.slice(1)}</div>\n              <div>{depsName}</div>\n              <hr className=\"hr\"/>\n              {<div className='changePass' onClick={() => setModalActivePass(true)}>Изменить пароль</div>}\n\n              <div className='changePass' style={{width: \"20px\"}}></div>\n\n              {localUse.isAdmin ? <div className='changePass' onClick={() => setModalActiveResetPass(true)}>Сбросить пароль</div>:''}\n\n              {localUse.isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> :''}\n\n              {localUse.isAdmin ? <div className='changePass' onClick={() => setModalActiveReset(true)} >Закончить</div>:''}\n\n              {localUse.isAdmin ? <div className='changePass' style={{width: \"20px\"}}></div> :''}\n\n              {<div className='changePass' onClick={() => setModalActiveVote(true)}>Проголосовать</div>}\n\n\n            </div>\n        }\n        <Modal active={modalActive} setActive={setModalActive}>\n          <h1>Изменение информации:</h1>\n          <hr/>\n          {error && <div className='modalError'>{error}</div>}\n          <form className=\"modalLoginBox\" onSubmit={handleClick}>\n            <input\n                placeholder=\"Name\"\n                className=\"ModalInput\"\n                ref={modalName}\n            />\n            <select ref={modalDep}>\n              <option value=''>Выберите подразделение</option>\n              {deps.map((dep, id) =>\n                  <option key={id} value={dep.id}>{dep.department_name}</option>)}\n            </select>\n            <input\n                placeholder=\"Email\"\n                type='emailLogin'\n                className=\"ModalInput\"\n                ref={modalEmail}\n                minLength='6'\n            />\n            <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n              Изменить\n            </button>\n          </form>\n        </Modal>\n        <Modal active={modalActivePass} setActive={setModalActivePass} >\n          <h1>Изменение информации:</h1>\n          <hr/>\n          {er && <div className='modalError'>{er}</div>}\n          <form className=\"modalLoginBox\" onSubmit={handleClickPassword}>\n            <input\n                placeholder=\"Old Password\"\n                type='password'\n                className=\"ModalInput\"\n                ref={modalOldPass}\n            />\n            <input\n                placeholder=\"New Password\"\n                type='password'\n                className=\"ModalInput\"\n                ref={modalNewPass}\n                minLength='6'\n            />\n            <input\n                placeholder=\"New Password Again\"\n                type='password'\n                className=\"ModalInput\"\n                ref={modalNewPassAgain}\n                minLength='6'\n            />\n            <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n              Изменить\n            </button>\n          </form>\n        </Modal>\n        <Modal active={modalActiveResetPass} setActive={setModalActiveResetPass}>\n          <h1>Изменение информации:</h1>\n          <hr/>\n          <form className=\"modalLoginBox\" onSubmit={handleResetPass}>\n            <h2>Новый пароль будет: qwerty123</h2>\n            <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n              Сбросить\n            </button>\n          </form>\n        </Modal>\n        <Modal active={modalActiveReset} setActive={setModalActiveReset}>\n          <h1>Изменение информации:</h1>\n          <hr/>\n          <form className=\"modalLoginBox\" onSubmit={status}>\n            <h2>Закончить время</h2>\n            <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n              Закончить\n            </button>\n          </form>\n        </Modal>\n        <Modal active={modalActiveDelete} setActive={setModalActiveDelete}>\n          <h1>Изменение информации:</h1>\n          <hr/>\n          <form className=\"modalLoginBox\" onSubmit={handleDelete}>\n            <h2>Пользователь будет удален</h2>\n            <button className=\"ModalButton\" type=\"submit\" disabled={isFetching}>\n              Удалить\n            </button>\n          </form>\n        </Modal>\n        <Modal active={modalActiveVote} setActive={setModalActiveVote}>\n\n          <h1>Голосование</h1>\n          {er && <div className='modalError'>{er}</div>}\n          <hr/>\n          <h4>Номинация</h4>\n          {\n            vote.map(\n                (vote, id) =>\n\n                  <label key={id} htmlFor={vote.nominations_name} className='inputVote'>\n\n                  <input type='checkbox' value={vote.id} id={vote.nominations_name} name={vote.nominations_name} onChange={handlePush} checked={vote.checked}/>{vote.nominations_name}\n\n                  <select onChange={hand} key={id} value={userVote.id} className='select'>\n\n                  <option value=''>Выберите участника</option>\n\n                  {userVote.map((userVote, id) => <option key={id} value={userVote.id}>{userVote.user_name}</option>)}\n                  </select>\n                </label>\n\n            )}\n\n          {\n            checked ?\n                <h4 className='text'>Описание</h4>\n                :''\n          }\n          {checked === '1'  ?\n              <div className='textComment'>\n                Ответственный сотрудник, который закрывает все свои заявки вовремя, без просрочек и возвратов. Победитель выбирается на основе данных выгрузки из Сферы.\n              </div>: ''\n          }\n          {checked === '2' ?\n              <div className='textComment'>\n                Человек, который всегда придет на помощь и спасет мир (систему) в любой самой критичной ситуации.\n              </div>:''\n          }\n          {checked === '3' ?\n              <div className='textComment'>\n                Этот сотрудник никогда не доведет начатое дело до конца, бросит на пол пути. Либо сделает его так, что приходится за ним переделывать.\n              </div>:''\n          }\n          {checked === '4' ?\n              <div className='textComment'>\n                Сотрудник, который больше всего времени проводит на рабочем месте (победитель определяется согласно выгрузке из вочмана)\n              </div>:''\n          }\n          {checked === '5' ?\n              <div className='textComment'>\n                Закрыл больше всего заявок (победитель определяется согласно выгрузке из Сферы)\n              </div>:''\n          }\n          {checked === '6' ?\n              <div className='textComment'>\n                Сотрудник, который принимает активное участие в жизни отдела. Он не только выполняет свои прямые обязанности, но и крестиком вышивает, на машинке шьет тоже… В общем готов и в огонь и в воду, и обучение провести и обед приготовить.\n              </div>:''\n          }\n          {checked === '7' ?\n              <div className='textComment'>\n                Он всегда докопается до истины. Поиск типовых обращений, выявление проблем и ошибок. От этого сотрудника не ускользнет ни одна проблема.\n              </div>:''\n          }\n          {checked === '8' ?\n              <div className='textComment'>\n                Этот человек всегда следит за порядком на мониторах, не пропусти ни одного отклонения в графиках и не допустит наступления аварии.\n              </div>:''\n          }\n          {checked === '9' ?\n              <div className='textComment'>\n                Самый качественный внедренец, который делает все четко без косяков.\n              </div>:''\n          }\n          {checked === '10' ?\n              <div className='textComment'>\n                Коллега, на которого всегда можно положиться. Он обучит всем рабочим моментам и поможет решить любой вопрос.\n              </div>:''\n          }\n          <form className=\"vote\" onSubmit={clickVote}>\n            {count===10 ?\n                <button className=\"button\" type=\"submit\" disabled={isFetching} onClick={buttonClick}>\n                  Готово\n                </button>:\n                    targetChecked ?\n                        <button className=\"button\" type=\"submit\" disabled={isFetching}  onClick={buttonClick}>\n                          Далее\n                        </button>:''\n            }\n          </form>\n        </Modal>\n      </div>\n  )\n}"]},"metadata":{},"sourceType":"module"}