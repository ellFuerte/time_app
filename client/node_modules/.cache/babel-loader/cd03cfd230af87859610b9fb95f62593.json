{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from\"react\";import'./VacanciesAdd.css';import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function VacanciesAdd(){var localUser=JSON.parse(localStorage.getItem('user'));var _useState=useState([]),_useState2=_slicedToArray(_useState,2),options=_useState2[0],setOptions=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),selectedValue=_useState4[0],setSelectedValue=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),searchQuery=_useState6[0],setSearchQuery=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),userId=_useState8[0],setUserId=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),message=_useState12[0],setMessage=_useState12[1];var _useState13=useState(''),_useState14=_slicedToArray(_useState13,2),messageITC=_useState14[0],setMessageITC=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isView=_useState16[0],setIsView=_useState16[1];var _useState17=useState([]),_useState18=_slicedToArray(_useState17,2),vacancies=_useState18[0],setVacancies=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),status=_useState20[0],setStatus=_useState20[1];var _useState21=useState([]),_useState22=_slicedToArray(_useState21,2),company=_useState22[0],setCompany=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),checkVal=_useState24[0],setCheckVal=_useState24[1];var _useState25=useState([]),_useState26=_slicedToArray(_useState25,2),users=_useState26[0],setUsers=_useState26[1];var modalDep=useRef();var NameVacationRef=useRef();var TeamRef=useRef();var StatusRef=useRef();var CodeVacations=useRef();var Company=useRef();var Description=useRef();var CodeProject=useRef();var Grade=useRef();var handleSearchChange=function handleSearchChange(e){setSearchQuery(e.target.value);};var changeVal=function changeVal(){setCheckVal(!checkVal);};useEffect(function(){var getDeps=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var userOne,status,company,user,vacancies_function,getVacancies,res,data,extractedOptions;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/user/'+localUser._id);case 2:userOne=_context.sent;_context.next=5;return axios.get('/api/Vacations/?status=status');case 5:status=_context.sent;setStatus(status.data);_context.next=9;return axios.get('/api/Vacations/?company=company');case 9:company=_context.sent;setCompany(company.data);_context.next=13;return axios.get('/api/user');case 13:user=_context.sent;setUsers(user.data);vacancies_function={departId:localUser.departmentId,user_id:localUser._id};_context.next=18;return axios.post('/api/Vacations_function/',vacancies_function);case 18:getVacancies=_context.sent;setVacancies(getVacancies.data);_context.next=22;return axios.get('/api/department_tree_to_json/');case 22:res=_context.sent;data=res.data[0]['department_tree_to_json'];extractedOptions=extractOptions(data);setOptions(extractedOptions);setSelectedValue(userOne.data.department_id);case 27:case\"end\":return _context.stop();}}},_callee);}));return function getDeps(){return _ref.apply(this,arguments);};}();var extractOptions=function extractOptions(node){var optionsList=[{id:node.id,name:node.Name}];if(node.Subclasses&&node.Subclasses.length>0){node.Subclasses.forEach(function(subclass){optionsList=optionsList.concat(extractOptions(subclass));});}return optionsList;};getDeps();},[]);var handleUserClick=function handleUserClick(userName,userId){setUserId(userId);setSearchTerm(userName);setFilteredUsers([]);};var _useState27=useState(''),_useState28=_slicedToArray(_useState27,2),searchTerm=_useState28[0],setSearchTerm=_useState28[1];var _useState29=useState([]),_useState30=_slicedToArray(_useState29,2),filteredUsers=_useState30[0],setFilteredUsers=_useState30[1];var handleInputChange=function handleInputChange(e){var term=e.target.value;setSearchTerm(term);var filtered=users.filter(function(user){return user.user_name&&user.user_name.toLowerCase().includes(term.toLowerCase());});if(term===''){setFilteredUsers([]);}else{setFilteredUsers(filtered);}};var clickHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var codeVacation,existingVacancy,userNameToSend,Vacations,res,vacancies_function,getVacancies;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:codeVacation=CodeVacations.current.value.toLowerCase().trim();// Проверяем, есть ли уже вакансия с таким кодом\nexistingVacancy=vacancies.some(function(_ref3){var get_vacancies=_ref3.get_vacancies;return get_vacancies.some(function(_ref4){var vacancies=_ref4.vacancies;return vacancies.some(function(vacancy){return vacancy.vacancy_code&&vacancy.vacancy_code.toLowerCase()===codeVacation;});});});if(!existingVacancy){_context2.next=7;break;}setMessageITC('Такая ИТС уже существует');setError('');setMessage('');return _context2.abrupt(\"return\");case 7:userNameToSend='';if(searchTerm!==''){userNameToSend=userId;}Vacations={namevacancies:NameVacationRef.current.value,description:Description.current.value,team_id:TeamRef.current.value,status_id:StatusRef.current.value,codeVacations:codeVacation.toUpperCase(),codeProject:CodeProject.current.value,company_id:Company.current.value,grade:Grade.current.value,is_checked:checkVal,userName:userNameToSend};if(!(NameVacationRef.current.value===''||Description.current.value===''||TeamRef.current.value===''||StatusRef.current.value===''||codeVacation===''||CodeProject.current.value===''||Grade.current.value===''||Company.current.value==='')){_context2.next=15;break;}setError('Заполните поле');setIsView(true);_context2.next=26;break;case 15:_context2.next=17;return axios.post('/api/Vacations/',Vacations);case 17:res=_context2.sent;if(!(res.status===200)){_context2.next=26;break;}setError('');setMessage('Вакансия добавлена');vacancies_function={departId:localUser.departmentId,user_id:localUser._id};_context2.next=24;return axios.post('/api/Vacations_function/',vacancies_function);case 24:getVacancies=_context2.sent;setVacancies(getVacancies.data);case 26:case\"end\":return _context2.stop();}}},_callee2);}));return function clickHandler(){return _ref2.apply(this,arguments);};}();var clearInput=function clearInput(){Description.current.value='';NameVacationRef.current.value='';CodeVacations.current.value='';CodeProject.current.value='';Grade.current.value='';setSearchTerm('');setFilteredUsers([]);setSearchQuery('');setMessage('');setError('');};function handleClickSubmit(){setMessageITC('');setError('');setMessage('');}var handleChangeDeps=function handleChangeDeps(e){setSelectedValue(e.target.value);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"VacationsMainAdd\",children:[/*#__PURE__*/_jsx(\"h2\",{style:{textAlign:'center'},children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u044E\"}),!error&&isView&&message&&!messageITC&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u043E\"}),message&&!error&&!isView&&!messageITC&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u043B\\u0435\\u043D\\u043D\\u043E\"}),error&&isView&&!messageITC&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435 \\u0432\\u0441\\u0435 \\u043F\\u043E\\u043B\\u044F\"}),messageITC&&!message&&/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:messageITC}),/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabelName\",children:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{ref:NameVacationRef,type:\"text\",placeholder:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\",className:\"InputVacation\",onMouseDown:handleClickSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"textarea\",{ref:Description,placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\",className:\"InputVacationAdd\",onMouseDown:handleClickSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u041F\\u043E\\u0434\\u0440\\u0430\\u0437\\u0434\\u0435\\u043B\\u0435\\u043D\\u0438\\u0435\"}),/*#__PURE__*/_jsx(\"select\",{value:selectedValue// Привязываем значение к selectedValue\n,onChange:handleChangeDeps,ref:modalDep,className:\"InputVacation\",children:options.map(function(option){return/*#__PURE__*/_jsx(\"option\",{value:option.id,children:option.name},option.id);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u0421\\u0442\\u0430\\u0442\\u0443\\u0441\"}),/*#__PURE__*/_jsx(\"select\",{ref:StatusRef,className:\"InputVacation\",onMouseDown:handleClickSubmit,children:status.map(function(status,name){return/*#__PURE__*/_jsx(\"option\",{value:status.id,children:status.name},name);})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u041A\\u043E\\u0434 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"input\",{ref:CodeVacations,value:searchQuery,onChange:handleSearchChange,type:\"text\",placeholder:\"\\u041A\\u043E\\u0434 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\",className:\"InputVacation\",onMouseDown:handleClickSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"inputDiv\",children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u0418\\u043C\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u0418\\u043C\\u044F \\u0441\\u043E\\u0442\\u0440\\u0443\\u0434\\u043D\\u0438\\u043A\\u0430\",className:\"InputVacation\",value:searchTerm,onChange:handleInputChange,onMouseDown:handleClickSubmit}),/*#__PURE__*/_jsx(\"div\",{className:\"divSelect\",children:filteredUsers.length>0&&/*#__PURE__*/_jsx(\"div\",{children:filteredUsers.map(function(user,index){return/*#__PURE__*/_jsx(\"div\",{className:\"selectNameDiv\",value:user.id,onClick:function onClick(){return handleUserClick(user.user_name,user.id);},children:user.user_name},index);})})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"}),/*#__PURE__*/_jsxs(\"select\",{ref:Company,className:\"InputVacation\",onMouseDown:handleClickSubmit,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u041A\\u043E\\u043C\\u043F\\u0430\\u043D\\u0438\\u044F\"}),company.map(function(company,name){return/*#__PURE__*/_jsx(\"option\",{value:company.id,children:company.name},name);})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u041A\\u043E\\u0434 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430\"}),/*#__PURE__*/_jsx(\"input\",{ref:CodeProject,type:\"number\",placeholder:\"\\u041A\\u043E\\u0434 \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430(\\u0442\\u0435\\u043A\\u0443\\u0449\\u0438\\u0439 \\u0431\\u044E\\u0434\\u0436\\u0435\\u0442=0)\",className:\"InputVacation\",onMouseDown:handleClickSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"nameVacation\",className:\"InputLabel\",children:\"\\u0413\\u0440\\u0435\\u0439\\u0434\"}),/*#__PURE__*/_jsx(\"input\",{ref:Grade,type:\"number\",placeholder:\"\\u0413\\u0440\\u0435\\u0439\\u0434\",className:\"InputVacation\",onMouseDown:handleClickSubmit})]}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'20px'},children:[/*#__PURE__*/_jsx(\"label\",{style:{paddingRight:'10px'},children:\"\\u041D\\u0443\\u0436\\u043D\\u0430 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u044F \\u043F\\u043E\\u0441\\u043B\\u0435 \\u0437\\u0430\\u0432\\u0435\\u0440\\u0448\\u0435\\u043D\\u0438\\u044F \\u043F\\u0440\\u043E\\u0435\\u043A\\u0442\\u0430?\"}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Vacation\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:true,id:\"Vacation\",name:\"VacationTrue\",checked:!checkVal,onChange:changeVal}),\"\\u0414\\u0430\"]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"Vacation1\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"radio\",value:false,id:\"Vacation\",name:\"VacationFalse\",checked:checkVal,onChange:changeVal}),\"\\u041D\\u0435\\u0442\"]})]}),/*#__PURE__*/_jsxs(\"div\",{style:{textAlign:'center',paddingTop:\"20px\"},children:[/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:clickHandler,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:clearInput,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})]})]})]});}export default VacanciesAdd;","map":{"version":3,"sources":["D:/time_app/client/src/components/VacanciesAdd/VacanciesAdd.jsx"],"names":["React","useEffect","useRef","useState","axios","VacanciesAdd","localUser","JSON","parse","localStorage","getItem","options","setOptions","selectedValue","setSelectedValue","searchQuery","setSearchQuery","userId","setUserId","error","setError","message","setMessage","messageITC","setMessageITC","isView","setIsView","vacancies","setVacancies","status","setStatus","company","setCompany","checkVal","setCheckVal","users","setUsers","modalDep","NameVacationRef","TeamRef","StatusRef","CodeVacations","Company","Description","CodeProject","Grade","handleSearchChange","e","target","value","changeVal","getDeps","get","_id","userOne","data","user","vacancies_function","departId","departmentId","user_id","post","getVacancies","res","extractedOptions","extractOptions","department_id","node","optionsList","id","name","Name","Subclasses","length","forEach","subclass","concat","handleUserClick","userName","setSearchTerm","setFilteredUsers","searchTerm","filteredUsers","handleInputChange","term","filtered","filter","user_name","toLowerCase","includes","clickHandler","codeVacation","current","trim","existingVacancy","some","get_vacancies","vacancy","vacancy_code","userNameToSend","Vacations","namevacancies","description","team_id","status_id","codeVacations","toUpperCase","codeProject","company_id","grade","is_checked","clearInput","handleClickSubmit","handleChangeDeps","textAlign","map","option","index","marginTop","paddingRight","paddingTop"],"mappings":"4SAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,MAA1B,CAAkCC,QAAlC,KAAiD,OAAjD,CAEA,MAAO,oBAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,6IAGA,QAASC,CAAAA,YAAT,EAAwB,CACpB,GAAMC,CAAAA,SAAS,CAAGC,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAlB,CACA,cAA8BP,QAAQ,CAAC,EAAD,CAAtC,wCAAOQ,OAAP,eAAgBC,UAAhB,eACA,eAA0CT,QAAQ,CAAC,EAAD,CAAlD,yCAAOU,aAAP,eAAsBC,gBAAtB,eACA,eAAsCX,QAAQ,CAAC,EAAD,CAA9C,yCAAOY,WAAP,eAAoBC,cAApB,eACA,eAA4Bb,QAAQ,CAAC,EAAD,CAApC,yCAAOc,MAAP,eAAeC,SAAf,eACA,eAA0Bf,QAAQ,CAAC,EAAD,CAAlC,0CAAOgB,KAAP,gBAAcC,QAAd,gBACA,gBAA8BjB,QAAQ,CAAC,EAAD,CAAtC,2CAAOkB,OAAP,gBAAgBC,UAAhB,gBACA,gBAAoCnB,QAAQ,CAAC,EAAD,CAA5C,2CAAOoB,UAAP,gBAAmBC,aAAnB,gBACA,gBAA4BrB,QAAQ,CAAC,KAAD,CAApC,2CAAOsB,MAAP,gBAAeC,SAAf,gBACA,gBAAkCvB,QAAQ,CAAC,EAAD,CAA1C,2CAAOwB,SAAP,gBAAkBC,YAAlB,gBACA,gBAA4BzB,QAAQ,CAAC,EAAD,CAApC,2CAAO0B,MAAP,gBAAeC,SAAf,gBACA,gBAA8B3B,QAAQ,CAAC,EAAD,CAAtC,2CAAO4B,OAAP,gBAAgBC,UAAhB,gBACA,gBAAgC7B,QAAQ,CAAC,KAAD,CAAxC,2CAAO8B,QAAP,gBAAiBC,WAAjB,gBACA,gBAA0B/B,QAAQ,CAAC,EAAD,CAAlC,2CAAOgC,KAAP,gBAAcC,QAAd,gBACA,GAAMC,CAAAA,QAAQ,CAAGnC,MAAM,EAAvB,CACA,GAAMoC,CAAAA,eAAe,CAACpC,MAAM,EAA5B,CACA,GAAMqC,CAAAA,OAAO,CAAGrC,MAAM,EAAtB,CACA,GAAMsC,CAAAA,SAAS,CAAGtC,MAAM,EAAxB,CACA,GAAMuC,CAAAA,aAAa,CAAGvC,MAAM,EAA5B,CACA,GAAMwC,CAAAA,OAAO,CAAGxC,MAAM,EAAtB,CACA,GAAMyC,CAAAA,WAAW,CAAGzC,MAAM,EAA1B,CACA,GAAM0C,CAAAA,WAAW,CAAG1C,MAAM,EAA1B,CACA,GAAM2C,CAAAA,KAAK,CAAG3C,MAAM,EAApB,CAIA,GAAM4C,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,CAAD,CAAO,CAC9B/B,cAAc,CAAC+B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAd,CACH,CAFD,CAMA,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpBhB,WAAW,CAAC,CAACD,QAAF,CAAX,CACH,CAFD,CAGAhC,SAAS,CAAC,UAAM,CAER,GAAMkD,CAAAA,OAAO,0FAAG,mPACU/C,CAAAA,KAAK,CAACgD,GAAN,CAAU,aAAe9C,SAAS,CAAC+C,GAAnC,CADV,QACNC,OADM,qCAESlD,CAAAA,KAAK,CAACgD,GAAN,CAAU,+BAAV,CAFT,QAENvB,MAFM,eAGZC,SAAS,CAACD,MAAM,CAAC0B,IAAR,CAAT,CAHY,sBAIUnD,CAAAA,KAAK,CAACgD,GAAN,CAAU,iCAAV,CAJV,QAINrB,OAJM,eAKZC,UAAU,CAACD,OAAO,CAACwB,IAAT,CAAV,CALY,uBAMOnD,CAAAA,KAAK,CAACgD,GAAN,CAAU,WAAV,CANP,SAMNI,IANM,eAOZpB,QAAQ,CAACoB,IAAI,CAACD,IAAN,CAAR,CAEME,kBATM,CASa,CACrBC,QAAQ,CAAEpD,SAAS,CAACqD,YADC,CAErBC,OAAO,CAAEtD,SAAS,CAAC+C,GAFE,CATb,wBAaejD,CAAAA,KAAK,CAACyD,IAAN,CAAW,0BAAX,CAAsCJ,kBAAtC,CAbf,SAaNK,YAbM,eAcZlC,YAAY,CAACkC,YAAY,CAACP,IAAd,CAAZ,CAdY,uBAgBMnD,CAAAA,KAAK,CAACgD,GAAN,CAAU,+BAAV,CAhBN,SAgBNW,GAhBM,eAiBNR,IAjBM,CAiBCQ,GAAG,CAACR,IAAJ,CAAS,CAAT,EAAY,yBAAZ,CAjBD,CAkBNS,gBAlBM,CAkBaC,cAAc,CAACV,IAAD,CAlB3B,CAmBZ3C,UAAU,CAACoD,gBAAD,CAAV,CACAlD,gBAAgB,CAACwC,OAAO,CAACC,IAAR,CAAaW,aAAd,CAAhB,CApBY,uDAAH,kBAAPf,CAAAA,OAAO,0CAAb,CAuBA,GAAMc,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACE,IAAD,CAAU,CAC7B,GAAIC,CAAAA,WAAW,CAAG,CAAC,CAAEC,EAAE,CAAEF,IAAI,CAACE,EAAX,CAAeC,IAAI,CAAEH,IAAI,CAACI,IAA1B,CAAD,CAAlB,CACA,GAAIJ,IAAI,CAACK,UAAL,EAAmBL,IAAI,CAACK,UAAL,CAAgBC,MAAhB,CAAyB,CAAhD,CAAmD,CAC/CN,IAAI,CAACK,UAAL,CAAgBE,OAAhB,CAAwB,SAAAC,QAAQ,CAAI,CAChCP,WAAW,CAAGA,WAAW,CAACQ,MAAZ,CAAmBX,cAAc,CAACU,QAAD,CAAjC,CAAd,CACH,CAFD,EAGH,CACD,MAAOP,CAAAA,WAAP,CACH,CARD,CASJjB,OAAO,GACV,CAnCQ,CAmCN,EAnCM,CAAT,CAsCA,GAAM0B,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAACC,QAAD,CAAU7D,MAAV,CAAqB,CACzCC,SAAS,CAACD,MAAD,CAAT,CACA8D,aAAa,CAACD,QAAD,CAAb,CACAE,gBAAgB,CAAC,EAAD,CAAhB,CACH,CAJD,CAMA,gBAAoC7E,QAAQ,CAAC,EAAD,CAA5C,2CAAO8E,UAAP,gBAAmBF,aAAnB,gBAEA,gBAA0C5E,QAAQ,CAAC,EAAD,CAAlD,2CAAO+E,aAAP,gBAAsBF,gBAAtB,gBAGA,GAAMG,CAAAA,iBAAiB,CAAG,QAApBA,CAAAA,iBAAoB,CAACpC,CAAD,CAAO,CAC7B,GAAMqC,CAAAA,IAAI,CAAGrC,CAAC,CAACC,MAAF,CAASC,KAAtB,CACA8B,aAAa,CAACK,IAAD,CAAb,CACA,GAAMC,CAAAA,QAAQ,CAAGlD,KAAK,CAACmD,MAAN,CAAa,SAAA9B,IAAI,QAC9BA,CAAAA,IAAI,CAAC+B,SAAL,EAAkB/B,IAAI,CAAC+B,SAAL,CAAeC,WAAf,GAA6BC,QAA7B,CAAsCL,IAAI,CAACI,WAAL,EAAtC,CADY,EAAjB,CAAjB,CAGA,GAAIJ,IAAI,GAAK,EAAb,CAAiB,CACbJ,gBAAgB,CAAC,EAAD,CAAhB,CACH,CAFD,IAEO,CACHA,gBAAgB,CAACK,QAAD,CAAhB,CACH,CACJ,CAXD,CAeA,GAAMK,CAAAA,YAAY,2FAAG,sOAEXC,YAFW,CAEIlD,aAAa,CAACmD,OAAd,CAAsB3C,KAAtB,CAA4BuC,WAA5B,GAA0CK,IAA1C,EAFJ,CAIjB;AACMC,eALW,CAKOnE,SAAS,CAACoE,IAAV,CAAe,mBAAGC,CAAAA,aAAH,OAAGA,aAAH,OACnCA,CAAAA,aAAa,CAACD,IAAd,CAAmB,mBAAGpE,CAAAA,SAAH,OAAGA,SAAH,OACfA,CAAAA,SAAS,CAACoE,IAAV,CAAe,SAAAE,OAAO,QAClBA,CAAAA,OAAO,CAACC,YAAR,EAAwBD,OAAO,CAACC,YAAR,CAAqBV,WAArB,KAAuCG,YAD7C,EAAtB,CADe,EAAnB,CADmC,EAAf,CALP,KAabG,eAba,0BAcbtE,aAAa,CAAC,0BAAD,CAAb,CACAJ,QAAQ,CAAC,EAAD,CAAR,CACAE,UAAU,CAAC,EAAD,CAAV,CAhBa,yCAoBb6E,cApBa,CAoBI,EApBJ,CAqBjB,GAAIlB,UAAU,GAAK,EAAnB,CAAuB,CACnBkB,cAAc,CAAGlF,MAAjB,CACH,CACKmF,SAxBW,CAwBC,CACdC,aAAa,CAAE/D,eAAe,CAACsD,OAAhB,CAAwB3C,KADzB,CAEdqD,WAAW,CAAE3D,WAAW,CAACiD,OAAZ,CAAoB3C,KAFnB,CAGdsD,OAAO,CAAEhE,OAAO,CAACqD,OAAR,CAAgB3C,KAHX,CAIduD,SAAS,CAAEhE,SAAS,CAACoD,OAAV,CAAkB3C,KAJf,CAKdwD,aAAa,CAAEd,YAAY,CAACe,WAAb,EALD,CAMdC,WAAW,CAAE/D,WAAW,CAACgD,OAAZ,CAAoB3C,KANnB,CAOd2D,UAAU,CAAElE,OAAO,CAACkD,OAAR,CAAgB3C,KAPd,CAQd4D,KAAK,CAAEhE,KAAK,CAAC+C,OAAN,CAAc3C,KARP,CASd6D,UAAU,CAAE7E,QATE,CAUd6C,QAAQ,CAAEqB,cAVI,CAxBD,MAsCb7D,eAAe,CAACsD,OAAhB,CAAwB3C,KAAxB,GAAkC,EAAlC,EACAN,WAAW,CAACiD,OAAZ,CAAoB3C,KAApB,GAA8B,EAD9B,EAEAV,OAAO,CAACqD,OAAR,CAAgB3C,KAAhB,GAA0B,EAF1B,EAGAT,SAAS,CAACoD,OAAV,CAAkB3C,KAAlB,GAA4B,EAH5B,EAIA0C,YAAY,GAAK,EAJjB,EAKA/C,WAAW,CAACgD,OAAZ,CAAoB3C,KAApB,GAA8B,EAL9B,EAMAJ,KAAK,CAAC+C,OAAN,CAAc3C,KAAd,GAAwB,EANxB,EAOAP,OAAO,CAACkD,OAAR,CAAgB3C,KAAhB,GAA0B,EA7Cb,4BA+Cb7B,QAAQ,CAAC,gBAAD,CAAR,CACAM,SAAS,CAAC,IAAD,CAAT,CAhDa,wDAkDKtB,CAAAA,KAAK,CAACyD,IAAN,CAAW,iBAAX,CAA8BuC,SAA9B,CAlDL,SAkDPrC,GAlDO,qBAmDTA,GAAG,CAAClC,MAAJ,GAAe,GAnDN,4BAoDTT,QAAQ,CAAC,EAAD,CAAR,CACAE,UAAU,CAAC,oBAAD,CAAV,CACMmC,kBAtDG,CAsDgB,CACrBC,QAAQ,CAAEpD,SAAS,CAACqD,YADC,CAErBC,OAAO,CAAEtD,SAAS,CAAC+C,GAFE,CAtDhB,yBA0DkBjD,CAAAA,KAAK,CAACyD,IAAN,CAAW,0BAAX,CAAsCJ,kBAAtC,CA1DlB,SA0DHK,YA1DG,gBA2DTlC,YAAY,CAACkC,YAAY,CAACP,IAAd,CAAZ,CA3DS,yDAAH,kBAAZmC,CAAAA,YAAY,2CAAlB,CAgEA,GAAMqB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACrBpE,WAAW,CAACiD,OAAZ,CAAoB3C,KAApB,CAA4B,EAA5B,CACAX,eAAe,CAACsD,OAAhB,CAAwB3C,KAAxB,CAA8B,EAA9B,CACAR,aAAa,CAACmD,OAAd,CAAsB3C,KAAtB,CAA4B,EAA5B,CACAL,WAAW,CAACgD,OAAZ,CAAoB3C,KAApB,CAA0B,EAA1B,CACAJ,KAAK,CAAC+C,OAAN,CAAc3C,KAAd,CAAoB,EAApB,CACA8B,aAAa,CAAC,EAAD,CAAb,CACAC,gBAAgB,CAAC,EAAD,CAAhB,CACAhE,cAAc,CAAC,EAAD,CAAd,CACAM,UAAU,CAAC,EAAD,CAAV,CACAF,QAAQ,CAAC,EAAD,CAAR,CACH,CAXD,CAeA,QAAS4F,CAAAA,iBAAT,EAA6B,CACzBxF,aAAa,CAAC,EAAD,CAAb,CACAJ,QAAQ,CAAC,EAAD,CAAR,CACAE,UAAU,CAAC,EAAD,CAAV,CACH,CAED,GAAM2F,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,CAAClE,CAAD,CAAO,CAC5BjC,gBAAgB,CAACiC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAhB,CACH,CAFD,CAIA,mBACI,wCACY,aADZ,cAEY,aAAK,SAAS,CAAC,kBAAf,wBACI,WAAI,KAAK,CAAE,CAACiE,SAAS,CAAC,QAAX,CAAX,+GADJ,CAGQ,CAAC/F,KAAD,EAAUM,MAAV,EAAoBJ,OAApB,EAA+B,CAACE,UAAhC,eACA,YAAK,SAAS,CAAC,OAAf,0EAJR,CAOQF,OAAO,EAAI,CAACF,KAAZ,EAAqB,CAACM,MAAtB,EAAgC,CAACF,UAAjC,eACA,YAAK,SAAS,CAAC,OAAf,0EARR,CAWQJ,KAAK,EAAIM,MAAT,EAAmB,CAACF,UAApB,eACA,YAAK,SAAS,CAAC,OAAf,gHAZR,CAeQA,UAAU,EAAI,CAACF,OAAf,eACA,YAAK,SAAS,CAAC,OAAf,UAAwBE,UAAxB,EAhBR,cAkBI,cAlBJ,cAoBI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,gBAAtC,uIADJ,cAEI,cAAO,GAAG,CAAEe,eAAZ,CAA6B,IAAI,CAAC,MAAlC,CAAyC,WAAW,CAAC,2HAArD,CAA6E,SAAS,CAAC,eAAvF,CAAuG,WAAW,CAAE0E,iBAApH,EAFJ,GApBJ,cAwBI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,+GADJ,cAEI,iBAAU,GAAG,CAAErE,WAAf,CAA4B,WAAW,CAAC,mGAAxC,CAA4D,SAAS,CAAC,kBAAtE,CAAyF,WAAW,CAAEqE,iBAAtG,EAFJ,GAxBJ,cA4BI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,4FADJ,cAEQ,eACI,KAAK,CAAEnG,aAAe;AAD1B,CAEI,QAAQ,CAAEoG,gBAFd,CAGI,GAAG,CAAE5E,QAHT,CAII,SAAS,CAAC,eAJd,UAMK1B,OAAO,CAACwG,GAAR,CAAY,SAACC,MAAD,qBACT,eAAwB,KAAK,CAAEA,MAAM,CAAC/C,EAAtC,UACK+C,MAAM,CAAC9C,IADZ,EAAa8C,MAAM,CAAC/C,EAApB,CADS,EAAZ,CANL,EAFR,GA5BJ,cA2CI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,kDADJ,cAEA,eAAQ,GAAG,CAAE7B,SAAb,CAAwB,SAAS,CAAC,eAAlC,CAAkD,WAAW,CAAEwE,iBAA/D,UACKnF,MAAM,CAACsF,GAAP,CAAW,SAACtF,MAAD,CAASyC,IAAT,qBAAkB,eAAmB,KAAK,CAAEzC,MAAM,CAACwC,EAAjC,UAAsCxC,MAAM,CAACyC,IAA7C,EAAaA,IAAb,CAAlB,EAAX,CADL,EAFA,GA3CJ,cAkDI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,iFADJ,cAEI,cAAO,GAAG,CAAE7B,aAAZ,CACO,KAAK,CAAE1B,WADd,CAEO,QAAQ,CAAE+B,kBAFjB,CAGO,IAAI,CAAC,MAHZ,CAIO,WAAW,CAAC,qEAJnB,CAKO,SAAS,CAAC,eALjB,CAMO,WAAW,CAAEkE,iBANpB,EAFJ,GAlDJ,cA+DI,aAAK,SAAS,CAAC,UAAf,wBACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,6FADJ,cAEI,cACI,IAAI,CAAC,MADT,CAEI,WAAW,CAAC,iFAFhB,CAGI,SAAS,CAAC,eAHd,CAII,KAAK,CAAE/B,UAJX,CAKI,QAAQ,CAAEE,iBALd,CAMI,WAAW,CAAE6B,iBANjB,EAFJ,cAUI,YAAK,SAAS,CAAC,WAAf,UACK9B,aAAa,CAACT,MAAd,CAAuB,CAAvB,eACG,qBACKS,aAAa,CAACiC,GAAd,CAAkB,SAAC3D,IAAD,CAAO6D,KAAP,qBACf,YAAK,SAAS,CAAC,eAAf,CAA2C,KAAK,CAAE7D,IAAI,CAACa,EAAvD,CAA2D,OAAO,CAAE,yBAAMQ,CAAAA,eAAe,CAACrB,IAAI,CAAC+B,SAAN,CAAiB/B,IAAI,CAACa,EAAtB,CAArB,EAApE,UACKb,IAAI,CAAC+B,SADV,EAAoC8B,KAApC,CADe,EAAlB,CADL,EAFR,EAVJ,GA/DJ,cAsFI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,8DADJ,cAEI,gBAAQ,GAAG,CAAE3E,OAAb,CAAsB,SAAS,CAAC,eAAhC,CAAgD,WAAW,CAAEsE,iBAA7D,wBACI,eAAQ,KAAK,CAAC,EAAd,8DADJ,CAEKjF,OAAO,CAACoF,GAAR,CAAY,SAACpF,OAAD,CAAUuC,IAAV,qBAAmB,eAAmB,KAAK,CAAEvC,OAAO,CAACsC,EAAlC,UAAuCtC,OAAO,CAACuC,IAA/C,EAAaA,IAAb,CAAnB,EAAZ,CAFL,GAFJ,GAtFJ,cA8FI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,2EADJ,cAEI,cAAO,GAAG,CAAE1B,WAAZ,CAAyB,IAAI,CAAC,QAA9B,CAAuC,WAAW,CAAC,kJAAnD,CAAmF,SAAS,CAAC,eAA7F,CAA6G,WAAW,CAAEoE,iBAA1H,EAFJ,GA9FJ,cAkGI,oCACI,YAAK,OAAO,CAAC,cAAb,CAA4B,SAAS,CAAC,YAAtC,4CADJ,cAEI,cAAO,GAAG,CAAEnE,KAAZ,CAAmB,IAAI,CAAC,QAAxB,CAAiC,WAAW,CAAC,gCAA7C,CAAqD,SAAS,CAAC,eAA/D,CAA+E,WAAW,CAAEmE,iBAA5F,EAFJ,GAlGJ,cAsGI,aAAK,KAAK,CAAE,CAACM,SAAS,CAAC,MAAX,CAAZ,wBACA,cAAO,KAAK,CAAE,CAACC,YAAY,CAAC,MAAd,CAAd,qOADA,cAEA,eAAO,OAAO,CAAC,UAAf,wBACI,cACA,IAAI,CAAC,OADL,CAEA,KAAK,CAAE,IAFP,CAGA,EAAE,CAAC,UAHH,CAIA,IAAI,CAAC,cAJL,CAKA,OAAO,CAAE,CAACtF,QALV,CAMA,QAAQ,CAAEiB,SANV,EADJ,kBAFA,cAWA,eAAO,OAAO,CAAC,WAAf,wBACI,cACA,IAAI,CAAC,OADL,CAEA,KAAK,CAAE,KAFP,CAGA,EAAE,CAAC,UAHH,CAIA,IAAI,CAAC,eAJL,CAKA,OAAO,CAAEjB,QALT,CAMA,QAAQ,CAAEiB,SANV,EADJ,wBAXA,GAtGJ,cA2HI,aAAK,KAAK,CAAE,CAACgE,SAAS,CAAC,QAAX,CAAoBM,UAAU,CAAC,MAA/B,CAAZ,wBACI,eAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAE9B,YAA1C,oEADJ,cAEI,eAAQ,SAAS,CAAC,cAAlB,CAAiC,OAAO,CAAEqB,UAA1C,8DAFJ,GA3HJ,GAFZ,GADJ,CAsIH,CACD,cAAe1G,CAAAA,YAAf","sourcesContent":["import React, {useEffect, useRef, useState} from \"react\";\r\n\r\nimport './VacanciesAdd.css'\r\nimport axios from \"axios\";\r\n\r\n\r\nfunction VacanciesAdd() {\r\n    const localUser = JSON.parse(localStorage.getItem('user'))\r\n    const [options, setOptions] = useState([]);\r\n    const [selectedValue, setSelectedValue] = useState('');\r\n    const [searchQuery, setSearchQuery] = useState('');\r\n    const [userId, setUserId] = useState([])\r\n    const [error, setError] = useState('')\r\n    const [message, setMessage] = useState('')\r\n    const [messageITC, setMessageITC] = useState('')\r\n    const [isView, setIsView] = useState(false)\r\n    const [vacancies, setVacancies] = useState([])\r\n    const [status, setStatus] = useState([])\r\n    const [company, setCompany] = useState([])\r\n    const [checkVal, setCheckVal] = useState(false)\r\n    const [users, setUsers] = useState([])\r\n    const modalDep = useRef()\r\n    const NameVacationRef=useRef()\r\n    const TeamRef = useRef()\r\n    const StatusRef = useRef()\r\n    const CodeVacations = useRef()\r\n    const Company = useRef()\r\n    const Description = useRef()\r\n    const CodeProject = useRef()\r\n    const Grade = useRef()\r\n\r\n\r\n\r\n    const handleSearchChange = (e) => {\r\n        setSearchQuery(e.target.value);\r\n    };\r\n\r\n\r\n\r\n    const changeVal = () => {\r\n        setCheckVal(!checkVal)\r\n    }\r\n    useEffect(() => {\r\n\r\n            const getDeps = async () => {\r\n                const userOne = await axios.get('/api/user/' + localUser._id)\r\n                const status = await axios.get('/api/Vacations/?status=status')\r\n                setStatus(status.data)\r\n                const company = await axios.get('/api/Vacations/?company=company')\r\n                setCompany(company.data)\r\n                const user = await axios.get('/api/user')\r\n                setUsers(user.data)\r\n\r\n                const vacancies_function={\r\n                    departId: localUser.departmentId,\r\n                    user_id: localUser._id\r\n                }\r\n                const getVacancies = await axios.post('/api/Vacations_function/',vacancies_function)\r\n                setVacancies(getVacancies.data)\r\n\r\n                const res = await axios.get('/api/department_tree_to_json/');\r\n                const data = res.data[0]['department_tree_to_json'];\r\n                const extractedOptions = extractOptions(data);\r\n                setOptions(extractedOptions);\r\n                setSelectedValue(userOne.data.department_id);\r\n\r\n            }\r\n            const extractOptions = (node) => {\r\n                let optionsList = [{ id: node.id, name: node.Name }];\r\n                if (node.Subclasses && node.Subclasses.length > 0) {\r\n                    node.Subclasses.forEach(subclass => {\r\n                        optionsList = optionsList.concat(extractOptions(subclass));\r\n                    });\r\n                }\r\n                return optionsList;\r\n            };\r\n        getDeps()\r\n    }, [])\r\n\r\n\r\n    const handleUserClick = (userName,userId) => {\r\n        setUserId(userId)\r\n        setSearchTerm(userName)\r\n        setFilteredUsers([])\r\n    }\r\n\r\n    const [searchTerm, setSearchTerm] = useState('');\r\n\r\n    const [filteredUsers, setFilteredUsers] = useState([]);\r\n\r\n\r\n    const handleInputChange = (e) => {\r\n        const term = e.target.value;\r\n        setSearchTerm(term);\r\n        const filtered = users.filter(user =>\r\n            user.user_name && user.user_name.toLowerCase().includes(term.toLowerCase())\r\n        );\r\n        if (term === '') {\r\n            setFilteredUsers([])\r\n        } else {\r\n            setFilteredUsers(filtered);\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const clickHandler = async () => {\r\n\r\n        const codeVacation = CodeVacations.current.value.toLowerCase().trim();\r\n\r\n        // Проверяем, есть ли уже вакансия с таким кодом\r\n        const existingVacancy = vacancies.some(({ get_vacancies }) =>\r\n            get_vacancies.some(({ vacancies }) =>\r\n                vacancies.some(vacancy =>\r\n                    vacancy.vacancy_code && vacancy.vacancy_code.toLowerCase() === codeVacation\r\n                )\r\n            )\r\n        );\r\n\r\n        if (existingVacancy) {\r\n            setMessageITC('Такая ИТС уже существует');\r\n            setError('');\r\n            setMessage('');\r\n            return;\r\n        }\r\n\r\n        let userNameToSend = '';\r\n        if (searchTerm !== '') {\r\n            userNameToSend = userId;\r\n        }\r\n        const Vacations = {\r\n            namevacancies: NameVacationRef.current.value,\r\n            description: Description.current.value,\r\n            team_id: TeamRef.current.value,\r\n            status_id: StatusRef.current.value,\r\n            codeVacations: codeVacation.toUpperCase(),\r\n            codeProject: CodeProject.current.value,\r\n            company_id: Company.current.value,\r\n            grade: Grade.current.value,\r\n            is_checked: checkVal,\r\n            userName: userNameToSend\r\n        };\r\n\r\n        if (\r\n            NameVacationRef.current.value === '' ||\r\n            Description.current.value === '' ||\r\n            TeamRef.current.value === '' ||\r\n            StatusRef.current.value === '' ||\r\n            codeVacation === '' ||\r\n            CodeProject.current.value === '' ||\r\n            Grade.current.value === '' ||\r\n            Company.current.value === ''\r\n        ) {\r\n            setError('Заполните поле');\r\n            setIsView(true);\r\n        } else {\r\n            const res = await axios.post('/api/Vacations/', Vacations);\r\n            if (res.status === 200) {\r\n                setError('');\r\n                setMessage('Вакансия добавлена');\r\n                const vacancies_function={\r\n                    departId: localUser.departmentId,\r\n                    user_id: localUser._id\r\n                }\r\n                const getVacancies = await axios.post('/api/Vacations_function/',vacancies_function)\r\n                setVacancies(getVacancies.data)\r\n            }\r\n        }\r\n    };\r\n\r\n    const clearInput = () => {\r\n        Description.current.value = ''\r\n        NameVacationRef.current.value=''\r\n        CodeVacations.current.value=''\r\n        CodeProject.current.value=''\r\n        Grade.current.value=''\r\n        setSearchTerm('')\r\n        setFilteredUsers([])\r\n        setSearchQuery('')\r\n        setMessage('')\r\n        setError('')\r\n    }\r\n\r\n\r\n\r\n    function handleClickSubmit() {\r\n        setMessageITC('')\r\n        setError('')\r\n        setMessage('')\r\n    }\r\n\r\n    const handleChangeDeps = (e) => {\r\n        setSelectedValue(e.target.value);\r\n    };\r\n\r\n    return (\r\n        <>\r\n                    <br/>\r\n                    <div className=\"VacationsMainAdd\">\r\n                        <h2 style={{textAlign:'center'}}>Добавить вакансию</h2>\r\n                        {\r\n                            !error && isView && message && !messageITC &&\r\n                            <div className='error'>Добавленно</div>\r\n                        }\r\n                        {\r\n                            message && !error && !isView && !messageITC &&\r\n                            <div className='error'>Добавленно</div>\r\n                        }\r\n                        {\r\n                            error && isView && !messageITC &&\r\n                            <div className='error'>Заполните все поля</div>\r\n                        }\r\n                        {\r\n                            messageITC && !message &&\r\n                            <div className='error'>{messageITC}</div>\r\n                        }\r\n                        <div>\r\n                        </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabelName\">Наименование вакансии</div>\r\n                            <input ref={NameVacationRef} type='text' placeholder='Наименование вакансии' className='InputVacation' onMouseDown={handleClickSubmit}/>\r\n                        </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Описание вакансии</div>\r\n                            <textarea ref={Description} placeholder='Описание вакансии' className='InputVacationAdd' onMouseDown={handleClickSubmit}/>\r\n                        </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Подразделение</div>\r\n                                <select\r\n                                    value={selectedValue} // Привязываем значение к selectedValue\r\n                                    onChange={handleChangeDeps}\r\n                                    ref={modalDep}\r\n                                    className=\"InputVacation\"\r\n                                >\r\n                                    {options.map((option) => (\r\n                                        <option key={option.id} value={option.id}>\r\n                                            {option.name}\r\n                                        </option>\r\n                                    ))}\r\n                                </select>\r\n                            </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Статус</div>\r\n                        <select ref={StatusRef} className='InputVacation' onMouseDown={handleClickSubmit}>\r\n                            {status.map((status, name) => <option key={name} value={status.id}>{status.name}</option>)}\r\n                        </select>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Код вакансии</div>\r\n                            <input ref={CodeVacations}\r\n                                   value={searchQuery}\r\n                                   onChange={handleSearchChange}\r\n                                   type='text'\r\n                                   placeholder='Код вакансии'\r\n                                   className='InputVacation'\r\n                                   onMouseDown={handleClickSubmit}/>\r\n                        </div>\r\n\r\n\r\n\r\n                        <div className='inputDiv'>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Имя сотрудника</div>\r\n                            <input\r\n                                type='text'\r\n                                placeholder='Имя сотрудника'\r\n                                className='InputVacation'\r\n                                value={searchTerm}\r\n                                onChange={handleInputChange}\r\n                                onMouseDown={handleClickSubmit}\r\n                            />\r\n                            <div className='divSelect'>\r\n                                {filteredUsers.length > 0 && (\r\n                                    <div>\r\n                                        {filteredUsers.map((user, index) => (\r\n                                            <div className='selectNameDiv' key={index} value={user.id} onClick={() => handleUserClick(user.user_name, user.id)}>\r\n                                                {user.user_name}\r\n                                            </div>\r\n                                        ))}\r\n                                    </div>\r\n                                )}\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Компания</div>\r\n                            <select ref={Company} className='InputVacation' onMouseDown={handleClickSubmit}>\r\n                                <option value=''>Компания</option>\r\n                                {company.map((company, name) => <option key={name} value={company.id}>{company.name}</option>)}\r\n                            </select>\r\n\r\n                        </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Код проекта</div>\r\n                            <input ref={CodeProject} type='number' placeholder='Код проекта(текущий бюджет=0)' className='InputVacation' onMouseDown={handleClickSubmit}/>\r\n                        </div>\r\n                        <div>\r\n                            <div htmlFor=\"nameVacation\" className=\"InputLabel\">Грейд</div>\r\n                            <input ref={Grade} type='number' placeholder='Грейд' className='InputVacation' onMouseDown={handleClickSubmit}/>\r\n                        </div>\r\n                        <div style={{marginTop:'20px'}}>\r\n                        <label style={{paddingRight:'10px'}}>Нужна вакансия после завершения проекта?</label>\r\n                        <label htmlFor='Vacation'>\r\n                            <input\r\n                            type='radio'\r\n                            value={true}\r\n                            id='Vacation'\r\n                            name='VacationTrue'\r\n                            checked={!checkVal}\r\n                            onChange={changeVal}\r\n                        />Да</label>\r\n                        <label htmlFor='Vacation1'>\r\n                            <input\r\n                            type='radio'\r\n                            value={false}\r\n                            id='Vacation'\r\n                            name='VacationFalse'\r\n                            checked={checkVal}\r\n                            onChange={changeVal}\r\n                        />Нет</label>\r\n                        </div>\r\n                        <div style={{textAlign:'center',paddingTop:\"20px\"}}>\r\n                            <button className=\"filterButton\" onClick={clickHandler}>Сохранить</button>\r\n                            <button className=\"filterButton\" onClick={clearInput}>Сбросить</button>\r\n                            {/*<button className=\"filterButton\" onClick={() => window.location.href = `/department/${depsId.depsId}`} >Выход</button>*/}\r\n                        </div>\r\n                    </div>\r\n        </>\r\n    )\r\n}\r\nexport default VacanciesAdd"]},"metadata":{},"sourceType":"module"}