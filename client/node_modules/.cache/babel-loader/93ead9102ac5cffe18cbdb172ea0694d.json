{"ast":null,"code":"import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useRef,useState}from'react';import Topbar from'../Topbar/Topbar';import Pagination from\"../Pagination/Pagination\";import ModalVacations from\"../Templates/ModalVacations/ModalVacations\";import axios from\"axios\";import'./VacanciesView.css';import VacanciesItem from\"../VacanciesItem/VacanciesItem\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function VacanciesView(){var localUser=JSON.parse(localStorage.getItem('user'));var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalVacations=_useState2[0],setModalVacations=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),deps=_useState4[0],setDeps=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),find=_useState6[0],setFind=_useState6[1];var _useState7=useState(1),_useState8=_slicedToArray(_useState7,2),currentPage=_useState8[0],setCurrentPage=_useState8[1];var _useState9=useState(5),_useState10=_slicedToArray(_useState9,1),postsPerPage=_useState10[0];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),vacancies=_useState12[0],setVacancies=_useState12[1];var lastPostIndex=currentPage*postsPerPage;var firstPostIndex=lastPostIndex-postsPerPage;var currentlyPosts=vacancies.slice(firstPostIndex,lastPostIndex);var lastPostIndexVacancies=currentPage*postsPerPage;var firstPostIndexVacancies=lastPostIndexVacancies-postsPerPage;var currentlyVacancies=find.slice(firstPostIndexVacancies,lastPostIndexVacancies);var paginate=function paginate(pageNumber){return setCurrentPage(pageNumber);};var department=useRef();var searchRef=useRef();useEffect(function(){var VacationsView=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res,getVacancies;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/departments/');case 2:res=_context.sent;setDeps(res.data);_context.next=6;return axios.get('/api/Vacations/');case 6:getVacancies=_context.sent;setVacancies(getVacancies.data);case 8:case\"end\":return _context.stop();}}},_callee);}));return function VacationsView(){return _ref.apply(this,arguments);};}();VacationsView();},[]);var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),searchValue=_useState14[0],setSearchValue=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isOpen=_useState16[0],setIsOpen=_useState16[1];var search=function search(){setFind(vacancies.filter(function(vac){return vac.name.toLowerCase().includes(searchValue.toLowerCase());}));setIsOpen(false);};var reset=function reset(){searchRef.current.value='';};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"Vacations\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"VacationsContainerTop\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"VacationsMain\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"search\",placeholder:\"\\u041D\\u0430\\u0438\\u043C\\u0435\\u043D\\u043E\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\",className:\"ModalInput\",style:{'marginRight':'10px'},onChange:function onChange(e){return setSearchValue(e.target.value);},ref:searchRef})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{ref:department,className:\"depsView\",children:deps.map(function(dep,name){return/*#__PURE__*/_jsx(\"option\",{selected:dep.id===localUser.departmentId,value:dep.id,children:dep.department_name},name);})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:search,children:\"\\u041D\\u0430\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:reset,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",className:\"ModalInput\",style:{'marginRight':'10px'}}),\"\\u2014  \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",className:\"ModalInput\",style:{'marginRight':'10px'}})]})]}),isOpen?currentlyPosts.map(function(vacancies,id){return/*#__PURE__*/_jsx(\"div\",{className:\"VacationsContainer\",onClick:function onClick(){return setModalVacations(true);},children:/*#__PURE__*/_jsx(VacanciesItem,{vacancies:vacancies})},id);}):/*#__PURE__*/_jsx(\"div\",{children:currentlyVacancies.map(function(vacancies,id){return/*#__PURE__*/_jsx(\"div\",{className:\"VacationsContainer\",onClick:function onClick(){return setModalVacations(true);},children:/*#__PURE__*/_jsx(VacanciesItem,{vacancies:vacancies})},id);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"Pagination\",children:isOpen?/*#__PURE__*/_jsx(Pagination,{postsPerPage:postsPerPage,totalPosts:vacancies.length,paginate:paginate,currentPage:currentPage}):/*#__PURE__*/_jsx(Pagination,{postsPerPage:postsPerPage,totalPosts:find.length,paginate:paginate,currentPage:currentPage})}),/*#__PURE__*/_jsxs(ModalVacations,{active:modalVacations,setActive:setModalVacations,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0435\\u043D\\u0438\\u0435 \\u0438\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u0438:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"input\",{value:\"\"}),/*#__PURE__*/_jsx(\"button\",{className:\"ModalButton\",type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"div\",{})]});}export default VacanciesView;","map":{"version":3,"sources":["D:/time_app/client/src/components/VacanciesView/VacanciesView.jsx"],"names":["React","useEffect","useRef","useState","Topbar","Pagination","ModalVacations","axios","VacanciesItem","VacanciesView","localUser","JSON","parse","localStorage","getItem","modalVacations","setModalVacations","deps","setDeps","find","setFind","currentPage","setCurrentPage","postsPerPage","vacancies","setVacancies","lastPostIndex","firstPostIndex","currentlyPosts","slice","lastPostIndexVacancies","firstPostIndexVacancies","currentlyVacancies","paginate","pageNumber","department","searchRef","VacationsView","get","res","data","getVacancies","searchValue","setSearchValue","isOpen","setIsOpen","search","filter","vac","name","toLowerCase","includes","reset","current","value","e","target","map","dep","id","departmentId","department_name","length"],"mappings":"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","sourcesContent":["import React, {useEffect, useRef, useState} from 'react'\r\nimport Topbar from '../Topbar/Topbar'\r\nimport Pagination from \"../Pagination/Pagination\";\r\nimport ModalVacations from \"../Templates/ModalVacations/ModalVacations\"\r\nimport axios from \"axios\";\r\nimport './VacanciesView.css'\r\nimport VacanciesItem from \"../VacanciesItem/VacanciesItem\";\r\n\r\n\r\n\r\n\r\nfunction VacanciesView() {\r\n    const localUser = JSON.parse(localStorage.getItem('user'))\r\n    const [modalVacations, setModalVacations] = useState(false)\r\n    const [deps, setDeps] = useState([])\r\n    const [find, setFind] = useState([])\r\n\r\n\r\n    const [currentPage, setCurrentPage] = useState(1)\r\n    const [postsPerPage] = useState(5)\r\n\r\n\r\n    const [vacancies, setVacancies] = useState([])\r\n\r\n    const lastPostIndex = currentPage * postsPerPage\r\n    const firstPostIndex = lastPostIndex - postsPerPage\r\n    const currentlyPosts = vacancies.slice(firstPostIndex, lastPostIndex)\r\n\r\n    const lastPostIndexVacancies = currentPage * postsPerPage\r\n    const firstPostIndexVacancies = lastPostIndexVacancies - postsPerPage\r\n    const currentlyVacancies = find.slice(firstPostIndexVacancies, lastPostIndexVacancies)\r\n\r\n\r\n\r\n\r\n\r\n    const paginate = pageNumber => setCurrentPage(pageNumber)\r\n\r\n\r\n\r\n\r\n    const department = useRef()\r\n    const searchRef = useRef()\r\n\r\n    useEffect(() => {\r\n        const VacationsView = async () => {\r\n            const res = await axios.get('/api/departments/')\r\n            setDeps(res.data)\r\n            const getVacancies = await axios.get('/api/Vacations/')\r\n            setVacancies(getVacancies.data)\r\n\r\n        }\r\n\r\n        VacationsView()\r\n    }, [])\r\n\r\n\r\n    const [searchValue, setSearchValue] = useState(\"\")\r\n    const [isOpen, setIsOpen] = useState(true)\r\n\r\n\r\n\r\n\r\n\r\n    const search = () => {\r\n            setFind(vacancies.filter(vac => {\r\n                return vac.name.toLowerCase().includes(searchValue.toLowerCase())\r\n            }))\r\n        setIsOpen(false)\r\n    }\r\n\r\n    const reset = () => {\r\n\r\n        searchRef.current.value=''\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Topbar/>\r\n            <div className='Vacations'>\r\n                <div className=\"VacationsContainerTop\">\r\n                    <h2>Вакансии</h2>\r\n                    <br/>\r\n                    <div className=\"VacationsMain\">\r\n                        <div>\r\n                    <input\r\n                        type='search'\r\n                        placeholder=\"Наименование вакансии\"\r\n                        className=\"ModalInput\"\r\n                        style={{'marginRight': '10px'}}\r\n                        onChange={(e) => setSearchValue(e.target.value)}\r\n                        ref={searchRef}\r\n                    />\r\n                    </div>\r\n                        <div>\r\n                        <select ref={department} className='depsView'>\r\n                            {deps.map((dep, name) => <option selected={dep.id === localUser.departmentId} key={name} value={dep.id}>{dep.department_name}</option>)}\r\n                        </select>\r\n                        </div>\r\n                            <div>\r\n                        <button className=\"filterButton\" onClick={search}>Найти</button>\r\n                            </div>\r\n                        <div>\r\n                        <button className=\"filterButton\" onClick={reset}>Сбросить</button>\r\n                            </div>\r\n                        </div>\r\n                    <br/>\r\n\r\n                   <div>\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Выберите дату\"\r\n                        className=\"ModalInput\"\r\n\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                        —  <input\r\n                            type='date'\r\n                            placeholder=\"Выберите дату\"\r\n                            className=\"ModalInput\"\r\n                            style={{'marginRight': '10px'}}\r\n                        />\r\n                    </div>\r\n                </div>\r\n                    {isOpen ? (\r\n                        currentlyPosts.map((vacancies, id) => (\r\n                            <div className='VacationsContainer' key={id} onClick={() => setModalVacations(true)}>\r\n                                <VacanciesItem vacancies={vacancies}/>\r\n                            </div>\r\n\r\n                        ))\r\n                    ) : (\r\n                        <div>\r\n                            {currentlyVacancies.map((vacancies, id) => (\r\n                                <div className='VacationsContainer' key={id} onClick={() => setModalVacations(true)}>\r\n                                    <VacanciesItem vacancies={vacancies}/>\r\n                                </div>\r\n                            ))}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n\r\n            <div className='Pagination'>\r\n\r\n                {isOpen ? <Pagination postsPerPage={postsPerPage} totalPosts={vacancies.length} paginate={paginate}\r\n                       currentPage={currentPage} />:\r\n                    <Pagination postsPerPage={postsPerPage} totalPosts={find.length} paginate={paginate}\r\n                                                                currentPage={currentPage} />}\r\n\r\n            </div>\r\n\r\n            <ModalVacations active={modalVacations} setActive={setModalVacations}>\r\n                <h1>Изменение информации:</h1>\r\n                <hr/>\r\n                    <input\r\n                        value=''\r\n\r\n                    />\r\n                    <button className=\"ModalButton\" type=\"submit\" >\r\n                        Сохранить\r\n                    </button>\r\n            </ModalVacations>\r\n                        <div>\r\n                        </div>\r\n\r\n        </>\r\n\r\n    )\r\n}\r\nexport default VacanciesView"]},"metadata":{},"sourceType":"module"}