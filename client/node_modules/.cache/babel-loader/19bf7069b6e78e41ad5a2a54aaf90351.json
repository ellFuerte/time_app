{"ast":null,"code":"import _toConsumableArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import Topbar from'../../components/Topbar/Topbar';import'../ReportsNominations/ReportsNominations.css';import React,{useRef,useState,useMemo}from\"react\";import{useParams}from\"react-router-dom\";import{CSVLink}from'react-csv';import axios from\"axios\";import RepostInfoNominations from\"../../components/RepostInfoNominations/RepostInfoNominations\";import Pagination from\"../../components/Pagination/Pagination\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ReportsNominations(){var _useState=useState({key:'Кто',direction:'ascending'}),_useState2=_slicedToArray(_useState,2),sortConfig=_useState2[0],setSortConfig=_useState2[1];var _useState3=useState({key:'Номинант',direction:'ascending'}),_useState4=_slicedToArray(_useState3,2),sortConfig1=_useState4[0],setSortConfig1=_useState4[1];var _useState5=useState({key:'nominations_name',direction:'ascending'}),_useState6=_slicedToArray(_useState5,2),sortConfig2=_useState6[0],setSortConfig2=_useState6[1];var _useState7=useState({key:'date',direction:'ascending'}),_useState8=_slicedToArray(_useState7,2),sortConfig3=_useState8[0],setSortConfig3=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),error=_useState10[0],setError=_useState10[1];var historyStartWork=useRef(null);var historyEndWork=useRef(null);var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isFilter=_useState12[0],setIsFilter=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),posts=_useState14[0],setPosts=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isOpen=_useState16[0],setisOpen=_useState16[1];var username=useParams();var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var start,end,filter,fill;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:start=historyStartWork.current.value;end=historyEndWork.current.value;if(start===\"\"||end===\"\"){setError('Введите дату');}else{if(start!==''||end!==''){setError('Выберите дату');}if(end<start){setError('Конечная дата меньше начальной');}else{filter={startDateNomination:historyStartWork.current.value,endDateNomination:historyEndWork.current.value};setError('');fill=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.post('/api/post/Reports',filter);case 2:res=_context.sent;setPosts(res.data);setError('');case 5:case\"end\":return _context.stop();}}},_callee);}));return function fill(){return _ref2.apply(this,arguments);};}();fill();}}case 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleClick(){return _ref.apply(this,arguments);};}();var handleClickCancel=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setError('');setIsFilter(false);historyStartWork.current.value='';historyEndWork.current.value='';case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function handleClickCancel(){return _ref3.apply(this,arguments);};}();var requestSort=function requestSort(key){if(historyStartWork.current.value!==''&&historyEndWork.current.value!==''){var direction='ascending';if(sortConfig.key===key&&sortConfig.direction==='ascending'||sortConfig1.key===key&&sortConfig1.direction==='ascending'||sortConfig2.key===key&&sortConfig2.direction==='ascending'||sortConfig3.key===key&&sortConfig3.direction==='ascending'){direction='descending';}setSortConfig({key:key,direction:direction});setSortConfig1({key:key,direction:direction});setSortConfig2({key:key,direction:direction});setSortConfig3({key:key,direction:direction});}};var sortedPosts=useMemo(function(){var sortablePosts=_toConsumableArray(posts);if(sortConfig!==null){sortablePosts.sort(function(a,b){if(a[sortConfig.key]<b[sortConfig.key]){return sortConfig.direction==='ascending'?-1:1;}if(a[sortConfig.key]>b[sortConfig.key]){return sortConfig.direction==='ascending'?1:-1;}setisOpen(true);return 0;});}return sortablePosts;},[posts,sortConfig]);return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"Reports\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"ReportsContainer\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"ReportsMainText\",children:\"\\u041E\\u0442\\u0447\\u0435\\u0442 \\u043F\\u043E \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u044F\\u043C\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"errorHistoryInfo\",children:error}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u041D\\u0430\\u0447\\u0430\\u043B\\u043E \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B\",className:\"ModalInput\",ref:historyStartWork,style:{'marginRight':'10px'}})}),/*#__PURE__*/_jsxs(\"div\",{children:[\"\\u2014  \",/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u041A\\u043E\\u043D\\u0435\\u0446 \\u0440\\u0430\\u0431\\u043E\\u0442\\u044B\",className:\"ModalInput\",ref:historyEndWork,style:{'marginRight':'10px'}})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"historyButton\",onClick:handleClick,children:\"\\u041D\\u0430\\u0439\\u0442\\u0438\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"historyButton\",onClick:handleClickCancel,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})})]}),/*#__PURE__*/_jsx(\"div\",{}),isOpen&&/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CSVLink,{data:posts,filename:\"nominations.csv\",children:\"Download CSV\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsxs(\"td\",{className:\"historyinfoNumber\",onClick:function onClick(){return requestSort('Кто');},children:[\"\\u041A\\u0442\\u043E \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043B \",sortConfig.key==='Кто'&&/*#__PURE__*/_jsx(\"span\",{className:\"column\",children:sortConfig.direction==='ascending'?'▼':'▲'})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"historyinfoNumber\",onClick:function onClick(){return requestSort('Номинант');},children:[\"\\u041D\\u043E\\u043C\\u0438\\u043D\\u0438\\u0440\\u043E\\u0432\\u0430\\u043B \",sortConfig1.key==='Номинант'&&/*#__PURE__*/_jsx(\"span\",{className:\"column1\",children:sortConfig1.direction==='ascending'?'▼':'▲'})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"historyinfoNumber\",onClick:function onClick(){return requestSort('nominations_name');},children:[\"\\u0418\\u043C\\u044F \\u043D\\u043E\\u043C\\u0438\\u043D\\u0430\\u0446\\u0438\\u0438 \",sortConfig2.key==='nominations_name'&&/*#__PURE__*/_jsx(\"span\",{className:\"column2\",children:sortConfig2.direction==='ascending'?'▼':'▲'})]}),/*#__PURE__*/_jsxs(\"td\",{className:\"historyinfoNumber\",onClick:function onClick(){return requestSort('date');},children:[\"\\u0414\\u0430\\u0442\\u0430 \\u0433\\u043E\\u043B\\u043E\\u0441\\u043E\\u0432\\u0430\\u043D\\u0438\\u044F \",sortConfig3.key==='date'&&/*#__PURE__*/_jsx(\"span\",{className:\"column3\",children:sortConfig3.direction==='ascending'?'▼':'▲'})]})]}),sortedPosts.map(function(posts,id){return/*#__PURE__*/_jsx(RepostInfoNominations,{posts:posts,username:username},id);})]})})});}","map":{"version":3,"sources":["D:/time_app/client/src/pages/ReportsNominations/ReportsNominations.jsx"],"names":["Topbar","React","useRef","useState","useMemo","useParams","CSVLink","axios","RepostInfoNominations","Pagination","ReportsNominations","key","direction","sortConfig","setSortConfig","sortConfig1","setSortConfig1","sortConfig2","setSortConfig2","sortConfig3","setSortConfig3","error","setError","historyStartWork","historyEndWork","isFilter","setIsFilter","posts","setPosts","isOpen","setisOpen","username","handleClick","start","current","value","end","filter","startDateNomination","endDateNomination","fill","post","res","data","handleClickCancel","requestSort","sortedPosts","sortablePosts","sort","a","b","display","map","id"],"mappings":"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","sourcesContent":["import Topbar from '../../components/Topbar/Topbar'\r\nimport '../ReportsNominations/ReportsNominations.css'\r\nimport React, {useRef, useState,useMemo} from \"react\";\r\nimport {useParams} from \"react-router-dom\";\r\nimport { CSVLink } from 'react-csv';\r\nimport axios from \"axios\";\r\nimport RepostInfoNominations from \"../../components/RepostInfoNominations/RepostInfoNominations\";\r\nimport Pagination from \"../../components/Pagination/Pagination\";\r\n\r\n\r\nexport default function ReportsNominations() {\r\n    const [sortConfig, setSortConfig] = useState({ key: 'Кто', direction: 'ascending' });\r\n    const [sortConfig1, setSortConfig1] = useState({ key: 'Номинант', direction: 'ascending' });\r\n    const [sortConfig2, setSortConfig2] = useState({ key: 'nominations_name', direction: 'ascending' });\r\n    const [sortConfig3, setSortConfig3] = useState({ key: 'date', direction: 'ascending' });\r\n\r\n\r\n    const [error, setError] = useState('')\r\n    const historyStartWork = useRef(null)\r\n    const historyEndWork = useRef(null)\r\n    const [isFilter, setIsFilter] = useState(false)\r\n    const [posts, setPosts] = useState([])\r\n    const [isOpen, setisOpen] = useState(false)\r\n    const username = useParams()\r\n\r\n\r\n\r\n\r\n    const handleClick = async () => {\r\n        const start = historyStartWork.current.value\r\n        const end = historyEndWork.current.value\r\n        if (start === \"\" || end === \"\") {\r\n            setError('Введите дату')\r\n        } else {\r\n            if (start !== '' || end !== '') {\r\n                setError('Выберите дату')\r\n            }\r\n            if (end < start) {\r\n                setError('Конечная дата меньше начальной')\r\n            } else {\r\n\r\n                const filter = {\r\n                    startDateNomination: historyStartWork.current.value,\r\n                    endDateNomination: historyEndWork.current.value,\r\n                }\r\n                setError('')\r\n\r\n                const fill = async () => {\r\n                    const res = await axios.post('/api/post/Reports', filter)\r\n                    setPosts(res.data)\r\n                    setError('')\r\n                }\r\n                fill()\r\n            }\r\n        }\r\n    }\r\n    const handleClickCancel = async () => {\r\n        setError('')\r\n        setIsFilter(false)\r\n        historyStartWork.current.value = ''\r\n        historyEndWork.current.value = ''\r\n    }\r\n\r\n\r\n    const requestSort = (key) => {\r\n        if (historyStartWork.current.value !== '' && historyEndWork.current.value !== '') {\r\n            let direction = 'ascending';\r\n            if (sortConfig.key === key && sortConfig.direction === 'ascending' ||\r\n                sortConfig1.key === key && sortConfig1.direction === 'ascending' ||\r\n                sortConfig2.key === key && sortConfig2.direction === 'ascending' ||\r\n                sortConfig3.key === key && sortConfig3.direction === 'ascending'\r\n            ) {\r\n                direction = 'descending';\r\n            }\r\n            setSortConfig({ key, direction });\r\n            setSortConfig1({ key, direction });\r\n            setSortConfig2({ key, direction });\r\n            setSortConfig3({ key, direction });\r\n        }\r\n    }\r\n\r\n\r\n\r\n    const sortedPosts = useMemo(() => {\r\n        const sortablePosts = [...posts];\r\n        if (sortConfig !== null) {\r\n            sortablePosts.sort((a, b) => {\r\n                if (a[sortConfig.key] < b[sortConfig.key]) {\r\n                    return sortConfig.direction === 'ascending' ? -1 : 1;\r\n                }\r\n                if (a[sortConfig.key] > b[sortConfig.key]) {\r\n                    return sortConfig.direction === 'ascending' ? 1 : -1;\r\n                }\r\n                setisOpen(true)\r\n                return 0;\r\n            });\r\n        }\r\n\r\n        return sortablePosts;\r\n    }, [posts, sortConfig]);\r\n\r\n\r\n\r\n    return (\r\n        <>\r\n            <div className='Reports'>\r\n                <div className=\"ReportsContainer\">\r\n                    <h2 className='ReportsMainText'>Отчет по номинациям</h2>\r\n                    {error && <div className='errorHistoryInfo'>{error}</div>}\r\n                    <hr/>\r\n                    <br/>\r\n                    <div style={{display:'flex'}}>\r\n                        <div>\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Начало работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyStartWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                        </div>\r\n                        <div>\r\n                            —  <input\r\n                        type='date'\r\n                        placeholder=\"Конец работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyEndWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                        </div>\r\n                    <div>\r\n                    <button className=\"historyButton\" onClick={handleClick}>Найти</button>\r\n                    </div>\r\n                        <div>\r\n                        <button className=\"historyButton\" onClick={handleClickCancel}>Сбросить</button>\r\n                    </div>\r\n                    </div>\r\n                    <div>\r\n\r\n                    </div>\r\n                    {isOpen && <div>\r\n                        <CSVLink data={posts} filename={\"nominations.csv\"}>Download CSV</CSVLink>\r\n                    </div>\r\n                    }\r\n                    <br/>\r\n                    <hr/>\r\n                    <br/>\r\n                    <tr>\r\n                        <td className=\"historyinfoNumber\" onClick={() => requestSort('Кто')}>\r\n                            Кто голосовал {sortConfig.key === 'Кто' && (\r\n                            <span className=\"column\">{sortConfig.direction === 'ascending' ? '▼' : '▲'}</span>\r\n                        )}\r\n                        </td>\r\n                        <td className=\"historyinfoNumber\" onClick={() => requestSort('Номинант')}>\r\n                            Номинировал {sortConfig1.key === 'Номинант' && (\r\n                            <span className=\"column1\">{sortConfig1.direction === 'ascending' ? '▼' : '▲'}</span>\r\n                        )}\r\n                        </td>\r\n                        <td className=\"historyinfoNumber\" onClick={() => requestSort('nominations_name')}>\r\n                            Имя номинации {sortConfig2.key === 'nominations_name' && (\r\n                            <span className=\"column2\">{sortConfig2.direction === 'ascending' ? '▼' : '▲'}</span>\r\n                        )}\r\n                        </td>\r\n                        <td className=\"historyinfoNumber\" onClick={() => requestSort('date')}>\r\n                            Дата голосования {sortConfig3.key === 'date' && (\r\n                            <span className=\"column3\">{sortConfig3.direction === 'ascending' ? '▼' : '▲'}</span>\r\n                        )}\r\n                        </td>\r\n                    </tr>\r\n\r\n                    {\r\n                        sortedPosts.map((posts, id) => <RepostInfoNominations key={id} posts={posts} username={username}/>)\r\n                    }\r\n\r\n\r\n{/*{                   <Pagination postsPerPage={postsPerPage} totalPosts={posts.length} paginate={paginate}\r\n                                currentPage={currentPage}/>}*/}\r\n\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}