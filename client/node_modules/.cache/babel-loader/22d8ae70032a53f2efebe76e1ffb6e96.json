{"ast":null,"code":"import _toConsumableArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import Pagination from\"../Pagination/Pagination\";import ModalVacancies from\"../Templates/ModalVacancies/ModalVacancies\";import axios from\"axios\";import'./VacanciesView.css';import VacanciesItem from\"../VacanciesItem/VacanciesItem\";import Topbar from\"../Topbar/Topbar\";import Sidebar from\"../Sidebar/Sidebar\";import VacanciesAdd from\"../VacanciesAdd/VacanciesAdd\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function VacanciesView(departId){var localUser=JSON.parse(localStorage.getItem('user'));var _useState=useState([]),_useState2=_slicedToArray(_useState,2),vacancies=_useState2[0],setVacancies=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAddingVacancies=_useState4[0],setIsAddingVacancies=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),startDate=_useState6[0],setStartDate=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),endDate=_useState8[0],setEndDate=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),status=_useState10[0],setStatus=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),company=_useState12[0],setCompany=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),projectIds=_useState14[0],setProjectIds=_useState14[1];var _useState15=useState([]),_useState16=_slicedToArray(_useState15,2),filteredVacancies=_useState16[0],setFilteredVacancies=_useState16[1];var _useState17=useState({company:[],status:[],project:[],department:null,startDate:null,endDate:null}),_useState18=_slicedToArray(_useState17,2),activeFilters=_useState18[0],setActiveFilters=_useState18[1];useEffect(function(){var VacanciesView=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var statuses,companies,vacancies_function,getVacancies,fetchedVacancies,uniqueProjectIds,sortedProjectIds,sortedUniqueProjectIds;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/Vacations/?status=status');case 2:statuses=_context.sent;_context.next=5;return axios.get('/api/Vacations/?company=company');case 5:companies=_context.sent;setCompany(companies.data);setStatus(statuses.data);vacancies_function={departId:localUser.departmentId,user_id:localUser._id};_context.next=11;return axios.post('/api/Vacations_function/',vacancies_function);case 11:getVacancies=_context.sent;setVacancies(getVacancies.data[0].get_vacancies);fetchedVacancies=getVacancies.data[0].get_vacancies;uniqueProjectIds=new Set();fetchedVacancies.forEach(function(department){department.vacancies.forEach(function(vacancy){if(vacancy.project_id!==undefined&&vacancy.project_id!==null){uniqueProjectIds.add(vacancy.project_id);}});});sortedProjectIds=Array.from(uniqueProjectIds).sort(function(a,b){return a-b;});sortedUniqueProjectIds=new Set(sortedProjectIds);setProjectIds(sortedUniqueProjectIds);case 19:case\"end\":return _context.stop();}}},_callee);}));return function VacanciesView(){return _ref.apply(this,arguments);};}();VacanciesView();},[departId]);useEffect(function(){applyFilters(activeFilters);},[vacancies,activeFilters]);var clickAdd=function clickAdd(){setIsAddingVacancies(true);};var clickBackButton=function clickBackButton(){setIsAddingVacancies(false);};var handleClickFilter=function handleClickFilter(type,value){setActiveFilters(function(prevFilters){var newFilters;if(type==='status'){newFilters=_objectSpread(_objectSpread({},prevFilters),{},{status:prevFilters.status.includes(value)?prevFilters.status.filter(function(status){return status!==value;}):[].concat(_toConsumableArray(prevFilters.status),[value])});}else if(type==='company'){newFilters=_objectSpread(_objectSpread({},prevFilters),{},{company:prevFilters.company.includes(value)?prevFilters.company.filter(function(company){return company!==value;}):[].concat(_toConsumableArray(prevFilters.company),[value])});}else if(type==='department'){newFilters=_objectSpread(_objectSpread({},prevFilters),{},{department:prevFilters.department===value?null:value});}else if(type==='project'){newFilters=_objectSpread(_objectSpread({},prevFilters),{},{project:prevFilters.project.includes(value)?prevFilters.project.filter(function(project){return project!==value;}):[value]});}return newFilters;});};var handleDateChange=function handleDateChange(type,value){if(type==='startDate'){setStartDate(value);}else if(type==='endDate'){setEndDate(value);}};var applyFilters=function applyFilters(filters){var filtered=vacancies;if(filtered){if(filters.department){filtered=filtered.filter(function(department){return department.department_id===parseInt(filters.department);});}if(filters.company.length>0){filtered=filtered.filter(function(department){return department.vacancies.some(function(vacancy){return filters.company.includes(vacancy.company_name);});}).map(function(department){return _objectSpread(_objectSpread({},department),{},{vacancies:department.vacancies.filter(function(vacancy){return filters.company.includes(vacancy.company_name);})});});}if(filters.status.length>0){filtered=filtered.filter(function(department){return department.vacancies.some(function(vacancy){return filters.status.includes(vacancy.status_name);});}).map(function(department){return _objectSpread(_objectSpread({},department),{},{vacancies:department.vacancies.filter(function(vacancy){return filters.status.includes(vacancy.status_name);})});});}if(filters.project.length>0){console.log('Filtering by project:',filters.project);filtered=filtered.filter(function(department){return department.vacancies.some(function(vacancy){return filters.project.includes(String(vacancy.project_id));});}).map(function(department){return _objectSpread(_objectSpread({},department),{},{vacancies:department.vacancies.filter(function(vacancy){return filters.project.includes(String(vacancy.project_id));})});});console.log('Filtered by project:',filtered);}if(filters.startDate||filters.endDate){filtered=filtered.map(function(department){return _objectSpread(_objectSpread({},department),{},{vacancies:department.vacancies.filter(function(vacancy){var vacancyDate=new Date(vacancy.create_date);var startDate=filters.startDate?new Date(filters.startDate):null;var endDate=filters.endDate?new Date(filters.endDate):null;return(!startDate||vacancyDate>=startDate)&&(!endDate||vacancyDate<=endDate);})});}).filter(function(department){return department.vacancies.length>0;});}}setFilteredVacancies(filtered);};var handleCombinedFilter=function handleCombinedFilter(){setActiveFilters(function(prevFilters){var newFilters=_objectSpread(_objectSpread({},prevFilters),{},{startDate:startDate||null,endDate:endDate||null});applyFilters(newFilters);return newFilters;});};var reset=function reset(){setActiveFilters({company:[],status:[],project:[],department:null,startDate:null,endDate:null});setStartDate('');setEndDate('');setFilteredVacancies(vacancies);};var getColorByStatusId=function getColorByStatusId(statusId){switch(Number(statusId)){case 20:return'Reserve';//  Резерв Установите Белый цвет для статуса 1\ncase 30:return'Selection';// Подбор Установите желтый цвет для статуса 2\ncase 50:return'Securely';// Обеспеченно Установите зелёный цвет для статуса 3\ncase 10:return'Liquidated';// Ликвидированно Установите белый прозрачный цвет для статуса 4\ncase 40:return'Finalist';//  Финалист Установите красный цвет для статуса 5\n}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Topbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"mainContainer\",children:[/*#__PURE__*/_jsx(Sidebar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"Vacations\",children:[isAddingVacancies?/*#__PURE__*/_jsx(\"button\",{className:\"btnStaff\",onClick:clickBackButton,children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}):'',isAddingVacancies?/*#__PURE__*/_jsx(VacanciesAdd,{}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"VacationsContainerTop\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{className:\"btnStaff\",onClick:function onClick(){return window.location.href=\"/department/\".concat(localUser.departmentId);},children:\"\\u041D\\u0430\\u0437\\u0430\\u0434\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btnStaff\",onClick:clickAdd,children:\"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u0432\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u044E\"})]}),/*#__PURE__*/_jsxs(\"div\",{style:{padding:'20px'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\u0412\\u0430\\u043A\\u0430\\u043D\\u0441\\u0438\\u0438\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",className:\"ModalInput\",style:{marginRight:'10px'},value:startDate,onChange:function onChange(e){return handleDateChange('startDate',e.target.value);}}),\"\\u2014\",/*#__PURE__*/_jsx(\"input\",{type:\"date\",placeholder:\"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u0434\\u0430\\u0442\\u0443\",className:\"ModalInput\",style:{marginRight:'10px'},value:endDate,onChange:function onChange(e){return handleDateChange('endDate',e.target.value);}}),/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:handleCombinedFilter,children:\"\\u041F\\u043E\\u0438\\u0441\\u043A\"}),/*#__PURE__*/_jsx(\"button\",{className:\"filterButton\",onClick:reset,children:\"\\u0421\\u0431\\u0440\\u043E\\u0441\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex'},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{className:\"ModalInputUpdateSelect\",onChange:function onChange(e){return handleClickFilter('department',e.target.value);},children:vacancies.map(function(dep,index){return/*#__PURE__*/_jsx(\"option\",{value:dep.department_id,children:dep.department},index);})})}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:'20px',paddingTop:'5px'},children:\"\\u041F\\u0440\\u043E\\u0435\\u043A\\u0442:\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{className:\"ModalInputUpdateSelect\",onChange:function onChange(e){return handleClickFilter('project',e.target.value);},children:projectIds.map(function(projectId,id){return/*#__PURE__*/_jsx(\"option\",{value:projectId,children:projectId},id);})})})]})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:company.map(function(company,id){return/*#__PURE__*/_jsx(\"button\",{className:\"filtersButton\",onClick:function onClick(){return handleClickFilter('company',company.name);},style:{boxShadow:activeFilters.company.includes(company.name)?\"0 0 1px rgba(0,0,0,.5) inset, 0 2px 3px rgba(0,0,0,.5) inset, 0 1px 1px rgba(255,255,255,.1)\":\"\",background:activeFilters.company.includes(company.name)?'gray':'#1775ee',opacity:activeFilters.company.includes(company.name)?'1':''},children:company.name},id);})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{children:status.map(function(status,id){return/*#__PURE__*/_jsx(\"button\",{className:'filtersButton'+getColorByStatusId(status.id),onClick:function onClick(){return handleClickFilter('status',status.name);},style:{boxShadow:activeFilters.status.includes(status.name)?\"0 0 1px rgba(0,0,0,.5) inset, 0 2px 3px rgba(0,0,0,.5) inset, 0 1px 1px rgba(255,255,255,.1)\":\"\",background:activeFilters.status.includes(status.name)?'gray':'',opacity:activeFilters.status.includes(status.name)?'1':''},children:status.name},id);})})]})]}),filteredVacancies.map(function(vac){return/*#__PURE__*/_jsx(\"div\",{className:\"VacationsContainer\",children:/*#__PURE__*/_jsx(VacanciesItem,{vac:vac,status:status,department:vac.department,vacancies:vac.vacancies},vac.department)},vac.id);})]})]})]})]});}export default VacanciesView;","map":{"version":3,"sources":["D:/time_app/client/src/components/VacanciesView/VacanciesView.jsx"],"names":["React","useEffect","useState","Pagination","ModalVacancies","axios","VacanciesItem","Topbar","Sidebar","VacanciesAdd","VacanciesView","departId","localUser","JSON","parse","localStorage","getItem","vacancies","setVacancies","isAddingVacancies","setIsAddingVacancies","startDate","setStartDate","endDate","setEndDate","status","setStatus","company","setCompany","projectIds","setProjectIds","filteredVacancies","setFilteredVacancies","project","department","activeFilters","setActiveFilters","get","statuses","companies","data","vacancies_function","departmentId","user_id","_id","post","getVacancies","get_vacancies","fetchedVacancies","uniqueProjectIds","Set","forEach","vacancy","project_id","undefined","add","sortedProjectIds","Array","from","sort","a","b","sortedUniqueProjectIds","applyFilters","clickAdd","clickBackButton","handleClickFilter","type","value","prevFilters","newFilters","includes","filter","handleDateChange","filters","filtered","department_id","parseInt","length","some","company_name","map","status_name","console","log","String","vacancyDate","Date","create_date","handleCombinedFilter","reset","getColorByStatusId","statusId","Number","window","location","href","padding","marginRight","e","target","display","dep","index","paddingLeft","paddingTop","projectId","id","name","boxShadow","background","opacity","vac"],"mappings":"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","sourcesContent":["import React, {useEffect,useState} from 'react'\r\nimport Pagination from \"../Pagination/Pagination\";\r\nimport ModalVacancies from \"../Templates/ModalVacancies/ModalVacancies\"\r\nimport axios from \"axios\";\r\nimport './VacanciesView.css'\r\nimport VacanciesItem from \"../VacanciesItem/VacanciesItem\";\r\nimport Topbar from \"../Topbar/Topbar\";\r\nimport Sidebar from \"../Sidebar/Sidebar\";\r\nimport VacanciesAdd from \"../VacanciesAdd/VacanciesAdd\";\r\n\r\n\r\nfunction VacanciesView(departId) {\r\n    const localUser = JSON.parse(localStorage.getItem('user'))\r\n    const [vacancies, setVacancies] = useState([])\r\n    const [isAddingVacancies, setIsAddingVacancies] = useState(false)\r\n    const [startDate, setStartDate] = useState('');\r\n    const [endDate, setEndDate] = useState('');\r\n    const [status, setStatus] = useState([])\r\n    const [company, setCompany] = useState([])\r\n    const [projectIds, setProjectIds] = useState([]);\r\n    const [filteredVacancies, setFilteredVacancies] = useState([]);\r\n    const [activeFilters, setActiveFilters] = useState({\r\n\r\n        company: [],\r\n        status: [],\r\n        project: [],\r\n        department: null,\r\n        startDate: null,\r\n        endDate: null\r\n\r\n    });\r\n\r\n\r\n    useEffect(() => {\r\n\r\n\r\n        const VacanciesView = async () => {\r\n\r\n            const statuses = await axios.get('/api/Vacations/?status=status')\r\n            const companies = await axios.get('/api/Vacations/?company=company')\r\n            setCompany(companies.data)\r\n            setStatus(statuses.data)\r\n\r\n            const vacancies_function = {\r\n                departId: localUser.departmentId,\r\n                user_id: localUser._id\r\n            }\r\n\r\n            const getVacancies = await axios.post('/api/Vacations_function/', vacancies_function)\r\n            setVacancies(getVacancies.data[0].get_vacancies);\r\n            const fetchedVacancies = getVacancies.data[0].get_vacancies;\r\n            const uniqueProjectIds = new Set();\r\n\r\n            fetchedVacancies.forEach(department => {\r\n                department.vacancies.forEach(vacancy => {\r\n                    if (vacancy.project_id !== undefined && vacancy.project_id !== null) {\r\n                        uniqueProjectIds.add(vacancy.project_id);\r\n                    }\r\n                });\r\n            });\r\n            const sortedProjectIds = Array.from(uniqueProjectIds).sort((a, b) => a - b);\r\n            const sortedUniqueProjectIds = new Set(sortedProjectIds);\r\n            setProjectIds(sortedUniqueProjectIds);\r\n\r\n        }\r\n        VacanciesView()\r\n    }, [departId])\r\n\r\n\r\n    useEffect(() => {\r\n        applyFilters(activeFilters);\r\n    }, [vacancies, activeFilters]);\r\n\r\n    const clickAdd = () => {\r\n        setIsAddingVacancies(true)\r\n    }\r\n\r\n    const clickBackButton = () => {\r\n        setIsAddingVacancies(false)\r\n    }\r\n\r\n    const handleClickFilter = (type, value) => {\r\n        setActiveFilters(prevFilters => {\r\n            let newFilters;\r\n            if (type === 'status') {\r\n                newFilters = {\r\n                    ...prevFilters,\r\n                    status: prevFilters.status.includes(value)\r\n                        ? prevFilters.status.filter(status => status !== value)\r\n                        : [...prevFilters.status, value]\r\n                };\r\n            } else if (type === 'company') {\r\n                newFilters = {\r\n                    ...prevFilters,\r\n                    company: prevFilters.company.includes(value)\r\n                        ? prevFilters.company.filter(company => company !== value)\r\n                        : [...prevFilters.company, value]\r\n                };\r\n            } else if (type === 'department') {\r\n                newFilters = {\r\n                    ...prevFilters,\r\n                    department: prevFilters.department === value ? null : value\r\n                };\r\n            } else if (type === 'project') {\r\n                newFilters = {\r\n                    ...prevFilters,\r\n                    project: prevFilters.project.includes(value)\r\n                        ? prevFilters.project.filter(project => project !== value)\r\n                        : [value]\r\n                };\r\n            }\r\n            return newFilters;\r\n        });\r\n    };\r\n\r\n    const handleDateChange = (type, value) => {\r\n        if (type === 'startDate') {\r\n            setStartDate(value);\r\n        } else if (type === 'endDate') {\r\n            setEndDate(value);\r\n        }\r\n    };\r\n\r\n\r\n    const applyFilters = (filters) => {\r\n        let filtered = vacancies;\r\n\r\n        if (filtered) {\r\n            if (filters.department) {\r\n                filtered = filtered.filter(department => department.department_id === parseInt(filters.department));\r\n            }\r\n\r\n            if (filters.company.length > 0) {\r\n                filtered = filtered.filter(department =>\r\n                    department.vacancies.some(vacancy => filters.company.includes(vacancy.company_name))\r\n                ).map(department => ({\r\n                    ...department,\r\n                    vacancies: department.vacancies.filter(vacancy => filters.company.includes(vacancy.company_name))\r\n                }));\r\n            }\r\n\r\n            if (filters.status.length > 0) {\r\n                filtered = filtered.filter(department =>\r\n                    department.vacancies.some(vacancy => filters.status.includes(vacancy.status_name))\r\n                ).map(department => ({\r\n                    ...department,\r\n                    vacancies: department.vacancies.filter(vacancy => filters.status.includes(vacancy.status_name))\r\n                }));\r\n            }\r\n\r\n            if (filters.project.length > 0) {\r\n                console.log('Filtering by project:', filters.project);\r\n                filtered = filtered.filter(department =>\r\n                    department.vacancies.some(vacancy => filters.project.includes(String(vacancy.project_id)))\r\n                ).map(department => ({\r\n                    ...department,\r\n                    vacancies: department.vacancies.filter(vacancy => filters.project.includes(String(vacancy.project_id)))\r\n                }));\r\n                console.log('Filtered by project:', filtered);\r\n            }\r\n\r\n            if (filters.startDate || filters.endDate) {\r\n                filtered = filtered.map(department => ({\r\n                    ...department,\r\n                    vacancies: department.vacancies.filter(vacancy => {\r\n                        const vacancyDate = new Date(vacancy.create_date);\r\n                        const startDate = filters.startDate ? new Date(filters.startDate) : null;\r\n                        const endDate = filters.endDate ? new Date(filters.endDate) : null;\r\n                        return (!startDate || vacancyDate >= startDate) && (!endDate || vacancyDate <= endDate);\r\n                    })\r\n                })).filter(department => department.vacancies.length > 0);\r\n            }\r\n        }\r\n\r\n        setFilteredVacancies(filtered);\r\n    };\r\n\r\n\r\n    const handleCombinedFilter = () => {\r\n        setActiveFilters(prevFilters => {\r\n            const newFilters = {\r\n                ...prevFilters,\r\n                startDate: startDate || null,\r\n                endDate: endDate || null\r\n            };\r\n            applyFilters(newFilters);\r\n            return newFilters;\r\n        });\r\n    };\r\n\r\n    const reset = () => {\r\n        setActiveFilters({\r\n            company: [],\r\n            status: [],\r\n            project:[],\r\n            department: null,\r\n            startDate: null,\r\n            endDate: null\r\n        });\r\n        setStartDate('');\r\n        setEndDate('');\r\n        setFilteredVacancies(vacancies);\r\n    };\r\n\r\n\r\n    const getColorByStatusId = (statusId) => {\r\n        switch (Number(statusId)) {\r\n            case 20:\r\n                return 'Reserve'; //  Резерв Установите Белый цвет для статуса 1\r\n            case 30:\r\n                return 'Selection'; // Подбор Установите желтый цвет для статуса 2\r\n            case 50:\r\n                return 'Securely'; // Обеспеченно Установите зелёный цвет для статуса 3\r\n            case 10:\r\n                return 'Liquidated'; // Ликвидированно Установите белый прозрачный цвет для статуса 4\r\n            case 40:\r\n                return 'Finalist'; //  Финалист Установите красный цвет для статуса 5\r\n\r\n        }\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Topbar/>\r\n            <div className=\"mainContainer\">\r\n                <Sidebar/>\r\n                <div className='Vacations'>\r\n                    {isAddingVacancies ?\r\n                        <button className='btnStaff' onClick={clickBackButton}>Назад</button>:''\r\n                    }\r\n                    {isAddingVacancies ? (\r\n                        <VacanciesAdd/>\r\n                    ) : (\r\n                        <>\r\n                            <div className=\"VacationsContainerTop\">\r\n\r\n                                <div>\r\n                                    <button className='btnStaff' onClick={() => window.location.href = `/department/${localUser.departmentId}`}>Назад</button>\r\n                                    <button className='btnStaff' onClick={clickAdd}>Добавить вакансию</button>\r\n                                </div>\r\n                                <div style={{padding:'20px'}}>\r\n                                <h2>Вакансии</h2>\r\n                                <div>\r\n                                    <input\r\n                                        type='date'\r\n                                        placeholder=\"Выберите дату\"\r\n                                        className=\"ModalInput\"\r\n                                        style={{marginRight: '10px'}}\r\n                                        value={startDate}\r\n                                        onChange={(e) => handleDateChange('startDate', e.target.value)}\r\n                                    />\r\n                                    —\r\n                                    <input\r\n                                        type='date'\r\n                                        placeholder=\"Выберите дату\"\r\n                                        className=\"ModalInput\"\r\n                                        style={{marginRight: '10px'}}\r\n                                        value={endDate}\r\n                                        onChange={(e) => handleDateChange('endDate', e.target.value)}\r\n                                    />\r\n                                    <button className=\"filterButton\" onClick={handleCombinedFilter}>Поиск</button>\r\n                                    <button className=\"filterButton\" onClick={reset}>Сбросить</button>\r\n                                </div>\r\n                                <br/>\r\n                                <div>\r\n                                    <div style={{display:'flex'}}>\r\n                                        <div>\r\n                                            <select\r\n                                                className=\"ModalInputUpdateSelect\"\r\n                                                onChange={(e) => handleClickFilter('department', e.target.value)}\r\n                                            >\r\n                                                {vacancies.map((dep, index) => (\r\n                                                    <option\r\n                                                        key={index}\r\n                                                        value={dep.department_id}\r\n                                                    >\r\n                                                        {dep.department}\r\n                                                    </option>\r\n                                                ))}\r\n                                            </select>\r\n                                        </div>\r\n                                        <div style={{paddingLeft:'20px',paddingTop:'5px'}}>Проект:</div>\r\n                                       <div>\r\n                                               <select\r\n                                                   className='ModalInputUpdateSelect'\r\n                                                   onChange={(e) => handleClickFilter('project', e.target.value)}\r\n\r\n                                               >\r\n                                                   {projectIds.map((projectId, id) => (\r\n                                                       <option\r\n                                                           key={id}\r\n                                                           value={projectId}\r\n                                                       >\r\n                                                           {projectId}\r\n                                                       </option>\r\n                                                   ))}\r\n\r\n                                               </select>\r\n\r\n\r\n                                        </div>\r\n\r\n                                    </div>\r\n                                </div>\r\n                                <br/>\r\n                                    <div>\r\n                                        {company.map((company, id) => (\r\n                                            <button\r\n                                                key={id}\r\n                                                className='filtersButton'\r\n                                                onClick={() => handleClickFilter('company', company.name)}\r\n                                                style={{\r\n                                                    boxShadow: activeFilters.company.includes(company.name) ? \"0 0 1px rgba(0,0,0,.5) inset, 0 2px 3px rgba(0,0,0,.5) inset, 0 1px 1px rgba(255,255,255,.1)\" : \"\",\r\n                                                    background: activeFilters.company.includes(company.name) ? 'gray' : '#1775ee',\r\n                                                    opacity: activeFilters.company.includes(company.name) ? '1' : ''\r\n                                                }}\r\n                                            >\r\n                                                {company.name}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                    <br/>\r\n                                    <div>\r\n                                        {status.map((status, id) => (\r\n                                            <button\r\n                                                key={id}\r\n                                                className={'filtersButton' + getColorByStatusId(status.id)}\r\n                                                onClick={() => handleClickFilter('status', status.name)}\r\n                                                style={{\r\n                                                    boxShadow: activeFilters.status.includes(status.name) ? \"0 0 1px rgba(0,0,0,.5) inset, 0 2px 3px rgba(0,0,0,.5) inset, 0 1px 1px rgba(255,255,255,.1)\" : \"\",\r\n                                                    background: activeFilters.status.includes(status.name) ? 'gray' : '',\r\n                                                    opacity: activeFilters.status.includes(status.name) ? '1' : ''\r\n                                                }}\r\n                                            >\r\n                                                {status.name}\r\n                                            </button>\r\n                                        ))}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                            {\r\n                                filteredVacancies.map(vac => (\r\n                                    <div className='VacationsContainer' key={vac.id}>\r\n                                        <VacanciesItem vac={vac} key={vac.department} status={status}\r\n                                                       department={vac.department} vacancies={vac.vacancies}/>\r\n                                    </div>\r\n                                ))\r\n\r\n                            }\r\n\r\n\r\n                            {/*                               {\r\n                                   filteredData.map(vac => (\r\n                                        <div className='VacationsContainer' key={vac.id}>\r\n                                            <VacanciesItem vac={vac} key={vac.department} status={status} department={vac.department} vacancies={vac.vacancies}/>\r\n                                        </div>\r\n                                    ))\r\n\r\n                                }*/}\r\n                        </>\r\n                    )}\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n\r\nexport default VacanciesView"]},"metadata":{},"sourceType":"module"}