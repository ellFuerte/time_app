{"ast":null,"code":"import _regeneratorRuntime from\"D:/Download/time_app/client/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/Download/time_app/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{ExitToApp}from'@material-ui/icons';import axios from'axios';import{useEffect,useState}from'react';import SearchBlock from'../SearchBlock/SearchBlock';import{Link}from'react-router-dom';import logo from'./VTB.png';import'./Topbar.css';import Status from'../Status/Status';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function Topbar(){var user=JSON.parse(localStorage.getItem('user'));var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),searchValue=_useState2[0],setSearchValue=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),allUsers=_useState4[0],setAllUsers=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),findUsers=_useState6[0],setFindUsers=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isBlock=_useState8[0],setIsBlock=_useState8[1];// выход\nvar logOut=function logOut(){localStorage.clear();window.location.reload();window.location.href='/';};// получение всех пользователей. отключено\nuseEffect(function(e){var fetchUser=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/api/user/');case 2:res=_context.sent;setAllUsers(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function fetchUser(){return _ref.apply(this,arguments);};}();fetchUser();},[]);// поиск пользователя. отключено\nvar handleKeyPress=function handleKeyPress(e){if(e.key==='Enter'){setFindUsers(allUsers.filter(function(user){return user.user_name.toLowerCase().includes(searchValue.toLowerCase());}));setIsBlock(true);}};var handleClick=function handleClick(){setFindUsers(allUsers.filter(function(user){return user.user_name.toLowerCase().includes(searchValue.toLowerCase());}));setIsBlock(true);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbarContainer\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"topbarLeft\",children:/*#__PURE__*/_jsx(Status,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"topbarCenter\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"topbarRight\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"topbarLinks\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"img\",{src:logo,alt:\"VTB\",width:\"150\",height:\"50\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"one\",children:/*#__PURE__*/_jsx(Link,{to:\"/department/\".concat(user.departmentId),className:\"topbarLink\",children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",children:\"\\u0413\\u043B\\u0430\\u0432\\u043D\\u0430\\u044F c\\u0442\\u0440\\u0430\\u043D\\u0438\\u0446\\u0430\"})})}),/*#__PURE__*/_jsx(\"div\",{className:\"vr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"one\",children:/*#__PURE__*/_jsx(Link,{to:\"/profile/\".concat(user._id),className:\"topbarLink\",children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",children:user.username})})}),/*#__PURE__*/_jsx(\"div\",{className:\"vr\"}),/*#__PURE__*/_jsx(\"div\",{className:\"one\",children:/*#__PURE__*/_jsx(Link,{to:\"/information\",className:\"topbarLink\",children:/*#__PURE__*/_jsx(\"span\",{className:\"link\",children:\"\\u0418\\u043D\\u0444\\u043E\\u0440\\u043C\\u0430\\u0446\\u0438\\u044F\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search\",children:[/*#__PURE__*/_jsx(\"input\",{onKeyPress:handleKeyPress,value:searchValue,onChange:function onChange(e){return setSearchValue(e.target.value);},type:\"search\",name:\"\",placeholder:\"\\u043F\\u043E\\u0438\\u0441\\u043A\",className:\"input\"}),/*#__PURE__*/_jsx(\"input\",{onClick:handleClick,onChange:function onChange(e){return setSearchValue(e.target.value);},type:\"submit\",value:\"\",className:\"submit\"})]}),/*#__PURE__*/_jsx(ExitToApp,{style:{cursor:'pointer',marginLeft:'2%',marginRight:'20px'},onClick:logOut})]})]}),isBlock?/*#__PURE__*/_jsxs(\"div\",{className:\"searchContainer\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"searchTop\",children:[/*#__PURE__*/_jsx(\"div\",{style:{width:'310px'},children:/*#__PURE__*/_jsxs(\"h3\",{className:\"serachTitle\",style:{paddingRight:'20px'},children:[\"\\u041D\\u0430\\u0439\\u0434\\u0435\\u043D\\u043E: \",findUsers.length]})}),/*#__PURE__*/_jsx(\"div\",{style:{width:'305px'}}),/*#__PURE__*/_jsx(\"div\",{style:{width:'200px'}}),/*#__PURE__*/_jsx(\"div\",{style:{paddingLeft:'150px'}}),/*#__PURE__*/_jsx(\"div\",{style:{width:'300px',textAlign:\"Right\"},children:/*#__PURE__*/_jsx(\"button\",{className:\"searchBtn\",onClick:function onClick(){return setIsBlock(false);},children:\"\\u0417\\u0430\\u043A\\u0440\\u044B\\u0442\\u044C\"})})]}),findUsers.map(function(user){return/*#__PURE__*/_jsx(SearchBlock,{user:user});})]}):/*#__PURE__*/_jsx(_Fragment,{})]});}","map":{"version":3,"sources":["D:/Download/time_app/client/src/components/Topbar/Topbar.jsx"],"names":["ExitToApp","axios","useEffect","useState","SearchBlock","Link","logo","Status","Topbar","user","JSON","parse","localStorage","getItem","searchValue","setSearchValue","allUsers","setAllUsers","findUsers","setFindUsers","isBlock","setIsBlock","logOut","clear","window","location","reload","href","e","fetchUser","get","res","data","handleKeyPress","key","filter","user_name","toLowerCase","includes","handleClick","departmentId","_id","username","target","value","cursor","marginLeft","marginRight","width","paddingRight","length","paddingLeft","textAlign","map"],"mappings":"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","sourcesContent":["import { ExitToApp } from '@material-ui/icons'\r\nimport axios from 'axios'\r\nimport { useEffect, useState } from 'react'\r\nimport SearchBlock from '../SearchBlock/SearchBlock'\r\nimport { Link } from 'react-router-dom'\r\nimport logo from './VTB.png'\r\n\r\nimport './Topbar.css'\r\nimport Status from '../Status/Status'\r\n\r\n\r\nexport default function\r\n    Topbar() {\r\n\r\n  const user = JSON.parse(localStorage.getItem('user'))\r\n  const [searchValue, setSearchValue] = useState(\"\")\r\n  const [allUsers, setAllUsers] = useState([])\r\n  const [findUsers, setFindUsers] = useState([])\r\n  const [isBlock, setIsBlock] = useState(false)\r\n\r\n  // выход\r\n  const logOut = () => {\r\n    localStorage.clear()\r\n    window.location.reload()\r\n    window.location.href = '/'\r\n  }\r\n\r\n  // получение всех пользователей. отключено\r\n  useEffect((e) => {\r\n    const fetchUser = async () => {\r\n      const res = await axios.get('/api/user/')\r\n      setAllUsers(res.data)\r\n    }\r\n    fetchUser()\r\n  }, [])\r\n\r\n  // поиск пользователя. отключено\r\n\r\n  const handleKeyPress = (e) => {\r\n    if(e.key === 'Enter'){\r\n      setFindUsers(allUsers.filter(user => user.user_name.toLowerCase().includes(searchValue.toLowerCase())))\r\n      setIsBlock(true)\r\n    }\r\n  }\r\n  const handleClick =()=>{\r\n  setFindUsers(allUsers.filter(user => user.user_name.toLowerCase().includes(searchValue.toLowerCase())))\r\n  setIsBlock(true)\r\n}\r\n\r\n  return (\r\n    <div>\r\n      <div className='topbarContainer'>\r\n        <div className=\"topbarLeft\">\r\n          <Status/>\r\n        </div>\r\n        <div className=\"topbarCenter\">\r\n{/*          { <div className=\"searchbar\">\r\n            <Search/>\r\n            <input value={searchValue} onChange={(e) => setSearchValue(e.target.value)} onKeyPress={handleKeyPress} placeholder='Найти...' className=\"searchInput\" />\r\n          </div> }*/}\r\n        </div>\r\n        <div className=\"topbarRight\">\r\n          <div className=\"topbarLinks\">\r\n            <div>\r\n              <img src={logo} alt='VTB' width='150' height='50'/>\r\n            </div>\r\n            <div className='one'><Link to={`/department/${user.departmentId}`} className=\"topbarLink\"><span className='link'>Главная cтраница</span></Link></div><div className='vr'></div>\r\n            {/*<a href=\"/#\"  className=\"icon\"><h1>&#9776;</h1></a>*/}<div className='one'><Link to={`/profile/${user._id}`} className=\"topbarLink\"><span className='link'>{user.username}</span></Link></div><div className='vr'></div>\r\n            <div className='one'><Link to='/information' className=\"topbarLink\"><span className='link'>Информация</span></Link></div>\r\n          </div>\r\n          <div className=\"search\">\r\n            <input onKeyPress={handleKeyPress} value={searchValue} onChange={(e) => setSearchValue(e.target.value)}  type=\"search\" name=\"\" placeholder=\"поиск\" className=\"input\"/>\r\n            <input onClick={handleClick} onChange={(e) => setSearchValue(e.target.value)} type=\"submit\" value=\"\" className=\"submit\"/>\r\n          </div>\r\n          <ExitToApp  style={{cursor:'pointer',marginLeft:'2%', marginRight:'20px'}} onClick={logOut}/>\r\n        </div>\r\n      </div>\r\n      {isBlock\r\n        ? <div className=\"searchContainer\">\r\n            <div className='searchTop'>\r\n              <div style={{width:'310px'}}>\r\n                <h3 className='serachTitle' style={{paddingRight:'20px'}}>Найдено: {findUsers.length}</h3>\r\n              </div>\r\n              <div style={{width:'305px'}}>\r\n              </div>\r\n              <div style={{width:'200px'}}>\r\n              </div>\r\n                <div style={{paddingLeft:'150px'}}>\r\n\r\n                </div>\r\n              <div style={{width:'300px', textAlign:\"Right\"}}>\r\n                <button className='searchBtn' onClick={() => setIsBlock(false)}>Закрыть</button>\r\n              </div >\r\n            </div>\r\n            {findUsers.map((user) => <SearchBlock user={user}/>)}\r\n          </div>\r\n        : <></>\r\n      }\r\n    </div>\r\n\r\n  )\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}