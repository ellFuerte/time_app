{"ast":null,"code":"/*import React, {useEffect, useRef, useState} from 'react'\r\nimport Topbar from '../../components/Topbar/Topbar'\r\nimport './Reports.css'\r\nimport axios from \"axios\";\r\nimport {useParams} from \"react-router-dom\";\r\n\r\n\r\nexport default function Reports() {\r\n    const [user, setUser] = useState([])\r\n    const historyStartWork = useRef(null)\r\n    const historyEndWork = useRef(null)\r\n    const [isJob, setIsJob] = useState(true)\r\n    const [error, setError] = useState('')\r\n    const [isFilter, setIsFilter] = useState(false)\r\n    const [posts, setPosts] = useState([])\r\n    const [vacationPosts, setVacationPosts] = useState([])\r\n    const username=useParams()\r\n    let localUser = !!username ? {_id:username.username,email:\"\"} : JSON.parse(localStorage.getItem('user'))\r\n    const localUse = JSON.parse(localStorage.getItem('user'))\r\n    const depsId = useParams().username\r\n\r\n    console.log(\"user=\",depsId,username.username,user.id)\r\n\r\n    const handleClick = async () => {\r\n        const start = historyStartWork.current.value\r\n        const end = historyEndWork.current.value\r\n        if (start === \"\" || end === \"\") {\r\n            setError('Введите дату')\r\n        } else {\r\n            if (start !== '' || end !== '') {\r\n                setError('Выберите дату')\r\n            }\r\n            if (end < start) {\r\n                setError('Конечная дата меньше начальной')\r\n            } else {\r\n\r\n                const filter = {\r\n                    startdate: historyStartWork.current.value,\r\n                    enddate: historyEndWork.current.value,\r\n                    userId: localUse._id,\r\n                    typework: isJob\r\n                }\r\n                setError('')\r\n\r\n                const fill = async () => {\r\n                    const res = await axios.post('/api/post/filter', filter)\r\n                    console.log(res)\r\n                    setVacationPosts(res.data.sort((p1, p2) => {\r\n                        return new Date(p2.workstart) - new Date(p1.workstart)\r\n                    }))\r\n                    setPosts(res.data.sort((p1, p2) => {\r\n                        return new Date(p2.workstart) - new Date(p1.workstart)\r\n                    }))\r\n                    setError('')\r\n                }\r\n                fill()\r\n            }\r\n        }\r\n    }\r\n    const handleClickCancel = async () =>{\r\n        setError('')\r\n        setIsFilter(false)\r\n        historyStartWork.current.value = ''\r\n        historyEndWork.current.value = ''\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Topbar/>\r\n            <div className='Reports'>\r\n                <div className=\"ReportsContainer\">\r\n                    <h2 className='ReportsMainText'>Отчеты</h2>\r\n                    <hr/>\r\n                    {error && <div className='errorHistoryInfo'>{error}</div>}\r\n                    <br/>\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Начало работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyStartWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Конец работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyEndWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                    <button className=\"filterButton\" onClick={handleClick}>ок</button>\r\n                    <button className=\"filterButton\" onClick={handleClickCancel}>сбросить</button>\r\n                    <br/>\r\n                    <br/>\r\n                    <hr/>\r\n                    <br/>\r\n                    {isJob\r\n                        ?\r\n                        <tr>\r\n                            <td className=\"historyinfodate\">ФИО</td>\r\n                            <td className=\"historyinfopost\">Начало</td>\r\n                            <td className=\"historyinfopost\">Конец</td>\r\n                            <td className=\"historyinfopost\">Длительность</td>\r\n                        </tr>\r\n                        :\"\"\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}*/","map":{"version":3,"sources":["D:/Download/time_app/client/src/pages/Reports/Reports.jsx"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["/*import React, {useEffect, useRef, useState} from 'react'\r\nimport Topbar from '../../components/Topbar/Topbar'\r\nimport './Reports.css'\r\nimport axios from \"axios\";\r\nimport {useParams} from \"react-router-dom\";\r\n\r\n\r\nexport default function Reports() {\r\n    const [user, setUser] = useState([])\r\n    const historyStartWork = useRef(null)\r\n    const historyEndWork = useRef(null)\r\n    const [isJob, setIsJob] = useState(true)\r\n    const [error, setError] = useState('')\r\n    const [isFilter, setIsFilter] = useState(false)\r\n    const [posts, setPosts] = useState([])\r\n    const [vacationPosts, setVacationPosts] = useState([])\r\n    const username=useParams()\r\n    let localUser = !!username ? {_id:username.username,email:\"\"} : JSON.parse(localStorage.getItem('user'))\r\n    const localUse = JSON.parse(localStorage.getItem('user'))\r\n    const depsId = useParams().username\r\n\r\n    console.log(\"user=\",depsId,username.username,user.id)\r\n\r\n    const handleClick = async () => {\r\n        const start = historyStartWork.current.value\r\n        const end = historyEndWork.current.value\r\n        if (start === \"\" || end === \"\") {\r\n            setError('Введите дату')\r\n        } else {\r\n            if (start !== '' || end !== '') {\r\n                setError('Выберите дату')\r\n            }\r\n            if (end < start) {\r\n                setError('Конечная дата меньше начальной')\r\n            } else {\r\n\r\n                const filter = {\r\n                    startdate: historyStartWork.current.value,\r\n                    enddate: historyEndWork.current.value,\r\n                    userId: localUse._id,\r\n                    typework: isJob\r\n                }\r\n                setError('')\r\n\r\n                const fill = async () => {\r\n                    const res = await axios.post('/api/post/filter', filter)\r\n                    console.log(res)\r\n                    setVacationPosts(res.data.sort((p1, p2) => {\r\n                        return new Date(p2.workstart) - new Date(p1.workstart)\r\n                    }))\r\n                    setPosts(res.data.sort((p1, p2) => {\r\n                        return new Date(p2.workstart) - new Date(p1.workstart)\r\n                    }))\r\n                    setError('')\r\n                }\r\n                fill()\r\n            }\r\n        }\r\n    }\r\n    const handleClickCancel = async () =>{\r\n        setError('')\r\n        setIsFilter(false)\r\n        historyStartWork.current.value = ''\r\n        historyEndWork.current.value = ''\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <Topbar/>\r\n            <div className='Reports'>\r\n                <div className=\"ReportsContainer\">\r\n                    <h2 className='ReportsMainText'>Отчеты</h2>\r\n                    <hr/>\r\n                    {error && <div className='errorHistoryInfo'>{error}</div>}\r\n                    <br/>\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Начало работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyStartWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                    <input\r\n                        type='date'\r\n                        placeholder=\"Конец работы\"\r\n                        className=\"ModalInput\"\r\n                        ref={historyEndWork}\r\n                        style={{'marginRight': '10px'}}\r\n                    />\r\n                    <button className=\"filterButton\" onClick={handleClick}>ок</button>\r\n                    <button className=\"filterButton\" onClick={handleClickCancel}>сбросить</button>\r\n                    <br/>\r\n                    <br/>\r\n                    <hr/>\r\n                    <br/>\r\n                    {isJob\r\n                        ?\r\n                        <tr>\r\n                            <td className=\"historyinfodate\">ФИО</td>\r\n                            <td className=\"historyinfopost\">Начало</td>\r\n                            <td className=\"historyinfopost\">Конец</td>\r\n                            <td className=\"historyinfopost\">Длительность</td>\r\n                        </tr>\r\n                        :\"\"\r\n                    }\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}*/\r\n"]},"metadata":{},"sourceType":"module"}